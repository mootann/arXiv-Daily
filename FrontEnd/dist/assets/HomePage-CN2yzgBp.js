import{d as ve,u as _e,o as he,c as i,a as o,b as a,w as v,e as me,f as ge,F as L,r as F,g as b,h as N,i as _,j as T,p as U,k as u,l as G,m as fe,n as l,q as z,s as pe,t as ye,v as c,x as w,y as H,E as m,z as V}from"./index-DDyuordv.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ke={class:"home-page"},be={class:"filter-section"},we={class:"search-box"},xe={class:"category-filter"},De=["infinite-scroll-disabled"],Se={class:"paper-left"},$e={class:"paper-index"},Ve={class:"paper-thumbnail"},Pe=["src"],Ie={key:1,class:"thumbnail-placeholder"},Le=["onClick"],Ue={class:"paper-header"},ze={class:"paper-title"},Me={class:"paper-authors"},Ae={class:"paper-abstract"},Be={class:"paper-footer"},Ee={class:"paper-meta"},Fe={class:"paper-tag"},Ne={class:"publish-date"},Te={key:0,class:"hot-value"},Ge={class:"interaction-area"},He=["onClick"],Ke=["onClick"],je={class:"count"},Ye=["onClick"],qe={class:"count"},Re=["onClick"],Ze={class:"count"},Je=["onClick"],Oe={class:"count"},Qe={key:0,class:"loading-text"},We={key:1,class:"no-more-text"},Xe={class:"float-buttons"},et=ve({__name:"HomePage",setup(tt){const p=fe(),P=_e(),g=_(!1),d=_([]),y=_(""),x=_(""),C=_(!1),f=_(1),D=_(20),S=_(0),K=_(!1),h=_(!1),M=T(()=>h.value||d.value.length>=S.value&&S.value>0&&!g.value),A=T(()=>g.value||M.value),j=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},Y=()=>{const t=new Date;t.setDate(t.getDate()-6);const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},$=async(t=!1)=>{g.value=!0;try{let e;if(y.value)e=await U.searchPapers(y.value,f.value,D.value,C.value||void 0);else if(x.value)e=await U.getPapersByCategory(x.value,f.value,D.value,C.value||void 0);else{const n=j(),r=Y();e=await U.getPapers({startDate:r,endDate:n,page:f.value,size:D.value,hasGithub:C.value||void 0})}if(e.data.code===200){const n=e.data.data.content||e.data.data.records||[];n.length===0&&(h.value=!0),t?d.value=[...d.value,...n]:d.value=n,n.length<D.value?h.value=!0:h.value=!1,S.value=e.data.data.totalElements||e.data.data.total||0,S.value>0&&n.length===0&&(h.value=!0)}}catch(e){console.error("èŽ·å–è®ºæ–‡åˆ—è¡¨å¤±è´¥:",e),h.value=!0}finally{g.value=!1}},q=()=>{A.value||h.value||(f.value++,$(!0))},I=()=>{f.value=1,d.value=[],h.value=!1,$()},R=()=>{y.value="",f.value=1,d.value=[],h.value=!1,$()},Z=t=>{window.open(t,"_blank")},B=t=>{p.push(`/paper/${t}`)},J=async t=>{if(!P.isLoggedIn){m.warning("è¯·å…ˆç™»å½•"),p.push("/login");return}try{t.isCollected?(await V.uncollectPaper(t.arxivId),t.isCollected=!1,t.collectCount&&t.collectCount--,m.success("å·²å–æ¶ˆæ”¶è—")):(await V.collectPaper(t.arxivId),t.isCollected=!0,t.collectCount&&t.collectCount++,m.success("æ”¶è—æˆåŠŸ"))}catch(e){console.error("æ”¶è—æ“ä½œå¤±è´¥:",e)}},O=async t=>{if(!P.isLoggedIn){m.warning("è¯·å…ˆç™»å½•"),p.push("/login");return}try{t.isLiked?(await V.unlikePaper(t.arxivId),t.isLiked=!1,t.likeCount&&t.likeCount--,m.success("å·²å–æ¶ˆç‚¹èµž")):(await V.likePaper(t.arxivId),t.isLiked=!0,t.likeCount&&t.likeCount++,m.success("ç‚¹èµžæˆåŠŸ"))}catch(e){console.error("ç‚¹èµžæ“ä½œå¤±è´¥:",e)}},Q=t=>{const e=window.location.origin+`/paper/${t.arxivId}`;if(navigator.clipboard)navigator.clipboard.writeText(e).then(()=>{m.success("é“¾æŽ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")});else{const n=document.createElement("input");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),m.success("é“¾æŽ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}},W=()=>{P.isLoggedIn?p.push("/collect"):p.push("/login")},X=t=>t?new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):"",ee=t=>{if(!t)return"";if(Array.isArray(t))return t.join(", ");if(typeof t=="string"){let e=t.replace(/^\[|\]$/g,"");return e=e.replace(/"([^"]+)"/g,"$1"),e}return t};return he(()=>{$()}),(t,e)=>{const n=u("Search"),r=u("el-icon"),te=u("el-button"),se=u("el-input"),oe=u("el-option"),ne=u("el-select"),ae=u("el-checkbox"),le=u("Document"),E=u("User"),ie=u("el-empty"),ce=u("Plus"),re=G("loading"),ue=G("infinite-scroll");return l(),i("div",ke,[e[11]||(e[11]=o("div",{class:"section-header"},[o("h1",{class:"section-title"},"å‰æ²¿è®ºæ–‡")],-1)),o("div",be,[o("div",we,[a(se,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s),placeholder:"æœç´¢è®ºæ–‡æ ‡é¢˜ã€ä½œè€…...",size:"large",clearable:"",onKeyup:me(I,["enter"])},{prefix:v(()=>[a(r,null,{default:v(()=>[a(n)]),_:1})]),append:v(()=>[a(te,{onClick:I},{default:v(()=>[...e[4]||(e[4]=[z("æœç´¢",-1)])]),_:1})]),_:1},8,["modelValue"])]),o("div",xe,[a(ne,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),placeholder:"é€‰æ‹©åˆ†ç±»",clearable:"",size:"large",onChange:R},{default:v(()=>[(l(!0),i(L,null,F(pe(ye),s=>(l(),N(oe,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(ae,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=s=>C.value=s),onChange:I},{default:v(()=>[...e[5]||(e[5]=[z(" ä»…æ˜¾ç¤ºæœ‰ä»£ç çš„è®ºæ–‡ ",-1)])]),_:1},8,["modelValue"])])]),ge((l(),i("div",{class:"paper-list","infinite-scroll-disabled":A.value,"infinite-scroll-distance":20,"infinite-scroll-immediate":!1},[d.value.length>0?(l(),i(L,{key:0},[(l(!0),i(L,null,F(d.value,(s,de)=>(l(),i("div",{key:s.arxivId,class:"paper-card"},[o("div",Se,[o("div",$e,c(String(de+1).padStart(2,"0")),1),o("div",Ve,[s.thumbnailUrl?(l(),i("img",{key:0,src:s.thumbnailUrl,alt:"è®ºæ–‡é…å›¾"},null,8,Pe)):(l(),i("div",Ie,[a(r,{size:40},{default:v(()=>[a(le)]),_:1})]))])]),o("div",{class:"paper-content",onClick:k=>B(s.arxivId)},[o("div",Ue,[o("h3",ze,c(s.title),1)]),o("div",Me,[a(r,null,{default:v(()=>[a(E)]),_:1}),z(" "+c(ee(s.authors)),1)]),o("div",Ae,c(s.summary.substring(0,200))+c(s.summary.length>200?"...":""),1),o("div",Be,[o("div",Ee,[o("span",Fe,c(s.primaryCategory),1),o("span",Ne," å‘å¸ƒäºŽ "+c(X(s.publishedDate)),1),s.hotValue?(l(),i("span",Te," ðŸ”¥ "+c(s.hotValue),1)):b("",!0)]),o("div",Ge,[s.githubUrl?(l(),i("span",{key:0,class:"interaction-item",onClick:w(k=>Z(s.githubUrl),["stop"]),title:"æŸ¥çœ‹ä»£ç "},[...e[6]||(e[6]=[o("svg",{height:"16","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",class:"icon",fill:"currentColor"},[o("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.46-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})],-1)])],8,He)):b("",!0),o("span",{class:"interaction-item",onClick:w(k=>Q(s),["stop"])},[e[7]||(e[7]=o("span",{class:"icon"},"ðŸ‘¥",-1)),o("span",je,c(s.viewCount||0),1)],8,Ke),o("span",{class:H(["interaction-item",{active:s.isCollected}]),onClick:w(k=>J(s),["stop"])},[e[8]||(e[8]=o("span",{class:"icon"},"â­",-1)),o("span",qe,c(s.collectCount||0),1)],10,Ye),o("span",{class:H(["interaction-item",{active:s.isLiked}]),onClick:w(k=>O(s),["stop"])},[e[9]||(e[9]=o("span",{class:"icon"},"â¤ï¸",-1)),o("span",Ze,c(s.likeCount||0),1)],10,Re),o("span",{class:"interaction-item",onClick:w(k=>B(s.arxivId),["stop"])},[e[10]||(e[10]=o("span",{class:"icon"},"ðŸ’¬",-1)),o("span",Oe,c(s.commentCount||0),1)],8,Je)])])],8,Le)]))),128)),g.value?(l(),i("p",Qe,"åŠ è½½ä¸­...")):b("",!0),M.value?(l(),i("p",We,"æ²¡æœ‰æ›´å¤šäº†")):b("",!0)],64)):!g.value&&d.value.length===0?(l(),N(ie,{key:1,description:"æš‚æ— è®ºæ–‡æ•°æ®"})):b("",!0)],8,De)),[[re,g.value&&d.value.length===0],[ue,q]]),o("div",Xe,[o("div",{class:"float-btn",onClick:e[3]||(e[3]=s=>K.value=!0),title:"æ·»åŠ è®ºæ–‡"},[a(r,null,{default:v(()=>[a(ce)]),_:1})]),o("div",{class:"float-btn",onClick:W,title:"ä¸ªäººä¸­å¿ƒ"},[a(r,null,{default:v(()=>[a(E)]),_:1})])])])}}}),nt=Ce(et,[["__scopeId","data-v-71cc1471"]]);export{nt as default};
