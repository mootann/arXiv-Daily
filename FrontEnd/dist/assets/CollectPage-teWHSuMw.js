import{d as R,u as Z,o as G,c,a as s,f as H,F as J,r as K,s as S,h as w,w as n,g as v,b as o,i as g,z as D,k as r,l as O,n as i,v as l,q as d,x as I,m as Q,E as W}from"./index-DDyuordv.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"collect-page"},ee={class:"paper-list"},te=["onClick"],ae={class:"paper-index"},se={class:"paper-content"},oe={class:"paper-header"},ne={class:"paper-title"},le={class:"paper-tags"},re=["href"],ie={class:"paper-authors"},de={class:"paper-abstract"},ce={class:"paper-footer"},ue={class:"paper-meta"},pe={class:"date"},_e={key:0,class:"stat-item"},ve={class:"paper-actions"},ge={key:0,class:"pagination"},me=R({__name:"CollectPage",setup(fe){const $=Q(),C=Z(),u=g(!1),p=g([]),m=g(1),f=g(10),_=g(0),k=async()=>{if(!C.isLoggedIn){u.value=!1;return}u.value=!0;try{const t=await D.getCollectedPapers(m.value,f.value);t.data.code===200&&(p.value=t.data.data.content||t.data.data.records||[],_.value=t.data.data.totalElements||t.data.data.total||0)}catch(t){console.error("获取收藏论文失败:",t)}finally{u.value=!1}},P=async t=>{try{await D.uncollectPaper(t.arxivId),p.value=p.value.filter(e=>e.arxivId!==t.arxivId),_.value--,W.success("已取消收藏")}catch(e){console.error("取消收藏失败:",e)}},U=()=>{k()},A=()=>{m.value=1,k()},z=t=>{$.push(`/paper/${t}`)},B=t=>t?new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):"",L=t=>{if(!t)return"";if(Array.isArray(t))return t.join(", ");if(typeof t=="string"){let e=t.replace(/^\[|\]$/g,"");return e=e.replace(/"([^"]+)"/g,"$1"),e}return t};return G(()=>{k()}),(t,e)=>{const N=r("el-tag"),E=r("User"),y=r("el-icon"),M=r("Calendar"),V=r("Star"),j=r("Delete"),h=r("el-button"),x=r("el-empty"),F=r("el-pagination"),T=O("loading");return i(),c("div",Y,[e[9]||(e[9]=s("div",{class:"page-header"},[s("h2",null,"收藏板块"),s("p",{class:"subtitle"},"浏览您收藏的论文")],-1)),H((i(),c("div",ee,[p.value.length>0?(i(!0),c(J,{key:0},K(p.value,(a,q)=>(i(),c("div",{key:a.arxivId,class:"paper-card",onClick:b=>z(a.arxivId)},[s("div",ae,l(String(q+1).padStart(2,"0")),1),s("div",se,[s("div",oe,[s("h3",ne,l(a.title),1),s("div",le,[o(N,{size:"small",type:"primary"},{default:n(()=>[d(l(a.primaryCategory),1)]),_:2},1024),a.githubUrl?(i(),c("a",{key:0,href:a.githubUrl,target:"_blank",class:"github-link",title:"查看代码"},[...e[4]||(e[4]=[s("svg",{height:"16","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",fill:"currentColor"},[s("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.46-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})],-1)])],8,re)):v("",!0)])]),s("div",ie,[o(y,null,{default:n(()=>[o(E)]),_:1}),d(" "+l(L(a.authors)),1)]),s("div",de,l(a.summary.substring(0,200))+l(a.summary.length>200?"...":""),1),s("div",ce,[s("div",ue,[s("span",pe,[o(y,null,{default:n(()=>[o(M)]),_:1}),d(" "+l(B(a.publishedDate)),1)]),a.likeCount?(i(),c("span",_e,[o(y,null,{default:n(()=>[o(V)]),_:1}),d(" "+l(a.likeCount),1)])):v("",!0)]),s("div",ve,[o(h,{type:"danger",size:"small",onClick:I(b=>P(a),["stop"])},{default:n(()=>[o(y,null,{default:n(()=>[o(j)]),_:1}),e[5]||(e[5]=d(" 取消收藏 ",-1))]),_:1},8,["onClick"]),o(h,{type:"primary",size:"small",onClick:I(b=>z(a.arxivId),["stop"])},{default:n(()=>[...e[6]||(e[6]=[d(" 查看详情 ",-1)])]),_:1},8,["onClick"])])])])],8,te))),128)):!u.value&&S(C).isLoggedIn?(i(),w(x,{key:1,description:"暂无收藏的论文"},{default:n(()=>[o(h,{type:"primary",onClick:e[0]||(e[0]=a=>t.$router.push("/"))},{default:n(()=>[...e[7]||(e[7]=[d("去浏览论文",-1)])]),_:1})]),_:1})):v("",!0)])),[[T,u.value]]),_.value>0?(i(),c("div",ge,[o(F,{"current-page":m.value,"onUpdate:currentPage":e[1]||(e[1]=a=>m.value=a),"page-size":f.value,"onUpdate:pageSize":e[2]||(e[2]=a=>f.value=a),total:_.value,"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:U},{total:n(()=>[s("span",null,"共 "+l(_.value)+" 条",1)]),sizes:n(()=>[s("span",null,l(f.value)+" 条/页",1)]),_:1},8,["current-page","page-size","total"])])):v("",!0),!S(C).isLoggedIn&&!u.value?(i(),w(x,{key:1,description:"登录后可查看收藏的论文"},{default:n(()=>[o(h,{type:"primary",onClick:e[3]||(e[3]=a=>t.$router.push("/login"))},{default:n(()=>[...e[8]||(e[8]=[d("去登录",-1)])]),_:1})]),_:1})):v("",!0)])}}}),Ce=X(me,[["__scopeId","data-v-50069986"]]);export{Ce as default};
