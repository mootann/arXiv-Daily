var ug=Object.defineProperty;var af=a=>{throw TypeError(a)};var dg=(a,t,e)=>t in a?ug(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var nt=(a,t,e)=>dg(a,typeof t!="symbol"?t+"":t,e),xu=(a,t,e)=>t.has(a)||af("Cannot "+e);var o=(a,t,e)=>(xu(a,t,"read from private field"),e?e.call(a):t.get(a)),w=(a,t,e)=>t.has(a)?af("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),v=(a,t,e,s)=>(xu(a,t,"write to private field"),s?s.call(a,e):t.set(a,e),e),x=(a,t,e)=>(xu(a,t,"access private method"),e);var je=(a,t,e,s)=>({set _(i){v(a,t,i,e)},get _(){return o(a,t,s)}});import{d as fg,u as pg,K as of,o as mg,f as Ya,c as ne,a as $,b as lt,w as Pt,y as Wi,g as Qs,v as Pe,q as as,s as gg,h as Rh,F as Su,r as ku,L as Ph,M as lf,e as vg,x as bg,i as Vt,p as hf,z as Ka,E as A0,N as Dh,k as xe,l as yg,O as wg,m as Ag,n as Gt,P as xg}from"./index-DDyuordv.js";import{_ as Sg}from"./_plugin-vue_export-helper-DlAUqK2U.js";var $0={};$0.d=(a,t)=>{for(var e in t)$0.o(t,e)&&!$0.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:t[e]})};$0.o=(a,t)=>Object.prototype.hasOwnProperty.call(a,t);var ut=globalThis.pdfjsLib={};$0.d(ut,{AbortException:()=>wn,AnnotationEditorLayer:()=>e1,AnnotationEditorParamsType:()=>xt,AnnotationEditorType:()=>ft,AnnotationEditorUIManager:()=>$a,AnnotationLayer:()=>b5,AnnotationMode:()=>Hr,ColorPicker:()=>Mc,DOMSVGFactory:()=>k1,DrawLayer:()=>r1,FeatureTest:()=>es,GlobalWorkerOptions:()=>_r,ImageKind:()=>Wh,InvalidPDFException:()=>Xu,MissingPDFException:()=>W0,OPS:()=>ti,OutputScale:()=>Ku,PDFDataRangeTransport:()=>dm,PDFDateString:()=>w1,PDFWorker:()=>lo,PasswordResponses:()=>Eg,PermissionFlag:()=>Tg,PixelsPerInch:()=>An,RenderingCancelledException:()=>b1,TextLayer:()=>j0,TouchManager:()=>Ec,UnexpectedResponseException:()=>kc,Util:()=>et,VerbosityLevel:()=>su,XfaLayer:()=>pm,build:()=>Q2,createValidAbsoluteUrl:()=>Pg,fetchData:()=>au,getDocument:()=>$2,getFilenameFromUrl:()=>Hg,getPdfFilenameFromUrl:()=>qg,getXfaPageViewport:()=>Gg,isDataScheme:()=>ou,isPdfFile:()=>y1,noContextMenu:()=>mi,normalizeUnicode:()=>Og,setLayerDimensions:()=>Ga,shadow:()=>yt,stopEvent:()=>Ps,version:()=>Z2});const We=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),up=[1,0,0,1,0,0],ju=[.001,0,0,.001,0,0],kg=1e7,_u=1.35,Ms={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_g="pdfjs_internal_editor_",ft={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},xt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Tg={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ze={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Wh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},x0={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},su={ERRORS:0,WARNINGS:1,INFOS:5},ti={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Eg={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let iu=su.WARNINGS;function Cg(a){Number.isInteger(a)&&(iu=a)}function Mg(){return iu}function ru(a){iu>=su.INFOS&&console.log(`Info: ${a}`)}function pt(a){iu>=su.WARNINGS&&console.log(`Warning: ${a}`)}function zt(a){throw new Error(a)}function de(a,t){a||zt(t)}function Rg(a){switch(a==null?void 0:a.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Pg(a,t=null,e=null){if(!a)return null;try{if(e&&typeof a=="string"){if(e.addDefaultProtocol&&a.startsWith("www.")){const i=a.match(/\./g);(i==null?void 0:i.length)>=2&&(a=`http://${a}`)}if(e.tryConvertEncoding)try{a=Fg(a)}catch{}}const s=t?new URL(a,t):new URL(a);if(Rg(s))return s}catch{}return null}function yt(a,t,e,s=!1){return Object.defineProperty(a,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Tn=(function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class cf extends Tn{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Tu extends Tn{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Xu extends Tn{constructor(t){super(t,"InvalidPDFException")}}class W0 extends Tn{constructor(t){super(t,"MissingPDFException")}}class kc extends Tn{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Dg extends Tn{constructor(t){super(t,"FormatError")}}class wn extends Tn{constructor(t){super(t,"AbortException")}}function dp(a){(typeof a!="object"||(a==null?void 0:a.length)===void 0)&&zt("Invalid argument for bytesToString");const t=a.length,e=8192;if(t<e)return String.fromCharCode.apply(null,a);const s=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),n=a.subarray(i,r);s.push(String.fromCharCode.apply(null,n))}return s.join("")}function nu(a){typeof a!="string"&&zt("Invalid argument for stringToBytes");const t=a.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=a.charCodeAt(s)&255;return e}function Ig(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function g1(a){const t=Object.create(null);for(const[e,s]of a)t[e]=s;return t}function Lg(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function Ng(){try{return new Function(""),!0}catch{return!1}}class es{static get isLittleEndian(){return yt(this,"isLittleEndian",Lg())}static get isEvalSupported(){return yt(this,"isEvalSupported",Ng())}static get isOffscreenCanvasSupported(){return yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return yt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?yt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):yt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return yt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Eu=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));var Cr,jh,Yu;class et{static makeHexColor(t,e,s){return`#${Eu[t]}${Eu[e]}${Eu[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const s=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[s,i]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s;return[i,r]}static getAxialAlignedBoundingBox(t,e){const s=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),n=this.applyTransform([t[2],t[1]],e);return[Math.min(s[0],i[0],r[0],n[0]),Math.min(s[1],i[1],r[1],n[1]),Math.max(s[0],i[0],r[0],n[0]),Math.max(s[1],i[1],r[1],n[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],n=t[2]*e[1]+t[3]*e[3],l=(s+n)/2,h=Math.sqrt((s+n)**2-4*(s*n-r*i))/2,c=l+h||1,u=l-h||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),n=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>n?null:[s,r,i,n]}static bezierBoundingBox(t,e,s,i,r,n,l,h,c){return c?(c[0]=Math.min(c[0],t,l),c[1]=Math.min(c[1],e,h),c[2]=Math.max(c[2],t,l),c[3]=Math.max(c[3],e,h)):c=[Math.min(t,l),Math.min(e,h),Math.max(t,l),Math.max(e,h)],x(this,Cr,Yu).call(this,t,s,r,l,e,i,n,h,3*(-t+3*(s-r)+l),6*(t-2*s+r),3*(s-t),c),x(this,Cr,Yu).call(this,t,s,r,l,e,i,n,h,3*(-e+3*(i-n)+h),6*(e-2*i+n),3*(i-e),c),c}}Cr=new WeakSet,jh=function(t,e,s,i,r,n,l,h,c,u){if(c<=0||c>=1)return;const d=1-c,p=c*c,g=p*c,b=d*(d*(d*t+3*c*e)+3*p*s)+g*i,A=d*(d*(d*r+3*c*n)+3*p*l)+g*h;u[0]=Math.min(u[0],b),u[1]=Math.min(u[1],A),u[2]=Math.max(u[2],b),u[3]=Math.max(u[3],A)},Yu=function(t,e,s,i,r,n,l,h,c,u,d,p){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&x(this,Cr,jh).call(this,t,e,s,i,r,n,l,h,-d/u,p);return}const g=u**2-4*d*c;if(g<0)return;const b=Math.sqrt(g),A=2*c;x(this,Cr,jh).call(this,t,e,s,i,r,n,l,h,(-u+b)/A,p),x(this,Cr,jh).call(this,t,e,s,i,r,n,l,h,(-u-b)/A,p)},w(et,Cr);function Fg(a){return decodeURIComponent(escape(a))}let Cu=null,uf=null;function Og(a){return Cu||(Cu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,uf=new Map([["ﬅ","ſt"]])),a.replaceAll(Cu,(t,e,s)=>e?e.normalize("NFKC"):uf.get(s))}function zg(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),dp(a)}const v1="pdfjs_internal_id_";function Bg(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(dp(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...t){return new Promise(e=>{e(a(...t))})});const Xi="http://www.w3.org/2000/svg",Fn=class Fn{};nt(Fn,"CSS",96),nt(Fn,"PDF",72),nt(Fn,"PDF_TO_CSS_UNITS",Fn.CSS/Fn.PDF);let An=Fn;async function au(a,t="text"){if(T0(a,document.baseURI)){const e=await fetch(a);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",a,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class xh{constructor({viewBox:t,userUnit:e,scale:s,rotation:i,offsetX:r=0,offsetY:n=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=n,s*=e;const h=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let u,d,p,g;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,p=0,g=1;break;case 90:u=0,d=1,p=1,g=0;break;case 270:u=0,d=-1,p=-1,g=0;break;case 0:u=1,d=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(p=-p,g=-g);let b,A,_,k;u===0?(b=Math.abs(c-t[1])*s+r,A=Math.abs(h-t[0])*s+n,_=(t[3]-t[1])*s,k=(t[2]-t[0])*s):(b=Math.abs(h-t[0])*s+r,A=Math.abs(c-t[1])*s+n,_=(t[2]-t[0])*s,k=(t[3]-t[1])*s),this.transform=[u*s,d*s,p*s,g*s,b-u*s*h-p*s*c,A-d*s*h-g*s*c],this.width=_,this.height=k}get rawDims(){const{userUnit:t,viewBox:e}=this,s=e.map(i=>i*t);return yt(this,"rawDims",{pageWidth:s[2]-s[0],pageHeight:s[3]-s[1],pageX:s[0],pageY:s[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new xh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return et.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=et.applyTransform([t[0],t[1]],this.transform),s=et.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return et.applyInverseTransform([t,e],this.transform)}}class b1 extends Tn{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function ou(a){const t=a.length;let e=0;for(;e<t&&a[e].trim()==="";)e++;return a.substring(e,e+5).toLowerCase()==="data:"}function y1(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function Hg(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function qg(a,t="document.pdf"){if(typeof a!="string")return t;if(ou(a))return pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(a);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class df{constructor(){nt(this,"started",Object.create(null));nt(this,"times",[])}time(t){t in this.started&&pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:i,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-i}ms
`);return t.join("")}}function T0(a,t){try{const{protocol:e}=t?new URL(a,t):new URL(a);return e==="http:"||e==="https:"}catch{return!1}}function mi(a){a.preventDefault()}function Ps(a){a.preventDefault(),a.stopPropagation()}var Z0;class w1{static toDateObject(t){if(!t||typeof t!="string")return null;o(this,Z0)||v(this,Z0,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=o(this,Z0).exec(t);if(!e)return null;const s=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let n=parseInt(e[4],10);n=n>=0&&n<=23?n:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const c=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(n+=u,l+=d):c==="+"&&(n-=u,l-=d),new Date(Date.UTC(s,i,r,n,l,h))}}Z0=new WeakMap,w(w1,Z0);function Gg(a,{scale:t=1,rotation:e=0}){const{width:s,height:i}=a.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new xh({viewBox:r,userUnit:1,scale:t,rotation:e})}function A1(a){if(a.startsWith("#")){const t=parseInt(a.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(t=>parseInt(t)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pt(`Not a valid color format: "${a}"`),[0,0,0])}function $g(a){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of a.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;a.set(e,A1(s))}t.remove()}function Wt(a){const{a:t,b:e,c:s,d:i,e:r,f:n}=a.getTransform();return[t,e,s,i,r,n]}function bi(a){const{a:t,b:e,c:s,d:i,e:r,f:n}=a.getTransform().invertSelf();return[t,e,s,i,r,n]}function Ga(a,t,e=!1,s=!0){if(t instanceof xh){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:n}=a,l=es.isCSSRoundSupported,h=`var(--scale-factor) * ${i}px`,c=`var(--scale-factor) * ${r}px`,u=l?`round(down, ${h}, var(--scale-round-x, 1px))`:`calc(${h})`,d=l?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!e||t.rotation%180===0?(n.width=u,n.height=d):(n.width=d,n.height=u)}s&&a.setAttribute("data-main-rotation",t.rotation)}class Ku{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var qr,zn,ei,Bn,Q0,J0,Oc,fp,ss,pp,mp,Xh,gp,Qu;const Zi=class Zi{constructor(t){w(this,ss);w(this,qr,null);w(this,zn,null);w(this,ei);w(this,Bn,null);w(this,Q0,null);v(this,ei,t),o(Zi,J0)||v(Zi,J0,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=v(this,qr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=o(this,ei)._uiManager._signal;t.addEventListener("contextmenu",mi,{signal:e}),t.addEventListener("pointerdown",x(Zi,Oc,fp),{signal:e});const s=v(this,Bn,document.createElement("div"));s.className="buttons",t.append(s);const i=o(this,ei).toolbarPosition;if(i){const{style:r}=t,n=o(this,ei)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*n}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,ss,gp).call(this),t}get div(){return o(this,qr)}hide(){var t;o(this,qr).classList.add("hidden"),(t=o(this,zn))==null||t.hideDropdown()}show(){var t;o(this,qr).classList.remove("hidden"),(t=o(this,Q0))==null||t.shown()}async addAltText(t){const e=await t.render();x(this,ss,Xh).call(this,e),o(this,Bn).prepend(e,o(this,ss,Qu)),v(this,Q0,t)}addColorPicker(t){v(this,zn,t);const e=t.renderButton();x(this,ss,Xh).call(this,e),o(this,Bn).prepend(e,o(this,ss,Qu))}remove(){var t;o(this,qr).remove(),(t=o(this,zn))==null||t.destroy(),v(this,zn,null)}};qr=new WeakMap,zn=new WeakMap,ei=new WeakMap,Bn=new WeakMap,Q0=new WeakMap,J0=new WeakMap,Oc=new WeakSet,fp=function(t){t.stopPropagation()},ss=new WeakSet,pp=function(t){o(this,ei)._focusEventsAllowed=!1,Ps(t)},mp=function(t){o(this,ei)._focusEventsAllowed=!0,Ps(t)},Xh=function(t){const e=o(this,ei)._uiManager._signal;t.addEventListener("focusin",x(this,ss,pp).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",x(this,ss,mp).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",mi,{signal:e})},gp=function(){const{editorType:t,_uiManager:e}=o(this,ei),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",o(Zi,J0)[t]),x(this,ss,Xh).call(this,s),s.addEventListener("click",i=>{e.delete()},{signal:e._signal}),o(this,Bn).append(s)},Qu=function(){const t=document.createElement("div");return t.className="divider",t},w(Zi,Oc),w(Zi,J0,null);let Zu=Zi;var tl,Hn,qn,_n,vp,bp,yp;class Vg{constructor(t){w(this,_n);w(this,tl,null);w(this,Hn,null);w(this,qn);v(this,qn,t)}show(t,e,s){const[i,r]=x(this,_n,bp).call(this,e,s),{style:n}=o(this,Hn)||v(this,Hn,x(this,_n,vp).call(this));t.append(o(this,Hn)),n.insetInlineEnd=`${100*i}%`,n.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,Hn).remove()}}tl=new WeakMap,Hn=new WeakMap,qn=new WeakMap,_n=new WeakSet,vp=function(){const t=v(this,Hn,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",mi,{signal:o(this,qn)._signal});const e=v(this,tl,document.createElement("div"));return e.className="buttons",t.append(e),x(this,_n,yp).call(this),t},bp=function(t,e){let s=0,i=0;for(const r of t){const n=r.y+r.height;if(n<s)continue;const l=r.x+(e?r.width:0);if(n>s){i=l,s=n;continue}e?l>i&&(i=l):l<i&&(i=l)}return[e?1-i:i,s]},yp=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=o(this,qn)._signal;t.addEventListener("contextmenu",mi,{signal:s}),t.addEventListener("click",()=>{o(this,qn).highlightSelection("floating_button")},{signal:s}),o(this,tl).append(t)};function _c(a,t,e){for(const s of e)t.addEventListener(s,a[s].bind(a))}var zc;class Ug{constructor(){w(this,zc,0)}get id(){return`${_g}${je(this,zc)._++}`}}zc=new WeakMap;var co,el,qe,uo,Yh;const W1=class W1{constructor(){w(this,uo);w(this,co,zg());w(this,el,0);w(this,qe,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return yt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:i,type:r}=t;return x(this,uo,Yh).call(this,`${e}_${s}_${i}_${r}`,t)}async getFromUrl(t){return x(this,uo,Yh).call(this,t,t)}async getFromBlob(t,e){const s=await e;return x(this,uo,Yh).call(this,t,s)}async getFromId(t){o(this,qe)||v(this,qe,new Map);const e=o(this,qe).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){o(this,qe)||v(this,qe,new Map);let s=o(this,qe).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${o(this,co)}_${je(this,el)._++}`,refCounter:1,isSvg:!1},o(this,qe).set(t,s),o(this,qe).set(s.id,s),s}getSvgUrl(t){const e=o(this,qe).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;o(this,qe)||v(this,qe,new Map);const e=o(this,qe).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${o(this,co)}_`)}};co=new WeakMap,el=new WeakMap,qe=new WeakMap,uo=new WeakSet,Yh=async function(t,e){o(this,qe)||v(this,qe,new Map);let s=o(this,qe).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${o(this,co)}_${je(this,el)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(s.url=e,i=await au(e,"blob")):e instanceof File?i=s.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=W1._isSVGFittingCanvas,n=new FileReader,l=new Image,h=new Promise((c,u)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,c()},n.onload=async()=>{const d=s.svgUrl=n.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=n.onerror=u});n.readAsDataURL(i),await h}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){pt(i),s=null}return o(this,qe).set(t,s),s&&o(this,qe).set(s.id,s),s};let Ju=W1;var ae,Gr,sl,Zt;class Wg{constructor(t=128){w(this,ae,[]);w(this,Gr,!1);w(this,sl);w(this,Zt,-1);v(this,sl,t)}add({cmd:t,undo:e,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:n=!1,keepUndo:l=!1}){if(i&&t(),o(this,Gr))return;const h={cmd:t,undo:e,post:s,type:r};if(o(this,Zt)===-1){o(this,ae).length>0&&(o(this,ae).length=0),v(this,Zt,0),o(this,ae).push(h);return}if(n&&o(this,ae)[o(this,Zt)].type===r){l&&(h.undo=o(this,ae)[o(this,Zt)].undo),o(this,ae)[o(this,Zt)]=h;return}const c=o(this,Zt)+1;c===o(this,sl)?o(this,ae).splice(0,1):(v(this,Zt,c),c<o(this,ae).length&&o(this,ae).splice(c)),o(this,ae).push(h)}undo(){if(o(this,Zt)===-1)return;v(this,Gr,!0);const{undo:t,post:e}=o(this,ae)[o(this,Zt)];t(),e==null||e(),v(this,Gr,!1),v(this,Zt,o(this,Zt)-1)}redo(){if(o(this,Zt)<o(this,ae).length-1){v(this,Zt,o(this,Zt)+1),v(this,Gr,!0);const{cmd:t,post:e}=o(this,ae)[o(this,Zt)];t(),e==null||e(),v(this,Gr,!1)}}hasSomethingToUndo(){return o(this,Zt)!==-1}hasSomethingToRedo(){return o(this,Zt)<o(this,ae).length-1}cleanType(t){if(o(this,Zt)!==-1){for(let e=o(this,Zt);e>=0;e--)if(o(this,ae)[e].type!==t){o(this,ae).splice(e+1,o(this,Zt)-e),v(this,Zt,e);return}o(this,ae).length=0,v(this,Zt,-1)}}destroy(){v(this,ae,null)}}ae=new WeakMap,Gr=new WeakMap,sl=new WeakMap,Zt=new WeakMap;var Bc,wp;class Sh{constructor(t){w(this,Bc);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=es.platform;for(const[s,i,r={}]of t)for(const n of s){const l=n.startsWith("mac+");e&&l?(this.callbacks.set(n.slice(4),{callback:i,options:r}),this.allKeys.add(n.split("+").at(-1))):!e&&!l&&(this.callbacks.set(n,{callback:i,options:r}),this.allKeys.add(n.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(x(this,Bc,wp).call(this,e));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:n=[],checker:l=null}}=s;l&&!l(t,e)||(i.bind(t,...n,e)(),r||Ps(e))}}Bc=new WeakSet,wp=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Hc=class Hc{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return $g(t),yt(this,"_colors",t)}convert(t){const e=A1(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,i]of this._colors)if(i.every((r,n)=>r===e[n]))return Hc._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?et.makeHexColor(...e):t}};nt(Hc,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let td=Hc;var fo,vs,be,De,po,tr,mo,zs,$r,Gn,go,$n,Ai,si,Vn,il,rl,vo,nl,xi,Vr,bo,Ur,Si,qc,Wr,al,jr,Un,ol,ll,Se,Dt,er,Wn,hl,cl,Xr,ki,sr,ul,Bs,V,Kh,ed,Ap,xp,Zh,Sp,kp,_p,sd,Tp,id,rd,Ep,Ye,Yi,Cp,Mp,nd,Rp,E0,ad;const no=class no{constructor(t,e,s,i,r,n,l,h,c,u,d,p,g){w(this,V);w(this,fo,new AbortController);w(this,vs,null);w(this,be,new Map);w(this,De,new Map);w(this,po,null);w(this,tr,null);w(this,mo,null);w(this,zs,new Wg);w(this,$r,null);w(this,Gn,null);w(this,go,0);w(this,$n,new Set);w(this,Ai,null);w(this,si,null);w(this,Vn,new Set);nt(this,"_editorUndoBar",null);w(this,il,!1);w(this,rl,!1);w(this,vo,!1);w(this,nl,null);w(this,xi,null);w(this,Vr,null);w(this,bo,null);w(this,Ur,!1);w(this,Si,null);w(this,qc,new Ug);w(this,Wr,!1);w(this,al,!1);w(this,jr,null);w(this,Un,null);w(this,ol,null);w(this,ll,null);w(this,Se,ft.NONE);w(this,Dt,new Set);w(this,er,null);w(this,Wn,null);w(this,hl,null);w(this,cl,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,Xr,[0,0]);w(this,ki,null);w(this,sr,null);w(this,ul,null);w(this,Bs,null);const b=this._signal=o(this,fo).signal;v(this,sr,t),v(this,ul,e),v(this,po,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:b}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),i._on("setpreference",this.onSetPreference.bind(this),{signal:b}),i._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:b}),x(this,V,Sp).call(this),x(this,V,Ep).call(this),x(this,V,sd).call(this),v(this,tr,r.annotationStorage),v(this,nl,r.filterFactory),v(this,Wn,n),v(this,bo,l||null),v(this,il,h),v(this,rl,c),v(this,vo,u),v(this,ll,d||null),this.viewParameters={realScale:An.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=g!==!1}static get _keyboardManager(){const t=no.prototype,e=n=>o(n,sr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&n.hasSomethingToControl(),s=(n,{target:l})=>{if(l instanceof HTMLInputElement){const{type:h}=l;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return yt(this,"_keyboardManager",new Sh([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(n,{target:l})=>!(l instanceof HTMLButtonElement)&&o(n,sr).contains(l)&&!n.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(n,{target:l})=>!(l instanceof HTMLButtonElement)&&o(n,sr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,i,r;(t=o(this,Bs))==null||t.resolve(),v(this,Bs,null),(e=o(this,fo))==null||e.abort(),v(this,fo,null),this._signal=null;for(const n of o(this,De).values())n.destroy();o(this,De).clear(),o(this,be).clear(),o(this,Vn).clear(),v(this,vs,null),o(this,Dt).clear(),o(this,zs).destroy(),(s=o(this,po))==null||s.destroy(),(i=o(this,Si))==null||i.hide(),v(this,Si,null),o(this,xi)&&(clearTimeout(o(this,xi)),v(this,xi,null)),o(this,ki)&&(clearTimeout(o(this,ki)),v(this,ki,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return o(this,ll)}get useNewAltTextFlow(){return o(this,rl)}get useNewAltTextWhenAddingImage(){return o(this,vo)}get hcmFilter(){return yt(this,"hcmFilter",o(this,Wn)?o(this,nl).addHCMFilter(o(this,Wn).foreground,o(this,Wn).background):"none")}get direction(){return yt(this,"direction",getComputedStyle(o(this,sr)).direction)}get highlightColors(){return yt(this,"highlightColors",o(this,bo)?new Map(o(this,bo).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),v(this,Gn,t)}setMainHighlightColorPicker(t){v(this,ol,t)}editAltText(t,e=!1){var s;(s=o(this,po))==null||s.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":v(this,vo,e);break}}onPageChanging({pageNumber:t}){v(this,go,t-1)}focusMainContainer(){o(this,sr).focus()}findParent(t,e){for(const s of o(this,De).values()){const{x:i,y:r,width:n,height:l}=s.div.getBoundingClientRect();if(t>=i&&t<=i+n&&e>=r&&e<=r+l)return s}return null}disableUserSelect(t=!1){o(this,ul).classList.toggle("noUserSelect",t)}addShouldRescale(t){o(this,Vn).add(t)}removeShouldRescale(t){o(this,Vn).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*An.PDF_TO_CSS_UNITS;for(const s of o(this,Vn))s.onScaleChanging();(e=o(this,Gn))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:n}=e,l=e.toString(),c=x(this,V,Kh).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;e.empty();const d=x(this,V,ed).call(this,c),p=o(this,Se)===ft.NONE,g=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:n,text:l}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(ft.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&o(this,tr)&&!o(this,tr).has(t.id)&&o(this,tr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,o(this,Ur)&&(v(this,Ur,!1),x(this,V,Zh).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of o(this,Dt))if(e.div.contains(t)){v(this,Un,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!o(this,Un))return;const[t,e]=o(this,Un);v(this,Un,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){x(this,V,sd).call(this),x(this,V,id).call(this)}removeEditListeners(){x(this,V,Tp).call(this),x(this,V,rd).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of o(this,si))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of o(this,si))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=o(this,vs))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of o(this,Dt)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const n of o(this,si))if(n.isHandlingMimeForPasting(r.type)){n.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){pt(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const h of s){const c=await i.deserialize(h);if(!c)return;r.push(c)}const n=()=>{for(const h of r)x(this,V,nd).call(this,h);x(this,V,ad).call(this,r)},l=()=>{for(const h of r)h.remove()};this.addCommands({cmd:n,undo:l,mustExec:!0})}catch(r){pt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,Se)!==ft.NONE&&!this.isEditorHandlingKeyboard&&no._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,Ur)&&(v(this,Ur,!1),x(this,V,Zh).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(x(this,V,kp).call(this),x(this,V,id).call(this),x(this,V,Ye).call(this,{isEditing:o(this,Se)!==ft.NONE,isEmpty:x(this,V,E0).call(this),hasSomethingToUndo:o(this,zs).hasSomethingToUndo(),hasSomethingToRedo:o(this,zs).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,V,_p).call(this),x(this,V,rd).call(this),x(this,V,Ye).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!o(this,si)){v(this,si,t);for(const e of o(this,si))x(this,V,Yi).call(this,e.defaultPropertiesToUpdate)}}getId(){return o(this,qc).id}get currentLayer(){return o(this,De).get(o(this,go))}getLayer(t){return o(this,De).get(t)}get currentPageIndex(){return o(this,go)}addLayer(t){o(this,De).set(t.pageIndex,t),o(this,Wr)?t.enable():t.disable()}removeLayer(t){o(this,De).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var i;if(o(this,Se)!==t&&!(o(this,Bs)&&(await o(this,Bs).promise,!o(this,Bs)))){if(v(this,Bs,Promise.withResolvers()),v(this,Se,t),t===ft.NONE){this.setEditingState(!1),x(this,V,Mp).call(this),(i=this._editorUndoBar)==null||i.hide(),o(this,Bs).resolve();return}this.setEditingState(!0),await x(this,V,Cp).call(this),this.unselectAll();for(const r of o(this,De).values())r.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),o(this,Bs).resolve();return}for(const r of o(this,be).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();o(this,Bs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==o(this,Se)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(o(this,si)){switch(t){case xt.CREATE:this.currentLayer.addNewEditor();return;case xt.HIGHLIGHT_DEFAULT_COLOR:(s=o(this,ol))==null||s.updateColor(e);break;case xt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,hl)||v(this,hl,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of o(this,Dt))i.updateParams(t,e);for(const i of o(this,si))i.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const n of o(this,be).values())n.editorType===t&&n.show(e);(((r=o(this,hl))==null?void 0:r.get(xt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&x(this,V,Yi).call(this,[[xt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(o(this,al)!==t){v(this,al,t);for(const e of o(this,De).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of o(this,be).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return o(this,be).get(t)}addEditor(t){o(this,be).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(o(this,xi)&&clearTimeout(o(this,xi)),v(this,xi,setTimeout(()=>{this.focusMainContainer(),v(this,xi,null)},0))),o(this,be).delete(t.id),this.unselect(t),(!t.annotationElementId||!o(this,$n).has(t.annotationElementId))&&((e=o(this,tr))==null||e.remove(t.id))}addDeletedAnnotationElement(t){o(this,$n).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return o(this,$n).has(t)}removeDeletedAnnotationElement(t){o(this,$n).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){o(this,vs)!==t&&(v(this,vs,t),t&&x(this,V,Yi).call(this,t.propertiesToUpdate))}updateUI(t){o(this,V,Rp)===t&&x(this,V,Yi).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){x(this,V,Yi).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(o(this,Dt).has(t)){o(this,Dt).delete(t),t.unselect(),x(this,V,Ye).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Dt).add(t),t.select(),x(this,V,Yi).call(this,t.propertiesToUpdate),x(this,V,Ye).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=o(this,Gn))==null||e.commitOrRemove();for(const s of o(this,Dt))s!==t&&s.unselect();o(this,Dt).clear(),o(this,Dt).add(t),t.select(),x(this,V,Yi).call(this,t.propertiesToUpdate),x(this,V,Ye).call(this,{hasSelectedEditor:!0})}isSelected(t){return o(this,Dt).has(t)}get firstSelectedEditor(){return o(this,Dt).values().next().value}unselect(t){t.unselect(),o(this,Dt).delete(t),x(this,V,Ye).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Dt).size!==0}get isEnterHandled(){return o(this,Dt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;o(this,zs).undo(),x(this,V,Ye).call(this,{hasSomethingToUndo:o(this,zs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,V,E0).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){o(this,zs).redo(),x(this,V,Ye).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,zs).hasSomethingToRedo(),isEmpty:x(this,V,E0).call(this)})}addCommands(t){o(this,zs).add(t),x(this,V,Ye).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,V,E0).call(this)})}cleanUndoStack(t){o(this,zs).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...o(this,Dt)],s=()=>{var n;(n=this._editorUndoBar)==null||n.show(i,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},i=()=>{for(const n of e)x(this,V,nd).call(this,n)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=o(this,vs))==null||t.commitOrRemove()}hasSomethingToControl(){return o(this,vs)||this.hasSelection}selectAll(){for(const t of o(this,Dt))t.commit();x(this,V,ad).call(this,o(this,be).values())}unselectAll(){var t;if(!(o(this,vs)&&(o(this,vs).commitOrRemove(),o(this,Se)!==ft.NONE))&&!((t=o(this,Gn))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of o(this,Dt))e.unselect();o(this,Dt).clear(),x(this,V,Ye).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;o(this,Xr)[0]+=t,o(this,Xr)[1]+=e;const[i,r]=o(this,Xr),n=[...o(this,Dt)],l=1e3;o(this,ki)&&clearTimeout(o(this,ki)),v(this,ki,setTimeout(()=>{v(this,ki,null),o(this,Xr)[0]=o(this,Xr)[1]=0,this.addCommands({cmd:()=>{for(const h of n)o(this,be).has(h.id)&&h.translateInPage(i,r)},undo:()=>{for(const h of n)o(this,be).has(h.id)&&h.translateInPage(-i,-r)},mustExec:!1})},l));for(const h of n)h.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,Ai,new Map);for(const t of o(this,Dt))o(this,Ai).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,Ai))return!1;this.disableUserSelect(!1);const t=o(this,Ai);v(this,Ai,null);let e=!1;for(const[{x:i,y:r,pageIndex:n},l]of t)l.newX=i,l.newY=r,l.newPageIndex=n,e||(e=i!==l.savedX||r!==l.savedY||n!==l.savedPageIndex);if(!e)return!1;const s=(i,r,n,l)=>{if(o(this,be).has(i.id)){const h=o(this,De).get(l);h?i._setParentAndPosition(h,r,n):(i.pageIndex=l,i.x=r,i.y=n)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:n,newPageIndex:l}]of t)s(i,r,n,l)},undo:()=>{for(const[i,{savedX:r,savedY:n,savedPageIndex:l}]of t)s(i,r,n,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(o(this,Ai))for(const s of o(this,Ai).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||o(this,Dt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return o(this,vs)===t}getActive(){return o(this,vs)}getMode(){return o(this,Se)}get imageManager(){return yt(this,"imageManager",new Ju)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let c=0,u=e.rangeCount;c<u;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:n}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(c,u,d,p)=>({x:(u-i)/n,y:1-(c+d-s)/r,width:p/n,height:d/r});break;case"180":l=(c,u,d,p)=>({x:1-(c+d-s)/r,y:1-(u+p-i)/n,width:d/r,height:p/n});break;case"270":l=(c,u,d,p)=>({x:1-(u+p-i)/n,y:(c-s)/r,width:p/n,height:d/r});break;default:l=(c,u,d,p)=>({x:(c-s)/r,y:(u-i)/n,width:d/r,height:p/n});break}const h=[];for(let c=0,u=e.rangeCount;c<u;c++){const d=e.getRangeAt(c);if(!d.collapsed)for(const{x:p,y:g,width:b,height:A}of d.getClientRects())b===0||A===0||h.push(l(p,g,b,A))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(o(this,mo)||v(this,mo,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=o(this,mo))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=o(this,mo))==null?void 0:i.get(t.data.id);if(!e)return;const s=o(this,tr).getRawValue(e);s&&(o(this,Se)===ft.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};fo=new WeakMap,vs=new WeakMap,be=new WeakMap,De=new WeakMap,po=new WeakMap,tr=new WeakMap,mo=new WeakMap,zs=new WeakMap,$r=new WeakMap,Gn=new WeakMap,go=new WeakMap,$n=new WeakMap,Ai=new WeakMap,si=new WeakMap,Vn=new WeakMap,il=new WeakMap,rl=new WeakMap,vo=new WeakMap,nl=new WeakMap,xi=new WeakMap,Vr=new WeakMap,bo=new WeakMap,Ur=new WeakMap,Si=new WeakMap,qc=new WeakMap,Wr=new WeakMap,al=new WeakMap,jr=new WeakMap,Un=new WeakMap,ol=new WeakMap,ll=new WeakMap,Se=new WeakMap,Dt=new WeakMap,er=new WeakMap,Wn=new WeakMap,hl=new WeakMap,cl=new WeakMap,Xr=new WeakMap,ki=new WeakMap,sr=new WeakMap,ul=new WeakMap,Bs=new WeakMap,V=new WeakSet,Kh=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},ed=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of o(this,De).values())if(s.hasTextLayer(t))return s;return null},Ap=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=x(this,V,Kh).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(o(this,Si)||v(this,Si,new Vg(this)),o(this,Si).show(s,i,this.direction==="ltr"))},xp=function(){var r,n,l;const t=document.getSelection();if(!t||t.isCollapsed){o(this,er)&&((r=o(this,Si))==null||r.hide(),v(this,er,null),x(this,V,Ye).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===o(this,er))return;const i=x(this,V,Kh).call(this,t).closest(".textLayer");if(!i){o(this,er)&&((n=o(this,Si))==null||n.hide(),v(this,er,null),x(this,V,Ye).call(this,{hasSelectedText:!1}));return}if((l=o(this,Si))==null||l.hide(),v(this,er,e),x(this,V,Ye).call(this,{hasSelectedText:!0}),!(o(this,Se)!==ft.HIGHLIGHT&&o(this,Se)!==ft.NONE)&&(o(this,Se)===ft.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,Ur,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=o(this,Se)===ft.HIGHLIGHT?x(this,V,ed).call(this,i):null;h==null||h.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),d=p=>{p.type==="pointerup"&&p.button!==0||(c.abort(),h==null||h.toggleDrawing(!0),p.type==="pointerup"&&x(this,V,Zh).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}},Zh=function(t=""){o(this,Se)===ft.HIGHLIGHT?this.highlightSelection(t):o(this,il)&&x(this,V,Ap).call(this)},Sp=function(){document.addEventListener("selectionchange",x(this,V,xp).bind(this),{signal:this._signal})},kp=function(){if(o(this,Vr))return;v(this,Vr,new AbortController);const t=this.combinedSignal(o(this,Vr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},_p=function(){var t;(t=o(this,Vr))==null||t.abort(),v(this,Vr,null)},sd=function(){if(o(this,jr))return;v(this,jr,new AbortController);const t=this.combinedSignal(o(this,jr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},Tp=function(){var t;(t=o(this,jr))==null||t.abort(),v(this,jr,null)},id=function(){if(o(this,$r))return;v(this,$r,new AbortController);const t=this.combinedSignal(o(this,$r));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},rd=function(){var t;(t=o(this,$r))==null||t.abort(),v(this,$r,null)},Ep=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ye=function(t){Object.entries(t).some(([s,i])=>o(this,cl)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,cl),t)}),o(this,Se)===ft.HIGHLIGHT&&t.hasSelectedEditor===!1&&x(this,V,Yi).call(this,[[xt.HIGHLIGHT_FREE,!0]]))},Yi=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Cp=async function(){if(!o(this,Wr)){v(this,Wr,!0);const t=[];for(const e of o(this,De).values())t.push(e.enable());await Promise.all(t);for(const e of o(this,be).values())e.enable()}},Mp=function(){if(this.unselectAll(),o(this,Wr)){v(this,Wr,!1);for(const t of o(this,De).values())t.disable();for(const t of o(this,be).values())t.disable()}},nd=function(t){const e=o(this,De).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Rp=function(){let t=null;for(t of o(this,Dt));return t},E0=function(){if(o(this,be).size===0)return!0;if(o(this,be).size===1)for(const t of o(this,be).values())return t.isEmpty();return!1},ad=function(t){for(const e of o(this,Dt))e.unselect();o(this,Dt).clear();for(const e of t)e.isEmpty()||(o(this,Dt).add(e),e.select());x(this,V,Ye).call(this,{hasSelectedEditor:this.hasSelection})},nt(no,"TRANSLATE_SMALL",1),nt(no,"TRANSLATE_BIG",10);let $a=no;var ke,_i,ii,yo,Ti,bs,wo,Ei,cs,ir,jn,Ci,Yr,pi,C0,Qh;const Ke=class Ke{constructor(t){w(this,pi);w(this,ke,null);w(this,_i,!1);w(this,ii,null);w(this,yo,null);w(this,Ti,null);w(this,bs,null);w(this,wo,!1);w(this,Ei,null);w(this,cs,null);w(this,ir,null);w(this,jn,null);w(this,Ci,!1);v(this,cs,t),v(this,Ci,t._uiManager.useNewAltTextFlow),o(Ke,Yr)||v(Ke,Yr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ke._l10n??(Ke._l10n=t)}async render(){const t=v(this,ii,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=v(this,yo,document.createElement("span"));t.append(e),o(this,Ci)?(t.classList.add("new"),t.setAttribute("data-l10n-id",o(Ke,Yr).missing),e.setAttribute("data-l10n-id",o(Ke,Yr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=o(this,cs)._uiManager._signal;t.addEventListener("contextmenu",mi,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),o(this,cs)._uiManager.editAltText(o(this,cs)),o(this,Ci)&&o(this,cs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,pi,C0)}})};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(v(this,wo,!0),i(r))},{signal:s}),await x(this,pi,Qh).call(this),t}finish(){o(this,ii)&&(o(this,ii).focus({focusVisible:o(this,wo)}),v(this,wo,!1))}isEmpty(){return o(this,Ci)?o(this,ke)===null:!o(this,ke)&&!o(this,_i)}hasData(){return o(this,Ci)?o(this,ke)!==null||!!o(this,ir):this.isEmpty()}get guessedText(){return o(this,ir)}async setGuessedText(t){o(this,ke)===null&&(v(this,ir,t),v(this,jn,await Ke._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),x(this,pi,Qh).call(this))}toggleAltTextBadge(t=!1){var e;if(!o(this,Ci)||o(this,ke)){(e=o(this,Ei))==null||e.remove(),v(this,Ei,null);return}if(!o(this,Ei)){const s=v(this,Ei,document.createElement("div"));s.className="noAltTextBadge",o(this,cs).div.append(s)}o(this,Ei).classList.toggle("hidden",!t)}serialize(t){let e=o(this,ke);return!t&&o(this,ir)===e&&(e=o(this,jn)),{altText:e,decorative:o(this,_i),guessedText:o(this,ir),textWithDisclaimer:o(this,jn)}}get data(){return{altText:o(this,ke),decorative:o(this,_i)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(v(this,ir,s),v(this,jn,i)),!(o(this,ke)===t&&o(this,_i)===e)&&(r||(v(this,ke,t),v(this,_i,e)),x(this,pi,Qh).call(this))}toggle(t=!1){o(this,ii)&&(!t&&o(this,bs)&&(clearTimeout(o(this,bs)),v(this,bs,null)),o(this,ii).disabled=!t)}shown(){o(this,cs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,pi,C0)}})}destroy(){var t,e;(t=o(this,ii))==null||t.remove(),v(this,ii,null),v(this,yo,null),v(this,Ti,null),(e=o(this,Ei))==null||e.remove(),v(this,Ei,null)}};ke=new WeakMap,_i=new WeakMap,ii=new WeakMap,yo=new WeakMap,Ti=new WeakMap,bs=new WeakMap,wo=new WeakMap,Ei=new WeakMap,cs=new WeakMap,ir=new WeakMap,jn=new WeakMap,Ci=new WeakMap,Yr=new WeakMap,pi=new WeakSet,C0=function(){return o(this,ke)&&"added"||o(this,ke)===null&&this.guessedText&&"review"||"missing"},Qh=async function(){var i,r,n;const t=o(this,ii);if(!t)return;if(o(this,Ci)){if(t.classList.toggle("done",!!o(this,ke)),t.setAttribute("data-l10n-id",o(Ke,Yr)[o(this,pi,C0)]),(i=o(this,yo))==null||i.setAttribute("data-l10n-id",o(Ke,Yr)[`${o(this,pi,C0)}-label`]),!o(this,ke)){(r=o(this,Ti))==null||r.remove();return}}else{if(!o(this,ke)&&!o(this,_i)){t.classList.remove("done"),(n=o(this,Ti))==null||n.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=o(this,Ti);if(!e){v(this,Ti,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${o(this,cs).id}`;const l=100,h=o(this,cs)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(o(this,bs)),v(this,bs,null)},{once:!0}),t.addEventListener("mouseenter",()=>{v(this,bs,setTimeout(()=>{v(this,bs,null),o(this,Ti).classList.add("show"),o(this,cs)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:h}),t.addEventListener("mouseleave",()=>{var c;o(this,bs)&&(clearTimeout(o(this,bs)),v(this,bs,null)),(c=o(this,Ti))==null||c.classList.remove("show")},{signal:h})}o(this,_i)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=o(this,ke)),e.parentNode||t.append(e);const s=o(this,cs).getImageForAltText();s==null||s.setAttribute("aria-describedby",e.id)},w(Ke,Yr,null),nt(Ke,"_l10n",null);let Tc=Ke;var dl,Xn,fl,pl,ml,gl,vl,Ao,rr,Yn,Kr,Ir,Pp,Dp,od;const j1=class j1{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:n=null,signal:l}){w(this,Ir);w(this,dl);w(this,Xn,!1);w(this,fl,null);w(this,pl);w(this,ml);w(this,gl);w(this,vl);w(this,Ao);w(this,rr,null);w(this,Yn);w(this,Kr,null);v(this,dl,t),v(this,fl,s),v(this,pl,e),v(this,ml,i),v(this,gl,r),v(this,vl,n),v(this,Yn,new AbortController),v(this,Ao,AbortSignal.any([l,o(this,Yn).signal])),t.addEventListener("touchstart",x(this,Ir,Pp).bind(this),{passive:!1,signal:o(this,Ao)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return yt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=o(this,Yn))==null||t.abort(),v(this,Yn,null)}};dl=new WeakMap,Xn=new WeakMap,fl=new WeakMap,pl=new WeakMap,ml=new WeakMap,gl=new WeakMap,vl=new WeakMap,Ao=new WeakMap,rr=new WeakMap,Yn=new WeakMap,Kr=new WeakMap,Ir=new WeakSet,Pp=function(t){var i,r,n;if((i=o(this,pl))!=null&&i.call(this)||t.touches.length<2)return;if(!o(this,Kr)){v(this,Kr,new AbortController);const l=AbortSignal.any([o(this,Ao),o(this,Kr).signal]),h=o(this,dl),c={signal:l,passive:!1};h.addEventListener("touchmove",x(this,Ir,Dp).bind(this),c),h.addEventListener("touchend",x(this,Ir,od).bind(this),c),h.addEventListener("touchcancel",x(this,Ir,od).bind(this),c),(r=o(this,ml))==null||r.call(this)}if(Ps(t),t.touches.length!==2||(n=o(this,fl))!=null&&n.call(this)){v(this,rr,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),v(this,rr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},Dp=function(t){var P;if(!o(this,rr)||t.touches.length!==2)return;let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:i,screenY:r}=e,{screenX:n,screenY:l}=s,h=o(this,rr),{touch0X:c,touch0Y:u,touch1X:d,touch1Y:p}=h,g=d-c,b=p-u,A=n-i,_=l-r,k=Math.hypot(A,_)||1,C=Math.hypot(g,b)||1;if(!o(this,Xn)&&Math.abs(C-k)<=j1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=r,h.touch1X=n,h.touch1Y=l,t.preventDefault(),!o(this,Xn)){v(this,Xn,!0);return}const R=[(i+n)/2,(r+l)/2];(P=o(this,gl))==null||P.call(this,R,C,k)},od=function(t){var e;o(this,Kr).abort(),v(this,Kr,null),(e=o(this,vl))==null||e.call(this),o(this,rr)&&(t.preventDefault(),v(this,rr,null),v(this,Xn,!1))};let Ec=j1;var Kn,ri,$t,xo,Zr,bl,Zn,Ie,Qn,nr,Qr,yl,Jn,ys,wl,ta,ar,Mi,So,ko,Hs,ea,Al,Gc,at,ld,xl,hd,Jh,Ip,Lp,cd,tc,ud,Np,Fp,Op,dd,zp,fd,Bp,Hp,qp,pd,M0;const vt=class vt{constructor(t){w(this,at);w(this,Kn,null);w(this,ri,null);w(this,$t,null);w(this,xo,!1);w(this,Zr,null);w(this,bl,"");w(this,Zn,!1);w(this,Ie,null);w(this,Qn,null);w(this,nr,null);w(this,Qr,null);w(this,yl,"");w(this,Jn,!1);w(this,ys,null);w(this,wl,!1);w(this,ta,!1);w(this,ar,!1);w(this,Mi,null);w(this,So,0);w(this,ko,0);w(this,Hs,null);w(this,ea,null);nt(this,"_editToolbar",null);nt(this,"_initialOptions",Object.create(null));nt(this,"_initialData",null);nt(this,"_isVisible",!0);nt(this,"_uiManager",null);nt(this,"_focusEventsAllowed",!0);w(this,Al,!1);w(this,Gc,vt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:n}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,n];const[l,h]=this.parentDimensions;this.x=t.x/l,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=vt.prototype._resizeWithKeyboard,e=$a.TRANSLATE_SMALL,s=$a.TRANSLATE_BIG;return yt(this,"_resizerKeyboardManager",new Sh([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],vt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new jg({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(vt._l10n??(vt._l10n=t),vt._l10nResizer||(vt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),vt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);vt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,Al)}set _isDraggable(t){var e;v(this,Al,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,Gc)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):x(this,at,M0).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(o(this,Jn)?v(this,Jn,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){const[r,n]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/n,this.fixAndSetPosition()}translate(t,e){x(this,at,ld).call(this,this.parentDimensions,t,e)}translateInPage(t,e){o(this,ys)||v(this,ys,[this.x,this.y,this.width,this.height]),x(this,at,ld).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){o(this,ys)||v(this,ys,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:n,y:l}=this;const[h,c]=this.getBaseTranslation();n+=h,l+=c;const{style:u}=s;u.left=`${(100*n).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(n,l),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!o(this,ys)&&(o(this,ys)[0]!==this.x||o(this,ys)[1]!==this.y)}get _hasBeenResized(){return!!o(this,ys)&&(o(this,ys)[2]!==this.width||o(this,ys)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=vt,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,i]}=this;let{x:r,y:n,width:l,height:h}=this;if(l*=s,h*=i,r*=s,n*=i,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(s-l,r)),n=Math.max(0,Math.min(i-h,n));break;case 90:r=Math.max(0,Math.min(s-h,r)),n=Math.min(i,Math.max(l,n));break;case 180:r=Math.min(s,Math.max(l,r)),n=Math.min(i,Math.max(h,n));break;case 270:r=Math.min(s,Math.max(h,r)),n=Math.max(0,Math.min(i-l,n));break}this.x=r/=s,this.y=n/=i;const[c,u]=this.getBaseTranslation();r+=c,n+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*n).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return x(s=vt,xl,hd).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return x(s=vt,xl,hd).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,o(this,Zn)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,i=s.endsWith("%"),r=!o(this,Zn)&&e.endsWith("%");if(i&&r)return;const[n,l]=this.parentDimensions;i||(t.width=`${(100*parseFloat(s)/n).toFixed(2)}%`),!o(this,Zn)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=o(this,$t))==null||t.finish()}async addEditToolbar(){return this._editToolbar||o(this,ta)?this._editToolbar:(this._editToolbar=new Zu(this),this.div.append(this._editToolbar.render()),o(this,$t)&&await this._editToolbar.addAltText(o(this,$t)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=o(this,$t))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,$t)||(Tc.initialize(vt._l10n),v(this,$t,new Tc(this)),o(this,Kn)&&(o(this,$t).data=o(this,Kn),v(this,Kn,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=o(this,$t))==null?void 0:t.data}set altTextData(t){o(this,$t)&&(o(this,$t).data=t)}get guessedAltText(){var t;return(t=o(this,$t))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=o(this,$t))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=o(this,$t))==null?void 0:e.serialize(t)}hasAltText(){return!!o(this,$t)&&!o(this,$t).isEmpty()}hasAltTextData(){var t;return((t=o(this,$t))==null?void 0:t.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=o(this,xo)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),x(this,at,fd).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),_c(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,ea)||v(this,ea,new Ec({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:x(this,at,Np).bind(this),onPinching:x(this,at,Fp).bind(this),onPinchEnd:x(this,at,Op).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(t){const{isMac:e}=es.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(v(this,Jn,!0),this._isDraggable){x(this,at,zp).call(this,t);return}x(this,at,dd).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,Mi)&&clearTimeout(o(this,Mi)),v(this,Mi,setTimeout(()=>{var t;v(this,Mi,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const i=this.parentScale,[r,n]=this.pageDimensions,[l,h]=this.pageTranslation,c=t/i,u=e/i,d=this.x*r,p=this.y*n,g=this.width*r,b=this.height*n;switch(s){case 0:return[d+c+l,n-p-u-b+h,d+c+g+l,n-p-u+h];case 90:return[d+u+l,n-p+c+h,d+u+b+l,n-p+c+g+h];case 180:return[d-c-g+l,n-p+u+h,d-c+l,n-p+u+b+h];case 270:return[d-u-b+l,n-p-c-g+h,d-u+l,n-p-c+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,i,r,n]=t,l=r-s,h=n-i;switch(this.rotation){case 0:return[s,e-n,l,h];case 90:return[s,e-i,h,l];case 180:return[r,e-i,l,h];case 270:return[r,e-n,h,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){v(this,ta,!0)}disableEditMode(){v(this,ta,!1)}isInEditMode(){return o(this,ta)}shouldGetKeyboardEvents(){return o(this,ar)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:n}=window;return e<n&&i>0&&t<r&&s>0}rebuild(){x(this,at,fd).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){zt("An editor must be serializable")}static async deserialize(t,e,s){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});i.rotation=t.rotation,v(i,Kn,t.accessibilityData);const[r,n]=i.pageDimensions,[l,h,c,u]=i.getRectInCurrentCoords(t.rect,n);return i.x=l/r,i.y=h/n,i.width=c/r,i.height=u/n,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=o(this,Qr))==null||t.abort(),v(this,Qr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,Mi)&&(clearTimeout(o(this,Mi)),v(this,Mi,null)),x(this,at,M0).call(this),this.removeEditToolbar(),o(this,Hs)){for(const s of o(this,Hs).values())clearTimeout(s);v(this,Hs,null)}this.parent=null,(e=o(this,ea))==null||e.destroy(),v(this,ea,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,at,Ip).call(this),o(this,Ie).classList.remove("hidden"),_c(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),v(this,nr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=o(this,Ie).children;if(!o(this,ri)){v(this,ri,Array.from(e));const n=x(this,at,Bp).bind(this),l=x(this,at,Hp).bind(this),h=this._uiManager._signal;for(const c of o(this,ri)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",n,{signal:h}),c.addEventListener("blur",l,{signal:h}),c.addEventListener("focus",x(this,at,qp).bind(this,u),{signal:h}),c.setAttribute("data-l10n-id",vt._l10nResizer[u])}}const s=o(this,ri)[0];let i=0;for(const n of e){if(n===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(o(this,ri).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)o(this,Ie).append(o(this,Ie).firstChild);else if(r>i)for(let l=0;l<r-i;l++)o(this,Ie).firstChild.before(o(this,Ie).lastChild);let n=0;for(const l of e){const c=o(this,ri)[n++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",vt._l10nResizer[c])}}x(this,at,pd).call(this,0),v(this,ar,!0),o(this,Ie).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){o(this,ar)&&x(this,at,ud).call(this,o(this,yl),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){x(this,at,M0).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=o(this,$t))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,i,r;(t=o(this,Ie))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=o(this,$t))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return o(this,wl)}set isEditing(t){v(this,wl,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){v(this,Zn,!0);const s=t/e,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){o(this,Hs)||v(this,Hs,new Map);const{action:s}=t;let i=o(this,Hs).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),o(this,Hs).delete(s),o(this,Hs).size===0&&v(this,Hs,null)},vt._telemetryTimeout),o(this,Hs).set(s,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),v(this,xo,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,xo,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Kn=new WeakMap,ri=new WeakMap,$t=new WeakMap,xo=new WeakMap,Zr=new WeakMap,bl=new WeakMap,Zn=new WeakMap,Ie=new WeakMap,Qn=new WeakMap,nr=new WeakMap,Qr=new WeakMap,yl=new WeakMap,Jn=new WeakMap,ys=new WeakMap,wl=new WeakMap,ta=new WeakMap,ar=new WeakMap,Mi=new WeakMap,So=new WeakMap,ko=new WeakMap,Hs=new WeakMap,ea=new WeakMap,Al=new WeakMap,Gc=new WeakMap,at=new WeakSet,ld=function([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},xl=new WeakSet,hd=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Jh=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},Ip=function(){if(o(this,Ie))return;v(this,Ie,document.createElement("div")),o(this,Ie).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const i=document.createElement("div");o(this,Ie).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",x(this,at,Lp).bind(this,s),{signal:e}),i.addEventListener("contextmenu",mi,{signal:e}),i.tabIndex=-1}this.div.prepend(o(this,Ie))},Lp=function(t,e){var u;e.preventDefault();const{isMac:s}=es.platform;if(e.button!==0||e.ctrlKey&&s)return;(u=o(this,$t))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,v(this,Qn,[e.screenX,e.screenY]);const r=new AbortController,n=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,at,ud).bind(this,t),{passive:!0,capture:!0,signal:n}),window.addEventListener("touchmove",Ps,{passive:!1,signal:n}),window.addEventListener("contextmenu",mi,{signal:n}),v(this,nr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const c=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=o(this,$t))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=h,x(this,at,tc).call(this)};window.addEventListener("pointerup",c,{signal:n}),window.addEventListener("blur",c,{signal:n})},cd=function(t,e,s,i){this.width=s,this.height=i,this.x=t,this.y=e;const[r,n]=this.parentDimensions;this.setDims(r*s,n*i),this.fixAndSetPosition(),this._onResized()},tc=function(){if(!o(this,nr))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:i}=o(this,nr);v(this,nr,null);const r=this.x,n=this.y,l=this.width,h=this.height;r===t&&n===e&&l===s&&h===i||this.addCommands({cmd:x(this,at,cd).bind(this,r,n,l,h),undo:x(this,at,cd).bind(this,t,e,s,i),mustExec:!0})},ud=function(t,e){const[s,i]=this.parentDimensions,r=this.x,n=this.y,l=this.width,h=this.height,c=vt.MIN_SIZE/s,u=vt.MIN_SIZE/i,d=x(this,at,Jh).call(this,this.rotation),p=(U,J)=>[d[0]*U+d[2]*J,d[1]*U+d[3]*J],g=x(this,at,Jh).call(this,360-this.rotation),b=(U,J)=>[g[0]*U+g[2]*J,g[1]*U+g[3]*J];let A,_,k=!1,C=!1;switch(t){case"topLeft":k=!0,A=(U,J)=>[0,0],_=(U,J)=>[U,J];break;case"topMiddle":A=(U,J)=>[U/2,0],_=(U,J)=>[U/2,J];break;case"topRight":k=!0,A=(U,J)=>[U,0],_=(U,J)=>[0,J];break;case"middleRight":C=!0,A=(U,J)=>[U,J/2],_=(U,J)=>[0,J/2];break;case"bottomRight":k=!0,A=(U,J)=>[U,J],_=(U,J)=>[0,0];break;case"bottomMiddle":A=(U,J)=>[U/2,J],_=(U,J)=>[U/2,0];break;case"bottomLeft":k=!0,A=(U,J)=>[0,J],_=(U,J)=>[U,0];break;case"middleLeft":C=!0,A=(U,J)=>[0,J/2],_=(U,J)=>[U,J/2];break}const R=A(l,h),P=_(l,h);let I=p(...P);const N=vt._round(r+I[0]),L=vt._round(n+I[1]);let z=1,q=1,st,X;if(e.fromKeyboard)({deltaX:st,deltaY:X}=e);else{const{screenX:U,screenY:J}=e,[Yt,Me]=o(this,Qn);[st,X]=this.screenToPageTranslation(U-Yt,J-Me),o(this,Qn)[0]=U,o(this,Qn)[1]=J}if([st,X]=b(st/s,X/i),k){const U=Math.hypot(l,h);z=q=Math.max(Math.min(Math.hypot(P[0]-R[0]-st,P[1]-R[1]-X)/U,1/l,1/h),c/l,u/h)}else C?z=Math.max(c,Math.min(1,Math.abs(P[0]-R[0]-st)))/l:q=Math.max(u,Math.min(1,Math.abs(P[1]-R[1]-X)))/h;const ot=vt._round(l*z),Et=vt._round(h*q);I=p(..._(ot,Et));const ct=N-I[0],Rt=L-I[1];o(this,ys)||v(this,ys,[this.x,this.y,this.width,this.height]),this.width=ot,this.height=Et,this.x=ct,this.y=Rt,this.setDims(s*ot,i*Et),this.fixAndSetPosition(),this._onResizing()},Np=function(){var t;v(this,nr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=o(this,$t))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},Fp=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const n=x(this,at,Jh).call(this,this.rotation),l=(N,L)=>[n[0]*N+n[2]*L,n[1]*N+n[3]*L],[h,c]=this.parentDimensions,u=this.x,d=this.y,p=this.width,g=this.height,b=vt.MIN_SIZE/h,A=vt.MIN_SIZE/c;r=Math.max(Math.min(r,1/p,1/g),b/p,A/g);const _=vt._round(p*r),k=vt._round(g*r);if(_===p&&k===g)return;o(this,ys)||v(this,ys,[u,d,p,g]);const C=l(p/2,g/2),R=vt._round(u+C[0]),P=vt._round(d+C[1]),I=l(_/2,k/2);this.x=R-I[0],this.y=P-I[1],this.width=_,this.height=k,this.setDims(h*_,c*k),this.fixAndSetPosition(),this._onResizing()},Op=function(){var t;(t=o(this,$t))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),x(this,at,tc).call(this)},dd=function(t){const{isMac:e}=es.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},zp=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),n={capture:!0,passive:!1,signal:r},l=c=>{i.abort(),v(this,Zr,null),v(this,Jn,!1),this._uiManager.endDragSession()||x(this,at,dd).call(this,c),s&&this._onStopDragging()};e&&(v(this,So,t.clientX),v(this,ko,t.clientY),v(this,Zr,t.pointerId),v(this,bl,t.pointerType),window.addEventListener("pointermove",c=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:d,pointerId:p}=c;if(p!==o(this,Zr)){Ps(c);return}const[g,b]=this.screenToPageTranslation(u-o(this,So),d-o(this,ko));v(this,So,u),v(this,ko,d),this._uiManager.dragSelectedEditors(g,b)},n),window.addEventListener("touchmove",Ps,n),window.addEventListener("pointerdown",c=>{c.pointerType===o(this,bl)&&(o(this,ea)||c.isPrimary)&&l(c),Ps(c)},n));const h=c=>{if(!o(this,Zr)||o(this,Zr)===c.pointerId){l(c);return}Ps(c)};window.addEventListener("pointerup",h,{signal:r}),window.addEventListener("blur",h,{signal:r})},fd=function(){if(o(this,Qr)||!this.div)return;v(this,Qr,new AbortController);const t=this._uiManager.combinedSignal(o(this,Qr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Bp=function(t){vt._resizerKeyboardManager.exec(this,t)},Hp=function(t){var e;o(this,ar)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==o(this,Ie)&&x(this,at,M0).call(this)},qp=function(t){v(this,yl,o(this,ar)?t:"")},pd=function(t){if(o(this,ri))for(const e of o(this,ri))e.tabIndex=t},M0=function(){v(this,ar,!1),x(this,at,pd).call(this,-1),x(this,at,tc).call(this)},w(vt,xl),nt(vt,"_l10n",null),nt(vt,"_l10nResizer",null),nt(vt,"_borderLineWidth",-1),nt(vt,"_colorManager",new td),nt(vt,"_zIndex",1),nt(vt,"_telemetryTimeout",1e3);let ee=vt;class jg extends ee{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ff=3285377520,Os=4294901760,yi=65535;class Gp{constructor(t){this.h1=t?t&4294967295:ff,this.h2=t?t&4294967295:ff}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let A=0,_=t.length;A<_;A++){const k=t.charCodeAt(A);k<=255?e[s++]=k:(e[s++]=k>>>8,e[s++]=k&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,n=new Uint32Array(e.buffer,0,i);let l=0,h=0,c=this.h1,u=this.h2;const d=3432918353,p=461845907,g=d&yi,b=p&yi;for(let A=0;A<i;A++)A&1?(l=n[A],l=l*d&Os|l*g&yi,l=l<<15|l>>>17,l=l*p&Os|l*b&yi,c^=l,c=c<<13|c>>>19,c=c*5+3864292196):(h=n[A],h=h*d&Os|h*g&yi,h=h<<15|h>>>17,h=h*p&Os|h*b&yi,u^=h,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,r){case 3:l^=e[i*4+2]<<16;case 2:l^=e[i*4+1]<<8;case 1:l^=e[i*4],l=l*d&Os|l*g&yi,l=l<<15|l>>>17,l=l*p&Os|l*b&yi,i&1?c^=l:u^=l}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Os|t*36045&yi,e=e*4283543511&Os|((e<<16|t>>>16)*2950163797&Os)>>>16,t^=e>>>1,t=t*444984403&Os|t*60499&yi,e=e*3301882366&Os|((e<<16|t>>>16)*3120437893&Os)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const md=Object.freeze({map:null,hash:"",transfer:void 0});var sa,ia,_e,$c,$p;class x1{constructor(){w(this,$c);w(this,sa,!1);w(this,ia,null);w(this,_e,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=o(this,_e).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return o(this,_e).get(t)}remove(t){if(o(this,_e).delete(t),o(this,_e).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of o(this,_e).values())if(e instanceof ee)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=o(this,_e).get(t);let i=!1;if(s!==void 0)for(const[r,n]of Object.entries(e))s[r]!==n&&(i=!0,s[r]=n);else i=!0,o(this,_e).set(t,e);i&&x(this,$c,$p).call(this),e instanceof ee&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return o(this,_e).has(t)}getAll(){return o(this,_e).size>0?g1(o(this,_e)):null}setAll(t){for(const[e,s]of Object.entries(t))this.setValue(e,s)}get size(){return o(this,_e).size}resetModified(){o(this,sa)&&(v(this,sa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Vp(this)}get serializable(){if(o(this,_e).size===0)return md;const t=new Map,e=new Gp,s=[],i=Object.create(null);let r=!1;for(const[n,l]of o(this,_e)){const h=l instanceof ee?l.serialize(!1,i):l;h&&(t.set(n,h),e.update(`${n}:${JSON.stringify(h)}`),r||(r=!!h.bitmap))}if(r)for(const n of t.values())n.bitmap&&s.push(n.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:md}get editorStats(){let t=null;const e=new Map;for(const s of o(this,_e).values()){if(!(s instanceof ee))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const n=t[r]||(t[r]=new Map);for(const[l,h]of Object.entries(i)){if(l==="type")continue;let c=n.get(l);c||(c=new Map,n.set(l,c));const u=c.get(h)??0;c.set(h,u+1)}}for(const[s,i]of e)t[s]=i.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){v(this,ia,null)}get modifiedIds(){if(o(this,ia))return o(this,ia);const t=[];for(const e of o(this,_e).values())!(e instanceof ee)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return v(this,ia,{ids:new Set(t),hash:t.join(",")})}}sa=new WeakMap,ia=new WeakMap,_e=new WeakMap,$c=new WeakSet,$p=function(){o(this,sa)||(v(this,sa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Sl;class Vp extends x1{constructor(e){super();w(this,Sl);const{map:s,hash:i,transfer:r}=e.serializable,n=structuredClone(s,r?{transfer:r}:null);v(this,Sl,{map:n,hash:i,transfer:r})}get print(){zt("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,Sl)}get modifiedIds(){return yt(this,"modifiedIds",{ids:new Set,hash:""})}}Sl=new WeakMap;var _o;class Xg{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,_o,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),o(this,_o).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||o(this,_o).has(t.loadedName))){if(de(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=t,n=new FontFace(s,i,r);this.addNativeFontFace(n);try{await n.load(),o(this,_o).add(s),e==null||e(t)}catch{pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(n)}return}zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw pt(`Failed to load font '${s.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return yt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(We||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),yt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(de(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:e,callback:t};return s.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return yt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(P,I){return P.charCodeAt(I)<<24|P.charCodeAt(I+1)<<16|P.charCodeAt(I+2)<<8|P.charCodeAt(I+3)&255}function i(P,I,N,L){const z=P.substring(0,I),q=P.substring(I+N);return z+L+q}let r,n;const l=this._document.createElement("canvas");l.width=1,l.height=1;const h=l.getContext("2d");let c=0;function u(P,I){if(++c>30){pt("Load test font never loaded."),I();return}if(h.font="30px "+P,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(u.bind(null,P,I))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=i(p,976,d.length,d);const b=16,A=1482184792;let _=s(p,b);for(r=0,n=d.length-3;r<n;r+=4)_=_-A+s(d,r)|0;r<d.length&&(_=_-A+s(d+"XXX",r)|0),p=i(p,b,4,Ig(_));const k=`url(data:font/opentype;base64,${btoa(p)});`,C=`@font-face {font-family:"${d}";src:${k}}`;this.insertRule(C);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const P of[t.loadedName,d]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=P,R.append(I)}this._document.body.append(R),u(d,()=>{R.remove(),e.complete()})}}_o=new WeakMap;class Yg{constructor(t,{disableFontFace:e=!1,fontExtraProperties:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this.fontExtraProperties=s===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Bg(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let i;try{i=t.get(s)}catch(n){pt(`getPathGenerator - ignoring character: "${n}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}const Ih={DATA:1,ERROR:2},ue={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function pf(){}function ls(a){if(a instanceof wn||a instanceof Xu||a instanceof W0||a instanceof cf||a instanceof kc||a instanceof Tu)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new wn(a.message);case"InvalidPDFException":return new Xu(a.message);case"MissingPDFException":return new W0(a.message);case"PasswordException":return new cf(a.message,a.code);case"UnexpectedResponseException":return new kc(a.message,a.status);case"UnknownErrorException":return new Tu(a.message,a.details)}return new Tu(a.message,a.toString())}var To,Xs,Up,Wp,jp,ec;class R0{constructor(t,e,s){w(this,Xs);w(this,To,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",x(this,Xs,Up).bind(this),{signal:o(this,To).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(n){r.reject(n)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,n=this.sourceName,l=this.targetName,h=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:n,targetName:l,action:t,streamId:r,data:e,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,h.postMessage({sourceName:n,targetName:l,stream:ue.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{de(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:n,targetName:l,stream:ue.CANCEL,streamId:r,reason:ls(c)}),u.promise}},s)}destroy(){var t;(t=o(this,To))==null||t.abort(),v(this,To,null)}}To=new WeakMap,Xs=new WeakSet,Up=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){x(this,Xs,jp).call(this,t);return}if(t.callback){const s=t.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Ih.DATA)i.resolve(t.data);else if(t.callback===Ih.ERROR)i.reject(ls(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(n){r.postMessage({sourceName:s,targetName:i,callback:Ih.DATA,callbackId:t.callbackId,data:n})},function(n){r.postMessage({sourceName:s,targetName:i,callback:Ih.ERROR,callbackId:t.callbackId,reason:ls(n)})});return}if(t.streamId){x(this,Xs,Wp).call(this,t);return}e(t.data)},Wp=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,n=this,l=this.actionHandler[t.action],h={enqueue(c,u=1,d){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:ue.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:ue.CLOSE,streamId:e}),delete n.streamSinks[e])},error(c){de(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:ue.ERROR,streamId:e,reason:ls(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(l,t.data,h).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ue.START_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:ue.START_COMPLETE,streamId:e,reason:ls(c)})})},jp=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,n=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case ue.START_COMPLETE:t.success?n.startCall.resolve():n.startCall.reject(ls(t.reason));break;case ue.PULL_COMPLETE:t.success?n.pullCall.resolve():n.pullCall.reject(ls(t.reason));break;case ue.PULL:if(!l){r.postMessage({sourceName:s,targetName:i,stream:ue.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||pf).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ue.PULL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:ue.PULL_COMPLETE,streamId:e,reason:ls(c)})});break;case ue.ENQUEUE:if(de(n,"enqueue should have stream controller"),n.isClosed)break;n.controller.enqueue(t.chunk);break;case ue.CLOSE:if(de(n,"close should have stream controller"),n.isClosed)break;n.isClosed=!0,n.controller.close(),x(this,Xs,ec).call(this,n,e);break;case ue.ERROR:de(n,"error should have stream controller"),n.controller.error(ls(t.reason)),x(this,Xs,ec).call(this,n,e);break;case ue.CANCEL_COMPLETE:t.success?n.cancelCall.resolve():n.cancelCall.reject(ls(t.reason)),x(this,Xs,ec).call(this,n,e);break;case ue.CANCEL:if(!l)break;const h=ls(t.reason);Promise.try(l.onCancel||pf,h).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ue.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:ue.CANCEL_COMPLETE,streamId:e,reason:ls(c)})}),l.sinkCapability.reject(h),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},ec=async function(t,e){var s,i,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var kl;class Xp{constructor({enableHWA:t=!1}){w(this,kl,!1);v(this,kl,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!o(this,kl)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){zt("Abstract method `_createCanvas` called.")}}kl=new WeakMap;class Kg extends Xp{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class Yp{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class Kp extends Yp{async _fetch(t){const e=await au(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):nu(e)}}class Zp{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,i,r){return"none"}destroy(t=!1){}}var ra,Eo,or,lr,Ge,na,aa,Y,Be,P0,Qa,sc,Ja,Qp,gd,to,D0,I0,vd,L0;class Zg extends Zp{constructor({docId:e,ownerDocument:s=globalThis.document}){super();w(this,Y);w(this,ra);w(this,Eo);w(this,or);w(this,lr);w(this,Ge);w(this,na);w(this,aa,0);v(this,lr,e),v(this,Ge,s)}addFilter(e){if(!e)return"none";let s=o(this,Y,Be).get(e);if(s)return s;const[i,r,n]=x(this,Y,sc).call(this,e),l=e.length===1?i:`${i}${r}${n}`;if(s=o(this,Y,Be).get(l),s)return o(this,Y,Be).set(e,s),s;const h=`g_${o(this,lr)}_transfer_map_${je(this,aa)._++}`,c=x(this,Y,Ja).call(this,h);o(this,Y,Be).set(e,c),o(this,Y,Be).set(l,c);const u=x(this,Y,to).call(this,h);return x(this,Y,I0).call(this,i,r,n,u),c}addHCMFilter(e,s){var b;const i=`${e}-${s}`,r="base";let n=o(this,Y,P0).get(r);if((n==null?void 0:n.key)===i||(n?((b=n.filter)==null||b.remove(),n.key=i,n.url="none",n.filter=null):(n={key:i,url:"none",filter:null},o(this,Y,P0).set(r,n)),!e||!s))return n.url;const l=x(this,Y,L0).call(this,e);e=et.makeHexColor(...l);const h=x(this,Y,L0).call(this,s);if(s=et.makeHexColor(...h),o(this,Y,Qa).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return n.url;const c=new Array(256);for(let A=0;A<=255;A++){const _=A/255;c[A]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const u=c.join(","),d=`g_${o(this,lr)}_hcm_filter`,p=n.filter=x(this,Y,to).call(this,d);x(this,Y,I0).call(this,u,u,u,p),x(this,Y,gd).call(this,p);const g=(A,_)=>{const k=l[A]/255,C=h[A]/255,R=new Array(_+1);for(let P=0;P<=_;P++)R[P]=k+P/_*(C-k);return R.join(",")};return x(this,Y,I0).call(this,g(0,5),g(1,5),g(2,5),p),n.url=x(this,Y,Ja).call(this,d),n.url}addAlphaFilter(e){let s=o(this,Y,Be).get(e);if(s)return s;const[i]=x(this,Y,sc).call(this,[e]),r=`alpha_${i}`;if(s=o(this,Y,Be).get(r),s)return o(this,Y,Be).set(e,s),s;const n=`g_${o(this,lr)}_alpha_map_${je(this,aa)._++}`,l=x(this,Y,Ja).call(this,n);o(this,Y,Be).set(e,l),o(this,Y,Be).set(r,l);const h=x(this,Y,to).call(this,n);return x(this,Y,vd).call(this,i,h),l}addLuminosityFilter(e){let s=o(this,Y,Be).get(e||"luminosity");if(s)return s;let i,r;if(e?([i]=x(this,Y,sc).call(this,[e]),r=`luminosity_${i}`):r="luminosity",s=o(this,Y,Be).get(r),s)return o(this,Y,Be).set(e,s),s;const n=`g_${o(this,lr)}_luminosity_map_${je(this,aa)._++}`,l=x(this,Y,Ja).call(this,n);o(this,Y,Be).set(e,l),o(this,Y,Be).set(r,l);const h=x(this,Y,to).call(this,n);return x(this,Y,Qp).call(this,h),e&&x(this,Y,vd).call(this,i,h),l}addHighlightHCMFilter(e,s,i,r,n){var C;const l=`${s}-${i}-${r}-${n}`;let h=o(this,Y,P0).get(e);if((h==null?void 0:h.key)===l||(h?((C=h.filter)==null||C.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},o(this,Y,P0).set(e,h)),!s||!i))return h.url;const[c,u]=[s,i].map(x(this,Y,L0).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,b]=[r,n].map(x(this,Y,L0).bind(this));p<d&&([d,p,g,b]=[p,d,b,g]),o(this,Y,Qa).style.color="";const A=(R,P,I)=>{const N=new Array(256),L=(p-d)/I,z=R/255,q=(P-R)/(255*I);let st=0;for(let X=0;X<=I;X++){const ot=Math.round(d+X*L),Et=z+X*q;for(let ct=st;ct<=ot;ct++)N[ct]=Et;st=ot+1}for(let X=st;X<256;X++)N[X]=N[st-1];return N.join(",")},_=`g_${o(this,lr)}_hcm_${e}_filter`,k=h.filter=x(this,Y,to).call(this,_);return x(this,Y,gd).call(this,k),x(this,Y,I0).call(this,A(g[0],b[0],5),A(g[1],b[1],5),A(g[2],b[2],5),k),h.url=x(this,Y,Ja).call(this,_),h.url}destroy(e=!1){var s,i,r,n;e&&((s=o(this,na))!=null&&s.size)||((i=o(this,or))==null||i.parentNode.parentNode.remove(),v(this,or,null),(r=o(this,Eo))==null||r.clear(),v(this,Eo,null),(n=o(this,na))==null||n.clear(),v(this,na,null),v(this,aa,0))}}ra=new WeakMap,Eo=new WeakMap,or=new WeakMap,lr=new WeakMap,Ge=new WeakMap,na=new WeakMap,aa=new WeakMap,Y=new WeakSet,Be=function(){return o(this,Eo)||v(this,Eo,new Map)},P0=function(){return o(this,na)||v(this,na,new Map)},Qa=function(){if(!o(this,or)){const e=o(this,Ge).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=o(this,Ge).createElementNS(Xi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),v(this,or,o(this,Ge).createElementNS(Xi,"defs")),e.append(i),i.append(o(this,or)),o(this,Ge).body.append(e)}return o(this,or)},sc=function(e){if(e.length===1){const c=e[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=c[p]/255;const d=u.join(",");return[d,d,d]}const[s,i,r]=e,n=new Array(256),l=new Array(256),h=new Array(256);for(let c=0;c<256;c++)n[c]=s[c]/255,l[c]=i[c]/255,h[c]=r[c]/255;return[n.join(","),l.join(","),h.join(",")]},Ja=function(e){if(o(this,ra)===void 0){v(this,ra,"");const s=o(this,Ge).URL;s!==o(this,Ge).baseURI&&(ou(s)?pt('#createUrl: ignore "data:"-URL for performance reasons.'):v(this,ra,s.split("#",1)[0]))}return`url(${o(this,ra)}#${e})`},Qp=function(e){const s=o(this,Ge).createElementNS(Xi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},gd=function(e){const s=o(this,Ge).createElementNS(Xi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},to=function(e){const s=o(this,Ge).createElementNS(Xi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),o(this,Y,Qa).append(s),s},D0=function(e,s,i){const r=o(this,Ge).createElementNS(Xi,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},I0=function(e,s,i,r){const n=o(this,Ge).createElementNS(Xi,"feComponentTransfer");r.append(n),x(this,Y,D0).call(this,n,"feFuncR",e),x(this,Y,D0).call(this,n,"feFuncG",s),x(this,Y,D0).call(this,n,"feFuncB",i)},vd=function(e,s){const i=o(this,Ge).createElementNS(Xi,"feComponentTransfer");s.append(i),x(this,Y,D0).call(this,i,"feFuncA",e)},L0=function(e){return o(this,Y,Qa).style.color=e,A1(getComputedStyle(o(this,Y,Qa)).getPropertyValue("color"))};class Jp{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class tm extends Jp{async _fetch(t){const e=await au(t,"arraybuffer");return new Uint8Array(e)}}We&&pt("Please use the `legacy` build in Node.js environments.");async function em(a){const e=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(e)}class Qg extends Zp{}class Jg extends Xp{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class t2 extends Yp{async _fetch(t){return em(t)}}class e2 extends Jp{async _fetch(t){return em(t)}}const Ue={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function bd(a,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,s),a.clip(i)}class S1{getPattern(){zt("Abstract method `getPattern` called.")}}class s2 extends S1{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,i){let r;if(i===Ue.STROKE||i===Ue.FILL){const n=e.current.getClippedPathBoundingBox(i,Wt(t))||[0,0,0,0],l=Math.ceil(n[2]-n[0])||1,h=Math.ceil(n[3]-n[1])||1,c=e.cachedCanvases.getCanvas("pattern",l,h),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-n[0],-n[1]),s=et.transform(s,[1,0,0,1,n[0],n[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),bd(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else bd(t,this._bbox),r=this._createGradient(t);return r}}function Mu(a,t,e,s,i,r,n,l){const h=t.coords,c=t.colors,u=a.data,d=a.width*4;let p;h[e+1]>h[s+1]&&(p=e,e=s,s=p,p=r,r=n,n=p),h[s+1]>h[i+1]&&(p=s,s=i,i=p,p=n,n=l,l=p),h[e+1]>h[s+1]&&(p=e,e=s,s=p,p=r,r=n,n=p);const g=(h[e]+t.offsetX)*t.scaleX,b=(h[e+1]+t.offsetY)*t.scaleY,A=(h[s]+t.offsetX)*t.scaleX,_=(h[s+1]+t.offsetY)*t.scaleY,k=(h[i]+t.offsetX)*t.scaleX,C=(h[i+1]+t.offsetY)*t.scaleY;if(b>=C)return;const R=c[r],P=c[r+1],I=c[r+2],N=c[n],L=c[n+1],z=c[n+2],q=c[l],st=c[l+1],X=c[l+2],ot=Math.round(b),Et=Math.round(C);let ct,Rt,U,J,Yt,Me,ce,Kt;for(let Ct=ot;Ct<=Et;Ct++){if(Ct<_){const At=Ct<b?0:(b-Ct)/(b-_);ct=g-(g-A)*At,Rt=R-(R-N)*At,U=P-(P-L)*At,J=I-(I-z)*At}else{let At;Ct>C?At=1:_===C?At=0:At=(_-Ct)/(_-C),ct=A-(A-k)*At,Rt=N-(N-q)*At,U=L-(L-st)*At,J=z-(z-X)*At}let Ft;Ct<b?Ft=0:Ct>C?Ft=1:Ft=(b-Ct)/(b-C),Yt=g-(g-k)*Ft,Me=R-(R-q)*Ft,ce=P-(P-st)*Ft,Kt=I-(I-X)*Ft;const Fs=Math.round(Math.min(ct,Yt)),ns=Math.round(Math.max(ct,Yt));let me=d*Ct+Fs*4;for(let At=Fs;At<=ns;At++)Ft=(ct-At)/(ct-Yt),Ft<0?Ft=0:Ft>1&&(Ft=1),u[me++]=Rt-(Rt-Me)*Ft|0,u[me++]=U-(U-ce)*Ft|0,u[me++]=J-(J-Kt)*Ft|0,u[me++]=255}}function i2(a,t,e){const s=t.coords,i=t.colors;let r,n;switch(t.type){case"lattice":const l=t.verticesPerRow,h=Math.floor(s.length/l)-1,c=l-1;for(r=0;r<h;r++){let u=r*l;for(let d=0;d<c;d++,u++)Mu(a,e,s[u],s[u+1],s[u+l],i[u],i[u+1],i[u+l]),Mu(a,e,s[u+l+1],s[u+1],s[u+l],i[u+l+1],i[u+1],i[u+l])}break;case"triangles":for(r=0,n=s.length;r<n;r+=3)Mu(a,e,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class r2 extends S1{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,s){const l=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-h,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),g=c/d,b=u/p,A={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-h,scaleX:1/g,scaleY:1/b},_=d+4,k=p+4,C=s.getCanvas("mesh",_,k),R=C.context,P=R.createImageData(d,p);if(e){const N=P.data;for(let L=0,z=N.length;L<z;L+=4)N[L]=e[0],N[L+1]=e[1],N[L+2]=e[2],N[L+3]=255}for(const N of this._figures)i2(P,N,A);return R.putImageData(P,2,2),{canvas:C.canvas,offsetX:l-2*g,offsetY:h-2*b,scaleX:g,scaleY:b}}getPattern(t,e,s,i){bd(t,this._bbox);let r;if(i===Ue.SHADING)r=et.singularValueDecompose2dScale(Wt(t));else if(r=et.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=et.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const n=this._createMeshCanvas(r,i===Ue.SHADING?null:this._background,e.cachedCanvases);return i!==Ue.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(n.offsetX,n.offsetY),t.scale(n.scaleX,n.scaleY),t.createPattern(n.canvas,"no-repeat")}}class n2 extends S1{getPattern(){return"hotpink"}}function a2(a){switch(a[0]){case"RadialAxial":return new s2(a);case"Mesh":return new r2(a);case"Dummy":return new n2}throw new Error(`Unknown IR type: ${a[0]}`)}const mf={COLORED:1,UNCOLORED:2},Vc=class Vc{constructor(t,e,s,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:i,tilingType:r,color:n,canvasGraphicsFactory:l}=this;let{xstep:h,ystep:c}=this;h=Math.abs(h),c=Math.abs(c),ru("TilingType: "+r);const u=e[0],d=e[1],p=e[2],g=e[3],b=p-u,A=g-d,_=et.singularValueDecompose2dScale(this.matrix),k=et.singularValueDecompose2dScale(this.baseTransform),C=_[0]*k[0],R=_[1]*k[1];let P=b,I=A,N=!1,L=!1;const z=Math.ceil(h*C),q=Math.ceil(c*R),st=Math.ceil(b*C),X=Math.ceil(A*R);z>=st?P=h:N=!0,q>=X?I=c:L=!0;const ot=this.getSizeAndScale(P,this.ctx.canvas.width,C),Et=this.getSizeAndScale(I,this.ctx.canvas.height,R),ct=t.cachedCanvases.getCanvas("pattern",ot.size,Et.size),Rt=ct.context,U=l.createCanvasGraphics(Rt);if(U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,i,n),Rt.translate(-ot.scale*u,-Et.scale*d),U.transform(ot.scale,0,0,Et.scale,0,0),Rt.save(),this.clipBbox(U,u,d,p,g),U.baseTransform=Wt(U.ctx),U.executeOperatorList(s),U.endDrawing(),Rt.restore(),N||L){const J=ct.canvas;N&&(P=h),L&&(I=c);const Yt=this.getSizeAndScale(P,this.ctx.canvas.width,C),Me=this.getSizeAndScale(I,this.ctx.canvas.height,R),ce=Yt.size,Kt=Me.size,Ct=t.cachedCanvases.getCanvas("pattern-workaround",ce,Kt),Ft=Ct.context,Fs=N?Math.floor(b/h):0,ns=L?Math.floor(A/c):0;for(let me=0;me<=Fs;me++)for(let At=0;At<=ns;At++)Ft.drawImage(J,ce*me,Kt*At,ce,Kt,0,0,ce,Kt);return{canvas:Ct.canvas,scaleX:Yt.scale,scaleY:Me.scale,offsetX:u,offsetY:d}}return{canvas:ct.canvas,scaleX:ot.scale,scaleY:Et.scale,offsetX:u,offsetY:d}}getSizeAndScale(t,e,s){const i=Math.max(Vc.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=i?r=i:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,i,r){const n=i-e,l=r-s;t.ctx.rect(e,s,n,l),t.current.updateRectMinMax(Wt(t.ctx),[e,s,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case mf.COLORED:const n=this.ctx;i.fillStyle=n.fillStyle,i.strokeStyle=n.strokeStyle,r.fillColor=n.fillStyle,r.strokeColor=n.strokeStyle;break;case mf.UNCOLORED:const l=et.makeHexColor(s[0],s[1],s[2]);i.fillStyle=l,i.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new Dg(`Unsupported paint type: ${e}`)}}getPattern(t,e,s,i){let r=s;i!==Ue.SHADING&&(r=et.transform(r,e.baseTransform),this.matrix&&(r=et.transform(r,this.matrix)));const n=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(n.offsetX,n.offsetY),l=l.scale(1/n.scaleX,1/n.scaleY);const h=t.createPattern(n.canvas,"repeat");return h.setTransform(l),h}};nt(Vc,"MAX_PATTERN_SIZE",3e3);let yd=Vc;function o2({src:a,srcPos:t=0,dest:e,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:n=!1}){const l=es.isLittleEndian?4278190080:255,[h,c]=n?[r,l]:[l,r],u=s>>3,d=s&7,p=a.length;e=new Uint32Array(e.buffer);let g=0;for(let b=0;b<i;b++){for(const _=t+u;t<_;t++){const k=t<p?a[t]:255;e[g++]=k&128?c:h,e[g++]=k&64?c:h,e[g++]=k&32?c:h,e[g++]=k&16?c:h,e[g++]=k&8?c:h,e[g++]=k&4?c:h,e[g++]=k&2?c:h,e[g++]=k&1?c:h}if(d===0)continue;const A=t<p?a[t++]:255;for(let _=0;_<d;_++)e[g++]=A&1<<7-_?c:h}return{srcPos:t,destPos:g}}const gf=16,vf=100,l2=15,bf=10,yf=1e3,ps=16;function h2(a,t){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){t.save(),this.__originalSave()},a.restore=function(){t.restore(),this.__originalRestore()},a.translate=function(s,i){t.translate(s,i),this.__originalTranslate(s,i)},a.scale=function(s,i){t.scale(s,i),this.__originalScale(s,i)},a.transform=function(s,i,r,n,l,h){t.transform(s,i,r,n,l,h),this.__originalTransform(s,i,r,n,l,h)},a.setTransform=function(s,i,r,n,l,h){t.setTransform(s,i,r,n,l,h),this.__originalSetTransform(s,i,r,n,l,h)},a.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},a.rotate=function(s){t.rotate(s),this.__originalRotate(s)},a.clip=function(s){t.clip(s),this.__originalClip(s)},a.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},a.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},a.bezierCurveTo=function(e,s,i,r,n,l){t.bezierCurveTo(e,s,i,r,n,l),this.__originalBezierCurveTo(e,s,i,r,n,l)},a.rect=function(e,s,i,r){t.rect(e,s,i,r),this.__originalRect(e,s,i,r)},a.closePath=function(){t.closePath(),this.__originalClosePath()},a.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class c2{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Lh(a,t,e,s,i,r,n,l,h,c){const[u,d,p,g,b,A]=Wt(a);if(d===0&&p===0){const C=n*u+b,R=Math.round(C),P=l*g+A,I=Math.round(P),N=(n+h)*u+b,L=Math.abs(Math.round(N)-R)||1,z=(l+c)*g+A,q=Math.abs(Math.round(z)-I)||1;return a.setTransform(Math.sign(u),0,0,Math.sign(g),R,I),a.drawImage(t,e,s,i,r,0,0,L,q),a.setTransform(u,d,p,g,b,A),[L,q]}if(u===0&&g===0){const C=l*p+b,R=Math.round(C),P=n*d+A,I=Math.round(P),N=(l+c)*p+b,L=Math.abs(Math.round(N)-R)||1,z=(n+h)*d+A,q=Math.abs(Math.round(z)-I)||1;return a.setTransform(0,Math.sign(d),Math.sign(p),0,R,I),a.drawImage(t,e,s,i,r,0,0,q,L),a.setTransform(u,d,p,g,b,A),[q,L]}a.drawImage(t,e,s,i,r,n,l,h,c);const _=Math.hypot(u,d),k=Math.hypot(p,g);return[_*h,k*c]}function u2(a){const{width:t,height:e}=a;if(t>yf||e>yf)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let n=new Uint8Array(r*(e+1)),l,h,c;const u=t+7&-8;let d=new Uint8Array(u*e),p=0;for(const k of a.data){let C=128;for(;C>0;)d[p++]=k&C?0:255,C>>=1}let g=0;for(p=0,d[p]!==0&&(n[0]=1,++g),h=1;h<t;h++)d[p]!==d[p+1]&&(n[h]=d[p]?2:1,++g),p++;for(d[p]!==0&&(n[h]=2,++g),l=1;l<e;l++){p=l*u,c=l*r,d[p-u]!==d[p]&&(n[c]=d[p]?1:8,++g);let k=(d[p]?4:0)+(d[p-u]?8:0);for(h=1;h<t;h++)k=(k>>2)+(d[p+1]?4:0)+(d[p-u+1]?8:0),i[k]&&(n[c+h]=i[k],++g),p++;if(d[p-u]!==d[p]&&(n[c+h]=d[p]?2:4,++g),g>s)return null}for(p=u*(e-1),c=l*r,d[p]!==0&&(n[c]=8,++g),h=1;h<t;h++)d[p]!==d[p+1]&&(n[c+h]=d[p]?4:8,++g),p++;if(d[p]!==0&&(n[c+h]=4,++g),g>s)return null;const b=new Int32Array([0,r,-1,0,-r,0,0,0,1]),A=new Path2D;for(l=0;g&&l<=e;l++){let k=l*r;const C=k+t;for(;k<C&&!n[k];)k++;if(k===C)continue;A.moveTo(k%r,l);const R=k;let P=n[k];do{const I=b[P];do k+=I;while(!n[k]);const N=n[k];N!==5&&N!==10?(P=N,n[k]=0):(P=N&51*P>>4,n[k]&=P>>2|P<<2),A.lineTo(k%r,k/r|0),n[k]||--g}while(R!==k);--l}return d=null,n=null,function(k){k.save(),k.scale(1/t,-1/e),k.translate(0,-e),k.fill(A),k.beginPath(),k.restore()}}class wf{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=up,this.textMatrixScale=1,this.fontMatrix=ju,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ze.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,s){[e,s]=et.applyTransform([e,s],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){const s=et.applyTransform(e,t),i=et.applyTransform(e.slice(2),t),r=et.applyTransform([e[0],e[3]],t),n=et.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,s[0],i[0],r[0],n[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],n[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],n[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],n[1])}updateScalingPathMinMax(t,e){et.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,i,r,n,l,h,c,u){const d=et.bezierBoundingBox(e,s,i,r,n,l,h,c,u);u||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Ue.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ue.STROKE){e||zt("Stroke bounding box must include transform.");const i=et.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,n=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=n,s[2]+=r,s[3]+=n}return s}updateClipFromPath(){const t=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ue.FILL,e=null){return et.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Af(a,t){if(t instanceof ImageData){a.putImageData(t,0,0);return}const e=t.height,s=t.width,i=e%ps,r=(e-i)/ps,n=i===0?r:r+1,l=a.createImageData(s,ps);let h=0,c;const u=t.data,d=l.data;let p,g,b,A;if(t.kind===Wh.GRAYSCALE_1BPP){const _=u.byteLength,k=new Uint32Array(d.buffer,0,d.byteLength>>2),C=k.length,R=s+7>>3,P=4294967295,I=es.isLittleEndian?4278190080:255;for(p=0;p<n;p++){for(b=p<r?ps:i,c=0,g=0;g<b;g++){const N=_-h;let L=0;const z=N>R?s:N*8-7,q=z&-8;let st=0,X=0;for(;L<q;L+=8)X=u[h++],k[c++]=X&128?P:I,k[c++]=X&64?P:I,k[c++]=X&32?P:I,k[c++]=X&16?P:I,k[c++]=X&8?P:I,k[c++]=X&4?P:I,k[c++]=X&2?P:I,k[c++]=X&1?P:I;for(;L<z;L++)st===0&&(X=u[h++],st=128),k[c++]=X&st?P:I,st>>=1}for(;c<C;)k[c++]=0;a.putImageData(l,0,p*ps)}}else if(t.kind===Wh.RGBA_32BPP){for(g=0,A=s*ps*4,p=0;p<r;p++)d.set(u.subarray(h,h+A)),h+=A,a.putImageData(l,0,g),g+=ps;p<n&&(A=s*i*4,d.set(u.subarray(h,h+A)),a.putImageData(l,0,g))}else if(t.kind===Wh.RGB_24BPP)for(b=ps,A=s*b,p=0;p<n;p++){for(p>=r&&(b=i,A=s*b),c=0,g=A;g--;)d[c++]=u[h++],d[c++]=u[h++],d[c++]=u[h++],d[c++]=255;a.putImageData(l,0,p*ps)}else throw new Error(`bad image kind: ${t.kind}`)}function xf(a,t){if(t.bitmap){a.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,i=e%ps,r=(e-i)/ps,n=i===0?r:r+1,l=a.createImageData(s,ps);let h=0;const c=t.data,u=l.data;for(let d=0;d<n;d++){const p=d<r?ps:i;({srcPos:h}=o2({src:c,srcPos:h,dest:u,width:s,height:p,nonBlackColor:0})),a.putImageData(l,0,d*ps)}}function S0(a,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)a[s]!==void 0&&(t[s]=a[s]);a.setLineDash!==void 0&&(t.setLineDash(a.getLineDash()),t.lineDashOffset=a.lineDashOffset)}function Nh(a){if(a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0),!We){const{filter:t}=a;t!=="none"&&t!==""&&(a.filter="none")}}function Sf(a,t){if(t)return!0;const e=et.singularValueDecompose2dScale(a);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*An.PDF_TO_CSS_UNITS);return e[0]<=s&&e[1]<=s}const d2=["butt","round","square"],f2=["miter","round","bevel"],p2={},kf={};var gi,wd,Ad,xd;const X1=class X1{constructor(t,e,s,i,r,{optionalContentConfig:n,markedContentStack:l=null},h,c){w(this,gi);this.ctx=t,this.current=new wf(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=n,this.cachedCanvases=new c2(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,n=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,n),this.ctx.fillStyle=l,s){const h=this.cachedCanvases.getCanvas("transparent",r,n);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Wt(this.compositeCtx))}this.ctx.save(),Nh(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Wt(this.ctx)}executeOperatorList(t,e,s,i){const r=t.argsArray,n=t.fnArray;let l=e||0;const h=r.length;if(h===l)return l;const c=h-l>bf&&typeof s=="function",u=c?Date.now()+l2:0;let d=0;const p=this.commonObjs,g=this.objs;let b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,s),l;if(b=n[l],b!==ti.dependency)this[b].apply(this,r[l]);else for(const A of r[l]){const _=A.startsWith("g_")?p:g;if(!_.has(A))return _.get(A,s),l}if(l++,l===h)return l;if(c&&++d>bf){if(Date.now()>u)return s(),l;d=0}}}endDrawing(){x(this,gi,wd).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),x(this,gi,Ad).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),n=Math.max(Math.hypot(e[2],e[3]),1),l=s,h=i,c="prescale1",u,d;for(;r>2&&l>1||n>2&&h>1;){let p=l,g=h;r>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/p),n>2&&h>1&&(g=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,n/=h/g),u=this.cachedCanvases.getCanvas(c,p,g),d=u.context,d.clearRect(0,0,p,g),d.drawImage(t,0,0,l,h,0,0,p,g),t=u.canvas,l=p,h=g,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:i}=t,r=this.current.fillColor,n=this.current.patternFill,l=Wt(e);let h,c,u,d;if((t.bitmap||t.data)&&t.count>1){const z=t.bitmap||t.data.buffer;c=JSON.stringify(n?l:[l.slice(0,4),r]),h=this._cachedBitmapsMap.get(z),h||(h=new Map,this._cachedBitmapsMap.set(z,h));const q=h.get(c);if(q&&!n){const st=Math.round(Math.min(l[0],l[2])+l[4]),X=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:q,offsetX:st,offsetY:X}}u=q}u||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),xf(d.context,t));let p=et.transform(l,[1/s,0,0,-1/i,0,0]);p=et.transform(p,[1,0,0,1,0,-i]);const[g,b,A,_]=et.getAxialAlignedBoundingBox([0,0,s,i],p),k=Math.round(A-g)||1,C=Math.round(_-b)||1,R=this.cachedCanvases.getCanvas("fillCanvas",k,C),P=R.context,I=g,N=b;P.translate(-I,-N),P.transform(...p),u||(u=this._scaleImage(d.canvas,bi(P)),u=u.img,h&&n&&h.set(c,u)),P.imageSmoothingEnabled=Sf(Wt(P),t.interpolate),Lh(P,u,0,0,u.width,u.height,0,0,s,i),P.globalCompositeOperation="source-in";const L=et.transform(bi(P),[1,0,0,1,-I,-N]);return P.fillStyle=n?r.getPattern(e,this,L,Ue.FILL):r,P.fillRect(0,0,s,i),h&&!n&&(this.cachedCanvases.delete("fillCanvas"),h.set(c,R.canvas)),{canvas:R.canvas,offsetX:Math.round(I),offsetY:Math.round(N)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=d2[t]}setLineJoin(t){this.ctx.lineJoin=f2[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Wt(this.suspendedCtx)),S0(this.suspendedCtx,r),h2(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),S0(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,i){const r=i[0],n=i[1],l=i[2]-r,h=i[3]-n;l===0||h===0||(this.genericComposeSMask(e.context,s,l,h,e.subtype,e.backdrop,e.transferMap,r,n,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,i,r,n,l,h,c,u,d){let p=t.canvas,g=h-u,b=c-d;if(n){const _=et.makeHexColor(...n);if(g<0||b<0||g+s>p.width||b+i>p.height){const k=this.cachedCanvases.getCanvas("maskExtension",s,i),C=k.context;C.drawImage(p,-g,-b),C.globalCompositeOperation="destination-atop",C.fillStyle=_,C.fillRect(0,0,s,i),C.globalCompositeOperation="source-over",p=k.canvas,g=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(g,b,s,i),t.clip(k),t.globalCompositeOperation="destination-atop",t.fillStyle=_,t.fillRect(g,b,s,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const A=new Path2D;A.rect(h,c,s,i),e.clip(A),e.globalCompositeOperation="destination-in",e.drawImage(p,g,b,s,i,h,c,s,i),e.restore()}save(){this.inSMaskMode?(S0(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),S0(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,s,i,r,n){this.ctx.transform(t,e,s,i,r,n),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){const i=this.ctx,r=this.current;let n=r.x,l=r.y,h,c;const u=Wt(i),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,p=d?s.slice(0):null;for(let g=0,b=0,A=t.length;g<A;g++)switch(t[g]|0){case ti.rectangle:n=e[b++],l=e[b++];const _=e[b++],k=e[b++],C=n+_,R=l+k;i.moveTo(n,l),_===0||k===0?i.lineTo(C,R):(i.lineTo(C,l),i.lineTo(C,R),i.lineTo(n,R)),d||r.updateRectMinMax(u,[n,l,C,R]),i.closePath();break;case ti.moveTo:n=e[b++],l=e[b++],i.moveTo(n,l),d||r.updatePathMinMax(u,n,l);break;case ti.lineTo:n=e[b++],l=e[b++],i.lineTo(n,l),d||r.updatePathMinMax(u,n,l);break;case ti.curveTo:h=n,c=l,n=e[b+4],l=e[b+5],i.bezierCurveTo(e[b],e[b+1],e[b+2],e[b+3],n,l),r.updateCurvePathMinMax(u,h,c,e[b],e[b+1],e[b+2],e[b+3],n,l,p),b+=6;break;case ti.curveTo2:h=n,c=l,i.bezierCurveTo(n,l,e[b],e[b+1],e[b+2],e[b+3]),r.updateCurvePathMinMax(u,h,c,n,l,e[b],e[b+1],e[b+2],e[b+3],p),n=e[b+2],l=e[b+3],b+=4;break;case ti.curveTo3:h=n,c=l,n=e[b+2],l=e[b+3],i.bezierCurveTo(e[b],e[b+1],n,l,n,l),r.updateCurvePathMinMax(u,h,c,e[b],e[b+1],n,l,n,l,p),b+=4;break;case ti.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(u,p),r.setCurrentPoint(n,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(e.save(),e.strokeStyle=s.getPattern(e,this,bi(e),Ue.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=s.getPattern(e,this,bi(e),Ue.FILL),r=!0);const n=this.current.getClippedPathBoundingBox();this.contentVisible&&n!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(n)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=p2}eoClip(){this.pendingClip=kf}beginText(){this.current.textMatrix=up,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const s=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:n,y:l,fontSize:h,path:c}of t)s.addPath(c,new DOMMatrix(r).preMultiplySelf(i).translate(n,l).scale(h,-h));e.clip(s),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||ju,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&pt("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",n=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const h=s.italic?"italic":"normal";let c=e;e<gf?c=gf:e>vf&&(c=vf),this.current.fontSizeScale=e/c,this.ctx.font=`${h} ${l} ${c}px ${n}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,i,r,n){this.current.textMatrix=[t,e,s,i,r,n],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,i,r){const n=this.ctx,l=this.current,h=l.font,c=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,d=c&ze.FILL_STROKE_MASK,p=!!(c&ze.ADD_TO_PATH_FLAG),g=l.patternFill&&!h.missingFile,b=l.patternStroke&&!h.missingFile;let A;if((h.disableFontFace||p||g||b)&&(A=h.getPathGenerator(this.commonObjs,t)),h.disableFontFace||g||b){if(n.save(),n.translate(e,s),n.scale(u,-u),d===ze.FILL||d===ze.FILL_STROKE)if(i){const _=n.getTransform();n.setTransform(...i),n.fill(x(this,gi,xd).call(this,A,_,i))}else n.fill(A);if(d===ze.STROKE||d===ze.FILL_STROKE)if(r){const _=n.getTransform();n.setTransform(...r),n.stroke(x(this,gi,xd).call(this,A,_,r))}else n.lineWidth/=u,n.stroke(A);n.restore()}else(d===ze.FILL||d===ze.FILL_STROKE)&&n.fillText(t,e,s),(d===ze.STROKE||d===ze.FILL_STROKE)&&n.strokeText(t,e,s);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Wt(n),x:e,y:s,fontSize:u,path:A})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){s=!0;break}return yt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,n=e.fontSizeScale,l=e.charSpacing,h=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,d=t.length,p=s.vertical,g=p?1:-1,b=s.defaultVMetrics,A=i*e.fontMatrix[0],_=e.textRenderingMode===ze.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),c>0?r.scale(u,-1):r.scale(u,1);let k,C;if(e.patternFill){r.save();const L=e.fillColor.getPattern(r,this,bi(r),Ue.FILL);k=Wt(r),r.restore(),r.fillStyle=L}if(e.patternStroke){r.save();const L=e.strokeColor.getPattern(r,this,bi(r),Ue.STROKE);C=Wt(r),r.restore(),r.strokeStyle=L}let R=e.lineWidth;const P=e.textMatrixScale;if(P===0||R===0){const L=e.textRenderingMode&ze.FILL_STROKE_MASK;(L===ze.STROKE||L===ze.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=P;if(n!==1&&(r.scale(n,n),R/=n),r.lineWidth=R,s.isInvalidPDFjsFont){const L=[];let z=0;for(const q of t)L.push(q.unicode),z+=q.width;r.fillText(L.join(""),0,0),e.x+=z*A*u,r.restore(),this.compose();return}let I=0,N;for(N=0;N<d;++N){const L=t[N];if(typeof L=="number"){I+=g*L*i/1e3;continue}let z=!1;const q=(L.isSpace?h:0)+l,st=L.fontChar,X=L.accent;let ot,Et,ct=L.width;if(p){const U=L.vmetric||b,J=-(L.vmetric?U[1]:ct*.5)*A,Yt=U[2]*A;ct=U?-U[0]:ct,ot=J/n,Et=(I+Yt)/n}else ot=I/n,Et=0;if(s.remeasure&&ct>0){const U=r.measureText(st).width*1e3/i*n;if(ct<U&&this.isFontSubpixelAAEnabled){const J=ct/U;z=!0,r.save(),r.scale(J,1),ot/=J}else ct!==U&&(ot+=(ct-U)/2e3*i/n)}if(this.contentVisible&&(L.isInFont||s.missingFile)){if(_&&!X)r.fillText(st,ot,Et);else if(this.paintChar(st,ot,Et,k,C),X){const U=ot+i*X.offset.x/n,J=Et-i*X.offset.y/n;this.paintChar(X.fontChar,U,J,k,C)}}const Rt=p?ct*A-q*c:ct*A+q*c;I+=Rt,z&&r.restore()}p?e.y-=I:e.x+=I*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,i=s.font,r=s.fontSize,n=s.fontDirection,l=i.vertical?1:-1,h=s.charSpacing,c=s.wordSpacing,u=s.textHScale*n,d=s.fontMatrix||ju,p=t.length,g=s.textRenderingMode===ze.INVISIBLE;let b,A,_,k;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...s.textMatrix),e.translate(s.x,s.y),e.scale(u,n),b=0;b<p;++b){if(A=t[b],typeof A=="number"){k=l*A*r/1e3,this.ctx.translate(k,0),s.x+=k*u;continue}const C=(A.isSpace?c:0)+h,R=i.charProcOperatorList[A.operatorListId];if(!R){pt(`Type3 character "${A.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=A,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(R),this.restore()),_=et.applyTransform([A.width,0],d)[0]*r+C,e.translate(_,0),s.x+=_*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,i,r,n){this.ctx.rect(s,i,r-s,n-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=t[1],i=this.baseTransform||Wt(this.ctx),r={createCanvasGraphics:n=>new X1(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new yd(t,s,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=et.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=et.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=a2(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,bi(e),Ue.SHADING);const i=bi(e);if(i){const{width:r,height:n}=e.canvas,[l,h,c,u]=et.getAxialAlignedBoundingBox([0,0,r,n],i);this.ctx.fillRect(l,h,c-l,u-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){zt("Should not call beginInlineImage")}beginImageData(){zt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Wt(this.ctx),e)){const s=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],s,i),this.current.updateRectMinMax(Wt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||ru("TODO: Support non-isolated groups."),t.knockout&&pt("Knockout groups not supported.");const s=Wt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=et.getAxialAlignedBoundingBox(t.bbox,Wt(e));const r=[0,0,e.canvas.width,e.canvas.height];i=et.intersect(i,r)||[0,0,0,0];const n=Math.floor(i[0]),l=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-n,1),c=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,h,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,h,c),p=d.context;p.translate(-n,-l),p.transform(...s),t.smask?this.smaskStack.push({canvas:d.canvas,context:p,offsetX:n,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(n,l),e.save()),S0(e,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Wt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=et.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,i,r){if(x(this,gi,wd).call(this),Nh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const n=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=n,e[3]=l;const[h,c]=et.singularValueDecompose2dScale(Wt(this.ctx)),{viewportScale:u}=this,d=Math.ceil(n*this.outputScaleX*u),p=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,p);const{canvas:g,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(h,0,0,-c,0,l*c),Nh(this.ctx)}else Nh(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],n,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new wf(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,gi,Ad).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=u2(t)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(t),n=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(n,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,i=0,r,n){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const h=Wt(l);l.transform(e,s,i,r,0,0);const c=this._createMaskCanvas(t);l.setTransform(1,0,0,1,c.offsetX-h[4],c.offsetY-h[5]);for(let u=0,d=n.length;u<d;u+=2){const p=et.transform(h,[e,s,i,r,n[u],n[u+1]]),[g,b]=et.applyTransform([0,0],p);l.drawImage(c.canvas,g,b)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:n,width:l,height:h,transform:c}=r,u=this.cachedCanvases.getCanvas("maskCanvas",l,h),d=u.context;d.save();const p=this.getObject(n,r);xf(d,p),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,bi(e),Ue.FILL):s,d.fillRect(0,0,l,h),d.restore(),e.save(),e.transform(...c),e.scale(1,-1),Lh(e,u.canvas,0,0,l,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){pt("Dependent image isn't ready yet");return}const n=r.width,l=r.height,h=[];for(let c=0,u=i.length;c<u;c+=2)h.push({transform:[e,0,0,s,i[c],i[c+1]],x:0,y:0,w:n,h:l});this.paintInlineImageXObjectGroup(r,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,i),n=r.context;return n.filter=this.current.transferMaps,n.drawImage(e,0,0),n.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,i=this.ctx;if(this.save(),!We){const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none")}i.scale(1/e,-1/s);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,s).context;Af(h,t),r=this.applyTransferMapsToCanvas(h)}const n=this._scaleImage(r,bi(i));i.imageSmoothingEnabled=Sf(Wt(i),t.interpolate),Lh(i,n.img,0,0,n.paintWidth,n.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,n=t.height,h=this.cachedCanvases.getCanvas("inlineImage",r,n).context;Af(h,t),i=this.applyTransferMapsToCanvas(h)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),Lh(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(e||(this.pendingClip===kf?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:i,d:r}=this.ctx.getTransform();let n,l;if(s===0&&i===0){const h=Math.abs(e),c=Math.abs(r);if(h===c)if(t===0)n=l=1/h;else{const u=h*t;n=l=u<1?1/u:1}else if(t===0)n=1/h,l=1/c;else{const u=h*t,d=c*t;n=u<1?1/u:1,l=d<1?1/d:1}}else{const h=Math.abs(e*r-s*i),c=Math.hypot(e,s),u=Math.hypot(i,r);if(t===0)n=u/h,l=c/h;else{const d=t*h;n=u>d?u/d:1,l=c>d?c/d:1}}this._cachedScaleForStroking[0]=n,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=s||1,i===1&&r===1){e.stroke();return}const n=e.getLineDash();if(t&&e.save(),e.scale(i,r),n.length>0){const l=Math.max(i,r);e.setLineDash(n.map(h=>h/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};gi=new WeakSet,wd=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ad=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},xd=function(t,e,s){const i=new Path2D;return i.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),i};let oo=X1;for(const a in ti)oo.prototype[a]!==void 0&&(oo.prototype[ti[a]]=oo.prototype[a]);var _l,Tl;class _r{static get workerPort(){return o(this,_l)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");v(this,_l,t)}static get workerSrc(){return o(this,Tl)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");v(this,Tl,t)}}_l=new WeakMap,Tl=new WeakMap,w(_r,_l,null),w(_r,Tl,"");var oa,El;class m2{constructor({parsedData:t,rawData:e}){w(this,oa);w(this,El);v(this,oa,t),v(this,El,e)}getRaw(){return o(this,El)}get(t){return o(this,oa).get(t)??null}getAll(){return g1(o(this,oa))}has(t){return o(this,oa).has(t)}}oa=new WeakMap,El=new WeakMap;const eo=Symbol("INTERNAL");var Cl,Ml,Rl,Co;class g2{constructor(t,{name:e,intent:s,usage:i,rbGroups:r}){w(this,Cl,!1);w(this,Ml,!1);w(this,Rl,!1);w(this,Co,!0);v(this,Cl,!!(t&Ms.DISPLAY)),v(this,Ml,!!(t&Ms.PRINT)),this.name=e,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(o(this,Rl))return o(this,Co);if(!o(this,Co))return!1;const{print:t,view:e}=this.usage;return o(this,Cl)?(e==null?void 0:e.viewState)!=="OFF":o(this,Ml)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==eo&&zt("Internal method `_setVisible` called."),v(this,Rl,s),v(this,Co,e)}}Cl=new WeakMap,Ml=new WeakMap,Rl=new WeakMap,Co=new WeakMap;var Jr,It,Mo,Ro,Pl,Sd;class v2{constructor(t,e=Ms.DISPLAY){w(this,Pl);w(this,Jr,null);w(this,It,new Map);w(this,Mo,null);w(this,Ro,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,v(this,Ro,t.order);for(const s of t.groups)o(this,It).set(s.id,new g2(e,s));if(t.baseState==="OFF")for(const s of o(this,It).values())s._setVisible(eo,!1);for(const s of t.on)o(this,It).get(s)._setVisible(eo,!0);for(const s of t.off)o(this,It).get(s)._setVisible(eo,!1);v(this,Mo,this.getHash())}}isVisible(t){if(o(this,It).size===0)return!0;if(!t)return ru("Optional content group not defined."),!0;if(t.type==="OCG")return o(this,It).has(t.id)?o(this,It).get(t.id).visible:(pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return x(this,Pl,Sd).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!o(this,It).has(e))return pt(`Optional content group not found: ${e}`),!0;if(o(this,It).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!o(this,It).has(e))return pt(`Optional content group not found: ${e}`),!0;if(!o(this,It).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!o(this,It).has(e))return pt(`Optional content group not found: ${e}`),!0;if(!o(this,It).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!o(this,It).has(e))return pt(`Optional content group not found: ${e}`),!0;if(o(this,It).get(e).visible)return!1}return!0}return pt(`Unknown optional content policy ${t.policy}.`),!0}return pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const i=o(this,It).get(t);if(!i){pt(`Optional content group not found: ${t}`);return}if(s&&e&&i.rbGroups.length)for(const n of i.rbGroups)for(const l of n)l!==t&&((r=o(this,It).get(l))==null||r._setVisible(eo,!1,!0));i._setVisible(eo,!!e,!0),v(this,Jr,null)}setOCGState({state:t,preserveRB:e}){let s;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=o(this,It).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}v(this,Jr,null)}get hasInitialVisibility(){return o(this,Mo)===null||this.getHash()===o(this,Mo)}getOrder(){return o(this,It).size?o(this,Ro)?o(this,Ro).slice():[...o(this,It).keys()]:null}getGroups(){return o(this,It).size>0?g1(o(this,It)):null}getGroup(t){return o(this,It).get(t)||null}getHash(){if(o(this,Jr)!==null)return o(this,Jr);const t=new Gp;for(const[e,s]of o(this,It))t.update(`${e}:${s.visible}`);return v(this,Jr,t.hexdigest())}}Jr=new WeakMap,It=new WeakMap,Mo=new WeakMap,Ro=new WeakMap,Pl=new WeakSet,Sd=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const r=t[i];let n;if(Array.isArray(r))n=x(this,Pl,Sd).call(this,r);else if(o(this,It).has(r))n=o(this,It).get(r).visible;else return pt(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return s==="And"};class b2{constructor(t,{disableRange:e=!1,disableStream:s=!1}){de(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:n,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=n,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const h=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,c)=>{this._onReceiveData({begin:h,chunk:c})}),t.addProgressListener((h,c)=>{this._onProgress({loaded:h,total:c})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});de(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,i,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){de(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new y2(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new w2(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class y2{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=y1(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class w2{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function A2(a){let t=!0,e=s("filename\\*","i").exec(a);if(e){e=e[1];let u=l(e);return u=unescape(u),u=h(u),u=c(u),r(u)}if(e=n(a),e){const u=c(e);return r(u)}if(e=s("filename","i").exec(a),e){e=e[1];let u=l(e);return u=c(u),r(u)}function s(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const p=new TextDecoder(u,{fatal:!0}),g=nu(d);d=p.decode(g),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),t&&(u=i("iso-8859-1",u))),u}function n(u){const d=[];let p;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(u))!==null;){let[,A,_,k]=p;if(A=parseInt(A,10),A in d){if(A===0)break;continue}d[A]=[_,k]}const b=[];for(let A=0;A<d.length&&A in d;++A){let[_,k]=d[A];k=l(k),_&&(k=unescape(k),A===0&&(k=h(k))),b.push(k)}return b.join("")}function l(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let p=0;p<d.length;++p){const g=d[p].indexOf('"');g!==-1&&(d[p]=d[p].slice(0,g),d.length=p+1),d[p]=d[p].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function h(u){const d=u.indexOf("'");if(d===-1)return u;const p=u.slice(0,d),b=u.slice(d+1).replace(/^[^']*'/,"");return i(p,b)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,p,g,b){if(g==="q"||g==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,_){return String.fromCharCode(parseInt(_,16))}),i(p,b);try{b=atob(b)}catch{}return i(p,b)})}return""}function sm(a,t){const e=new Headers;if(!a||!t||typeof t!="object")return e;for(const s in t){const i=t[s];i!==void 0&&e.append(s,i)}return e}function lu(a){try{return new URL(a).origin}catch{}return null}function im({responseHeaders:a,isHttp:t,rangeChunkSize:e,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(a.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||s||!t||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function rm(a){const t=a.get("Content-Disposition");if(t){let e=A2(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(y1(e))return e}return null}function hu(a,t){return a===404||a===0&&t.startsWith("file:")?new W0('Missing PDF "'+t+'".'):new kc(`Unexpected server response (${a}) while retrieving PDF "${t}".`,a)}function nm(a){return a===200||a===206}function am(a,t,e){return{method:"GET",headers:a,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function om(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(pt(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class _f{constructor(t){nt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=sm(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return de(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new x2(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new S2(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class x2{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),i=e.url;fetch(i,am(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=lu(r.url),!nm(r.status))throw hu(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const n=r.headers,{allowRangeRequests:l,suggestedLength:h}=im({responseHeaders:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=h||this._contentLength,this._filename=rm(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new wn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:om(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class S2{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const n=i.url;fetch(n,am(r,this._withCredentials,this._abortController)).then(l=>{const h=lu(l.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!nm(l.status))throw hu(l.status,n);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:om(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Ru=200,Pu=206;function k2(a){const t=a.response;return typeof t!="string"?t:nu(t).buffer}class _2{constructor({url:t,httpHeaders:e,withCredentials:s}){nt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=sm(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,n]of this.headers)e.setRequestHeader(r,n);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Pu):i.expectedStatus=Ru,e.responseType="arraybuffer",de(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var i;const s=this.pendingRequests[t];s&&((i=s.onProgress)==null||i.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||Ru;if(!(r===Ru&&s.expectedStatus===Pu)&&r!==s.expectedStatus){s.onError(i.status);return}const l=k2(i);if(r===Pu){const h=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);c?s.onDone({begin:parseInt(c[1],10),chunk:l}):(pt('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class T2{constructor(t){this._source=t,this._manager=new _2(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return de(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new E2(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new C2(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class E2{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=lu(e.responseURL);const s=e.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[h,...c]=l.split(": ");return[h,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:n}=im({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=rm(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=hu(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class C2{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=lu((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=hu(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const M2=/^[a-z][a-z0-9\-+.]+:/i;function R2(a){if(M2.test(a))return new URL(a);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(a))}class P2{constructor(t){this.source=t,this.url=R2(t.url),de(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return de(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new D2(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new I2(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class D2{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new W0(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new wn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class I2{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const L2=1e5,os=30,N2=.8;var cp,tn,us,Dl,Il,la,hr,Ll,Nl,ha,Po,Do,en,Io,Fl,Lo,ca,Ol,zl,ua,da,Bl,sn,No,Lr,lm,hm,kd,Ls,ic,_d,cm,um;const ve=class ve{constructor({textContentSource:t,container:e,viewport:s}){w(this,Lr);w(this,tn,Promise.withResolvers());w(this,us,null);w(this,Dl,!1);w(this,Il,!!((cp=globalThis.FontInspector)!=null&&cp.enabled));w(this,la,null);w(this,hr,null);w(this,Ll,0);w(this,Nl,0);w(this,ha,null);w(this,Po,null);w(this,Do,0);w(this,en,0);w(this,Io,Object.create(null));w(this,Fl,[]);w(this,Lo,null);w(this,ca,[]);w(this,Ol,new WeakMap);w(this,zl,null);var h;if(t instanceof ReadableStream)v(this,Lo,t);else if(typeof t=="object")v(this,Lo,new ReadableStream({start(c){c.enqueue(t),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,us,v(this,Po,e)),v(this,en,s.scale*(globalThis.devicePixelRatio||1)),v(this,Do,s.rotation),v(this,hr,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:n,pageY:l}=s.rawDims;v(this,zl,[1,0,0,-1,-n,l+r]),v(this,Nl,i),v(this,Ll,r),x(h=ve,Ls,cm).call(h),Ga(e,s),o(this,tn).promise.finally(()=>{o(ve,No).delete(this),v(this,hr,null),v(this,Io,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=es.platform;return yt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{o(this,ha).read().then(({value:e,done:s})=>{if(s){o(this,tn).resolve();return}o(this,la)??v(this,la,e.lang),Object.assign(o(this,Io),e.styles),x(this,Lr,lm).call(this,e.items),t()},o(this,tn).reject)};return v(this,ha,o(this,Lo).getReader()),o(ve,No).add(this),t(),o(this,tn).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==o(this,Do)&&(e==null||e(),v(this,Do,i),Ga(o(this,Po),{rotation:i})),s!==o(this,en)){e==null||e(),v(this,en,s);const n={div:null,properties:null,ctx:x(r=ve,Ls,ic).call(r,o(this,la))};for(const l of o(this,ca))n.properties=o(this,Ol).get(l),n.div=l,x(this,Lr,kd).call(this,n)}}cancel(){var e;const t=new wn("TextLayer task cancelled.");(e=o(this,ha))==null||e.cancel(t).catch(()=>{}),v(this,ha,null),o(this,tn).reject(t)}get textDivs(){return o(this,ca)}get textContentItemsStr(){return o(this,Fl)}static cleanup(){if(!(o(this,No).size>0)){o(this,ua).clear();for(const{canvas:t}of o(this,da).values())t.remove();o(this,da).clear()}}};tn=new WeakMap,us=new WeakMap,Dl=new WeakMap,Il=new WeakMap,la=new WeakMap,hr=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,ha=new WeakMap,Po=new WeakMap,Do=new WeakMap,en=new WeakMap,Io=new WeakMap,Fl=new WeakMap,Lo=new WeakMap,ca=new WeakMap,Ol=new WeakMap,zl=new WeakMap,ua=new WeakMap,da=new WeakMap,Bl=new WeakMap,sn=new WeakMap,No=new WeakMap,Lr=new WeakSet,lm=function(t){var i,r;if(o(this,Dl))return;(r=o(this,hr)).ctx??(r.ctx=x(i=ve,Ls,ic).call(i,o(this,la)));const e=o(this,ca),s=o(this,Fl);for(const n of t){if(e.length>L2){pt("Ignoring additional textDivs for performance reasons."),v(this,Dl,!0);return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){const l=o(this,us);v(this,us,document.createElement("span")),o(this,us).classList.add("markedContent"),n.id!==null&&o(this,us).setAttribute("id",`${n.id}`),l.append(o(this,us))}else n.type==="endMarkedContent"&&v(this,us,o(this,us).parentNode);continue}s.push(n.str),x(this,Lr,hm).call(this,n)}},hm=function(t){var A;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};o(this,ca).push(e);const i=et.transform(o(this,zl),t.transform);let r=Math.atan2(i[1],i[0]);const n=o(this,Io)[t.fontName];n.vertical&&(r+=Math.PI/2);let l=o(this,Il)&&n.fontSubstitution||n.fontFamily;l=ve.fontFamilyMap.get(l)||l;const h=Math.hypot(i[2],i[3]),c=h*x(A=ve,Ls,um).call(A,l,o(this,la));let u,d;r===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(r),d=i[5]-c*Math.cos(r));const p="calc(var(--scale-factor)*",g=e.style;o(this,us)===o(this,Po)?(g.left=`${(100*u/o(this,Nl)).toFixed(2)}%`,g.top=`${(100*d/o(this,Ll)).toFixed(2)}%`):(g.left=`${p}${u.toFixed(2)}px)`,g.top=`${p}${d.toFixed(2)}px)`),g.fontSize=`${p}${(o(ve,sn)*h).toFixed(2)}px)`,g.fontFamily=l,s.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,o(this,Il)&&(e.dataset.fontName=n.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),k=Math.abs(t.transform[3]);_!==k&&Math.max(_,k)/Math.min(_,k)>1.5&&(b=!0)}if(b&&(s.canvasWidth=n.vertical?t.height:t.width),o(this,Ol).set(e,s),o(this,hr).div=e,o(this,hr).properties=s,x(this,Lr,kd).call(this,o(this,hr)),s.hasText&&o(this,us).append(e),s.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),o(this,us).append(_)}},kd=function(t){var l;const{div:e,properties:s,ctx:i}=t,{style:r}=e;let n="";if(o(ve,sn)>1&&(n=`scale(${1/o(ve,sn)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:h}=r,{canvasWidth:c,fontSize:u}=s;x(l=ve,Ls,_d).call(l,i,u*o(this,en),h);const{width:d}=i.measureText(e.textContent);d>0&&(n=`scaleX(${c*o(this,en)/d}) ${n}`)}s.angle!==0&&(n=`rotate(${s.angle}deg) ${n}`),n.length>0&&(r.transform=n)},Ls=new WeakSet,ic=function(t=null){let e=o(this,da).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,da).set(t,e),o(this,Bl).set(e,{size:0,family:""})}return e},_d=function(t,e,s){const i=o(this,Bl).get(t);e===i.size&&s===i.family||(t.font=`${e}px ${s}`,i.size=e,i.family=s)},cm=function(){if(o(this,sn)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),v(this,sn,t.getBoundingClientRect().height),t.remove()},um=function(t,e){const s=o(this,ua).get(t);if(s)return s;const i=x(this,Ls,ic).call(this,e);i.canvas.width=i.canvas.height=os,x(this,Ls,_d).call(this,i,os,t);const r=i.measureText("");let n=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(n){const u=n/(n+l);return o(this,ua).set(t,u),i.canvas.width=i.canvas.height=0,u}i.strokeStyle="red",i.clearRect(0,0,os,os),i.strokeText("g",0,0);let h=i.getImageData(0,0,os,os).data;l=0;for(let u=h.length-1-3;u>=0;u-=4)if(h[u]>0){l=Math.ceil(u/4/os);break}i.clearRect(0,0,os,os),i.strokeText("A",0,os),h=i.getImageData(0,0,os,os).data,n=0;for(let u=0,d=h.length;u<d;u+=4)if(h[u]>0){n=os-Math.floor(u/4/os);break}i.canvas.width=i.canvas.height=0;const c=n?n/(n+l):N2;return o(this,ua).set(t,c),c},w(ve,Ls),w(ve,ua,new Map),w(ve,da,new Map),w(ve,Bl,new WeakMap),w(ve,sn,null),w(ve,No,new Set);let j0=ve;class X0{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function i(r){var h;if(!r)return;let n=null;const l=r.name;if(l==="#text")n=r.value;else if(X0.shouldBuildText(l))(h=r==null?void 0:r.attributes)!=null&&h.textContent?n=r.attributes.textContent:r.value&&(n=r.value);else return;if(n!==null&&e.push({str:n}),!!r.children)for(const c of r.children)i(c)}return i(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const F2=65536,O2=100,z2=5e3,B2=We?Jg:Kg,H2=We?t2:Kp,q2=We?Qg:Zg,G2=We?e2:tm;function $2(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const t=new Td,{docId:e}=t,s=a.url?V2(a.url):null,i=a.data?U2(a.data):null,r=a.httpHeaders||null,n=a.withCredentials===!0,l=a.password??null,h=a.range instanceof dm?a.range:null,c=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:F2;let u=a.worker instanceof lo?a.worker:null;const d=a.verbosity,p=typeof a.docBaseUrl=="string"&&!ou(a.docBaseUrl)?a.docBaseUrl:null,g=typeof a.cMapUrl=="string"?a.cMapUrl:null,b=a.cMapPacked!==!1,A=a.CMapReaderFactory||H2,_=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,k=a.StandardFontDataFactory||G2,C=a.stopAtErrors!==!0,R=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,P=a.isEvalSupported!==!1,I=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!We,N=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!We&&(es.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,z=typeof a.disableFontFace=="boolean"?a.disableFontFace:We,q=a.fontExtraProperties===!0,st=a.enableXfa===!0,X=a.ownerDocument||globalThis.document,ot=a.disableRange===!0,Et=a.disableStream===!0,ct=a.disableAutoFetch===!0,Rt=a.pdfBug===!0,U=a.CanvasFactory||B2,J=a.FilterFactory||q2,Yt=a.enableHWA===!0,Me=h?h.length:a.length??NaN,ce=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!We&&!z,Kt=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:A===Kp&&k===tm&&g&&_&&T0(g,document.baseURI)&&T0(_,document.baseURI),Ct=null;Cg(d);const Ft={canvasFactory:new U({ownerDocument:X,enableHWA:Yt}),filterFactory:new J({docId:e,ownerDocument:X}),cMapReaderFactory:Kt?null:new A({baseUrl:g,isCompressed:b}),standardFontDataFactory:Kt?null:new k({baseUrl:_})};if(!u){const me={verbosity:d,port:_r.workerPort};u=me.port?lo.fromPort(me):new lo(me),t._worker=u}const Fs={docId:e,apiVersion:"4.10.38",data:i,password:l,disableAutoFetch:ct,rangeChunkSize:c,length:Me,docBaseUrl:p,enableXfa:st,evaluatorOptions:{maxImageSize:R,disableFontFace:z,ignoreErrors:C,isEvalSupported:P,isOffscreenCanvasSupported:I,isImageDecoderSupported:N,canvasMaxAreaInBytes:L,fontExtraProperties:q,useSystemFonts:ce,cMapUrl:Kt?g:null,standardFontDataUrl:Kt?_:null}},ns={disableFontFace:z,fontExtraProperties:q,ownerDocument:X,pdfBug:Rt,styleElement:Ct,loadingParams:{disableAutoFetch:ct,enableXfa:st}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const me=u.messageHandler.sendWithPromise("GetDocRequest",Fs,i?[i.buffer]:null);let At;if(h)At=new b2(h,{disableRange:ot,disableStream:Et});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let re;if(We)if(T0(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");re=_f}else re=P2;else re=T0(s)?_f:T2;At=new re({url:s,length:Me,httpHeaders:r,withCredentials:n,rangeChunkSize:c,disableRange:ot,disableStream:Et})}return me.then(re=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ui=new R0(e,re,u.port),Fr=new Y2(Ui,t,At,ns,Ft);t._transport=Fr,Ui.send("Ready",null)})}).catch(t._capability.reject),t}function V2(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(We&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function U2(a){if(We&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return nu(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a==null?void 0:a.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Tf(a){return typeof a=="object"&&Number.isInteger(a==null?void 0:a.num)&&a.num>=0&&Number.isInteger(a==null?void 0:a.gen)&&a.gen>=0}var Uc;const Wc=class Wc{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${je(Wc,Uc)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,s,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};Uc=new WeakMap,w(Wc,Uc,0);let Td=Wc;class dm{constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class W2{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var rn,cr,Us,so,rc;class j2{constructor(t,e,s,i=!1){w(this,Us);w(this,rn,null);w(this,cr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new df:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new fm,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new xh({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:i=Hr.ENABLE,transform:r=null,background:n=null,optionalContentConfigPromise:l=null,annotationCanvasMap:h=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){var P,I;(P=this._stats)==null||P.time("Overall");const p=this._transport.getRenderingIntent(s,i,u,d),{renderingIntent:g,cacheKey:b}=p;v(this,cr,!1),x(this,Us,rc).call(this),l||(l=this._transport.getOptionalContentConfig(g));let A=this._intentStates.get(b);A||(A=Object.create(null),this._intentStates.set(b,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const _=!!(g&Ms.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(p));const k=N=>{var L;A.renderTasks.delete(C),(this._maybeCleanupAfterRender||_)&&v(this,cr,!0),x(this,Us,so).call(this,!_),N?(C.capability.reject(N),this._abortOperatorList({intentState:A,reason:N instanceof Error?N:new Error(N)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(L=globalThis.Stats)!=null&&L.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new Cd({callback:k,params:{canvasContext:t,viewport:e,transform:r,background:n},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:c});(A.renderTasks||(A.renderTasks=new Set)).add(C);const R=C.task;return Promise.all([A.displayReadyCapability.promise,l]).then(([N,L])=>{var z;if(this.destroyed){k();return}if((z=this._stats)==null||z.time("Rendering"),!(L.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:N,optionalContentConfig:L}),C.operatorListChanged()}).catch(k),R}getOperatorList({intent:t="display",annotationMode:e=Hr.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var c;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(h))}const n=this._transport.getRenderingIntent(t,e,s,i,!0);let l=this._intentStates.get(n.cacheKey);l||(l=Object.create(null),this._intentStates.set(n.cacheKey,l));let h;return l.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(h),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(n)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>X0.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,i){function r(){n.read().then(function({value:h,done:c}){if(c){s(l);return}l.lang??(l.lang=h.lang),Object.assign(l.styles,h.styles),l.items.push(...h.items),r()},i)}const n=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),v(this,cr,!1),x(this,Us,rc).call(this),Promise.all(t)}cleanup(t=!1){v(this,cr,!0);const e=x(this,Us,so).call(this,!1);return t&&e&&this._stats&&(this._stats=new df),e}_startRenderPage(t,e){var i,r;const s=this._intentStates.get(e);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&x(this,Us,so).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:n}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},n).getReader(),c=this._intentStates.get(e);c.streamReader=h;const u=()=>{h.read().then(({value:d,done:p})=>{if(p){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const p of c.renderTasks)p.operatorListChanged();x(this,Us,so).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof b1){let i=O2;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new wn(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}rn=new WeakMap,cr=new WeakMap,Us=new WeakSet,so=function(t=!1){if(x(this,Us,rc).call(this),!o(this,cr)||this.destroyed)return!1;if(t)return v(this,rn,setTimeout(()=>{v(this,rn,null),x(this,Us,so).call(this,!1)},z2)),!1;for(const{renderTasks:e,operatorList:s}of this._intentStates.values())if(e.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,cr,!1),!0},rc=function(){o(this,rn)&&(clearTimeout(o(this,rn)),v(this,rn,null))};var ur,jc;class X2{constructor(){w(this,ur,new Map);w(this,jc,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};o(this,jc).then(()=>{for(const[i]of o(this,ur))i.call(this,s)})}addEventListener(t,e,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){pt("LoopbackPort - cannot use an `aborted` signal.");return}const n=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",n),r.addEventListener("abort",n)}o(this,ur).set(e,i)}removeEventListener(t,e){const s=o(this,ur).get(e);s==null||s(),o(this,ur).delete(e)}terminate(){for(const[,t]of o(this,ur))t==null||t();o(this,ur).clear()}}ur=new WeakMap,jc=new WeakMap;var Xc,fa,pa,Fo,nc,Oo,ac;const Ut=class Ut{constructor({name:t=null,port:e=null,verbosity:s=Mg()}={}){w(this,Fo);var i;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=o(Ut,pa))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(o(Ut,pa)||v(Ut,pa,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new R0("main","worker",t),this._messageHandler.on("ready",function(){}),x(this,Fo,nc).call(this)}_initialize(){if(o(Ut,fa)||o(Ut,Oo,ac)){this._setupFakeWorker();return}let{workerSrc:t}=Ut;try{Ut._isSameOrigin(window.location.href,t)||(t=Ut._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new R0("main","worker",e),i=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}this._messageHandler=s,this._port=e,this._webWorker=e,x(this,Fo,nc).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{n()}catch{this._setupFakeWorker()}});const n=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};n();return}catch{ru("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){o(Ut,fa)||(pt("Setting up fake worker."),v(Ut,fa,!0)),Ut._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new X2;this._port=e;const s=`fake${je(Ut,Xc)._++}`,i=new R0(s+"_worker",s,e);t.setup(i,e),this._messageHandler=new R0(s,s+"_worker",e),x(this,Fo,nc).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=o(Ut,pa))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=o(this,pa))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ut(t)}static get workerSrc(){if(_r.workerSrc)return _r.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return yt(this,"_setupFakeWorkerGlobal",(async()=>o(this,Oo,ac)?o(this,Oo,ac):(await import(this.workerSrc)).WorkerMessageHandler)())}};Xc=new WeakMap,fa=new WeakMap,pa=new WeakMap,Fo=new WeakSet,nc=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Oo=new WeakSet,ac=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Ut,Oo),w(Ut,Xc,0),w(Ut,fa,!1),w(Ut,pa),We&&(v(Ut,fa,!0),_r.workerSrc||(_r.workerSrc="./pdf.worker.mjs")),Ut._isSameOrigin=(t,e)=>{let s;try{if(s=new URL(t),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(e,s);return s.origin===i.origin},Ut._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let lo=Ut;var dr,Ri,zo,Bo,fr,ma,N0;class Y2{constructor(t,e,s,i,r){w(this,ma);w(this,dr,new Map);w(this,Ri,new Map);w(this,zo,new Map);w(this,Bo,new Map);w(this,fr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new fm,this.fontLoader=new Xg({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return yt(this,"annotationStorage",new x1)}getRenderingIntent(t,e=Hr.ENABLE,s=null,i=!1,r=!1){let n=Ms.DISPLAY,l=md;switch(t){case"any":n=Ms.ANY;break;case"display":break;case"print":n=Ms.PRINT;break;default:pt(`getRenderingIntent - invalid intent: ${t}`)}const h=n&Ms.PRINT&&s instanceof Vp?s:this.annotationStorage;switch(e){case Hr.DISABLE:n+=Ms.ANNOTATIONS_DISABLE;break;case Hr.ENABLE:break;case Hr.ENABLE_FORMS:n+=Ms.ANNOTATIONS_FORMS;break;case Hr.ENABLE_STORAGE:n+=Ms.ANNOTATIONS_STORAGE,l=h.serializable;break;default:pt(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(n+=Ms.IS_EDITING),r&&(n+=Ms.OPLIST);const{ids:c,hash:u}=h.modifiedIds,d=[n,l.hash,u];return{renderingIntent:n,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:c}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=o(this,fr))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of o(this,Ri).values())t.push(i._destroy());o(this,Ri).clear(),o(this,zo).clear(),o(this,Bo).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),o(this,dr).clear(),this.filterFactory.destroy(),j0.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new wn("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,i)=>{de(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:n}){if(n){i.close();return}de(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(n=>{if(!this.destroyed)throw n})}}),t.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:n}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=h=>{var c;(c=e.onProgress)==null||c.call(e,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:n}}),t.on("GetRangeReader",(s,i)=>{de(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:n,done:l}){if(l){i.close();return}de(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(n),1,[n])}).catch(n=>{i.error(n)})},i.onCancel=n=>{r.cancel(n),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new W2(s,this))}),t.on("DocException",s=>{e._capability.reject(ls(s))}),t.on("PasswordRequest",s=>{v(this,fr,Promise.withResolvers());try{if(!e.onPassword)throw ls(s);const i=r=>{r instanceof Error?o(this,fr).reject(r):o(this,fr).resolve({password:r})};e.onPassword(i,s.code)}catch(i){o(this,fr).reject(i)}return o(this,fr).promise}),t.on("DataLoaded",s=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;o(this,Ri).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,i,r])=>{var n;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:l,fontExtraProperties:h,pdfBug:c}=this._params;if("error"in r){const g=r.error;pt(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const u=c&&((n=globalThis.FontInspector)!=null&&n.enabled)?(g,b)=>globalThis.FontInspector.fontAdded(g,b):null,d=new Yg(r,{disableFontFace:l,fontExtraProperties:h,inspectFont:u});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:p}=r;de(p,"The imageRef must be defined.");for(const g of o(this,Ri).values())for(const[,b]of g.objs)if((b==null?void 0:b.ref)===p)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([s,i,r,n])=>{var h;if(this.destroyed)return;const l=o(this,Ri).get(i);if(!l.objs.has(s)){if(l._intentStates.size===0){(h=n==null?void 0:n.bitmap)==null||h.close();return}switch(r){case"Image":l.objs.resolve(s,n),(n==null?void 0:n.dataLen)>kg&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(s,n);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),t.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=o(this,zo).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&o(this,Bo).set(r.refStr,t);const n=new j2(e,r,this,this._params.pdfBug);return o(this,Ri).set(e,n),n});return o(this,zo).set(e,i),i}getPageIndex(t){return Tf(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return x(this,ma,N0).call(this,"GetFieldObjects")}hasJSActions(){return x(this,ma,N0).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,ma,N0).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return x(this,ma,N0).call(this,"GetOptionalContentConfig").then(e=>new v2(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=o(this,dr).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,n;return{info:i[0],metadata:i[1]?new m2(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((n=this._fullReader)==null?void 0:n.contentLength)??null}});return o(this,dr).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of o(this,Ri).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),o(this,dr).clear(),this.filterFactory.destroy(!0),j0.cleanup()}}cachedPageNumber(t){if(!Tf(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return o(this,Bo).get(e)??null}}dr=new WeakMap,Ri=new WeakMap,zo=new WeakMap,Bo=new WeakMap,fr=new WeakMap,ma=new WeakSet,N0=function(t,e=null){const s=o(this,dr).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,e);return o(this,dr).set(t,i),i};const k0=Symbol("INITIAL_DATA");var ws,Hl,Ed;class fm{constructor(){w(this,Hl);w(this,ws,Object.create(null))}get(t,e=null){if(e){const i=x(this,Hl,Ed).call(this,t);return i.promise.then(()=>e(i.data)),null}const s=o(this,ws)[t];if(!s||s.data===k0)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=o(this,ws)[t];return!!e&&e.data!==k0}delete(t){const e=o(this,ws)[t];return!e||e.data===k0?!1:(delete o(this,ws)[t],!0)}resolve(t,e=null){const s=x(this,Hl,Ed).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in o(this,ws)){const{data:s}=o(this,ws)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}v(this,ws,Object.create(null))}*[Symbol.iterator](){for(const t in o(this,ws)){const{data:e}=o(this,ws)[t];e!==k0&&(yield[t,e])}}}ws=new WeakMap,Hl=new WeakSet,Ed=function(t){var e;return(e=o(this,ws))[t]||(e[t]={...Promise.withResolvers(),data:k0})};var nn;class K2{constructor(t){w(this,nn,null);v(this,nn,t),this.onContinue=null}get promise(){return o(this,nn).capability.promise}cancel(t=0){o(this,nn).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=o(this,nn).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=o(this,nn);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}nn=new WeakMap;var an,ga;const On=class On{constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:n,pageIndex:l,canvasFactory:h,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:p=null}){w(this,an,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=n,this._pageIndex=l,this.canvasFactory=h,this.filterFactory=c,this._pdfBug=d,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new K2(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,h;if(this.cancelled)return;if(this._canvas){if(o(On,ga).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(On,ga).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:n}=this.params;this.gfx=new oo(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:n}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(t=null,e=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),o(this,an)&&(window.cancelAnimationFrame(o(this,an)),v(this,an,null)),o(On,ga).delete(this._canvas),this.callback(t||new b1(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?v(this,an,window.requestAnimationFrame(()=>{v(this,an,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(On,ga).delete(this._canvas),this.callback())))}};an=new WeakMap,ga=new WeakMap,w(On,ga,new WeakSet);let Cd=On;const Z2="4.10.38",Q2="f9bea397f";function Ef(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function _0(a){return Math.max(0,Math.min(255,255*a))}class Cf{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=_0(t),[t,t,t]}static G_HTML([t]){const e=Ef(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(_0)}static RGB_HTML(t){return`#${t.map(Ef).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[_0(1-Math.min(1,t+i)),_0(1-Math.min(1,s+i)),_0(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const i=1-t,r=1-e,n=1-s,l=Math.min(i,r,n);return["CMYK",i,r,n,l]}}class J2{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){zt("Abstract method `_createSVG` called.")}}class k1 extends J2{_createSVG(t){return document.createElementNS(Xi,t)}}class pm{static setupStorage(t,e,s,i,r){const n=i.getValue(e,{value:null});switch(s.name){case"textarea":if(n.value!==null&&(t.textContent=n.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(n.value===s.attributes.xfaOn?t.setAttribute("checked",!0):n.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{i.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(n.value!==null&&t.setAttribute("value",n.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})})}break;case"select":if(n.value!==null){t.setAttribute("value",n.value);for(const l of s.children)l.attributes.value===n.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const h=l.target.options,c=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){const{attributes:n}=e,l=t instanceof HTMLAnchorElement;n.type==="radio"&&(n.name=`${n.name}-${i}`);for(const[h,c]of Object.entries(n))if(c!=null)switch(h){case"class":c.length&&t.setAttribute(h,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!l||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,c)}l&&r.addLinkAttributes(t,n.href,n.newWindow),s&&n.dataId&&this.setupStorage(t,n.dataId,e,s)}static render(t){var d,p;const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",n=document.createElement(i.name);i.attributes&&this.setAttributes({html:n,element:i,intent:r,linkService:s});const l=r!=="richText",h=t.div;if(h.append(n),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=g}l&&h.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);n.append(g),l&&X0.shouldBuildText(i.name)&&c.push(g)}return{textDivs:c}}const u=[[i,-1,n]];for(;u.length>0;){const[g,b,A]=u.at(-1);if(b+1===g.children.length){u.pop();continue}const _=g.children[++u.at(-1)[1]];if(_===null)continue;const{name:k}=_;if(k==="#text"){const R=document.createTextNode(_.value);c.push(R),A.append(R);continue}const C=(d=_==null?void 0:_.attributes)!=null&&d.xmlns?document.createElementNS(_.attributes.xmlns,k):document.createElement(k);if(A.append(C),_.attributes&&this.setAttributes({html:C,element:_,storage:e,intent:r,linkService:s}),((p=_.children)==null?void 0:p.length)>0)u.push([_,-1,C]);else if(_.value){const R=document.createTextNode(_.value);l&&X0.shouldBuildText(k)&&c.push(R),C.append(R)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const kh=1e3,t5=9,Va=new WeakSet;function yn(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class e5{static create(t){switch(t.data.annotationType){case ge.LINK:return new mm(t);case ge.TEXT:return new s5(t);case ge.WIDGET:switch(t.data.fieldType){case"Tx":return new i5(t);case"Btn":return t.data.radioButton?new bm(t):t.data.checkBox?new n5(t):new a5(t);case"Ch":return new o5(t);case"Sig":return new r5(t)}return new Wa(t);case ge.POPUP:return new Rd(t);case ge.FREETEXT:return new Sm(t);case ge.LINE:return new h5(t);case ge.SQUARE:return new c5(t);case ge.CIRCLE:return new u5(t);case ge.POLYLINE:return new km(t);case ge.CARET:return new f5(t);case ge.INK:return new _1(t);case ge.POLYGON:return new d5(t);case ge.HIGHLIGHT:return new _m(t);case ge.UNDERLINE:return new p5(t);case ge.SQUIGGLY:return new m5(t);case ge.STRIKEOUT:return new g5(t);case ge.STAMP:return new Tm(t);case ge.FILEATTACHMENT:return new v5(t);default:return new he(t)}}}var va,Ho,qo,ql,Md;const Y1=class Y1{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){w(this,ql);w(this,va,null);w(this,Ho,!1);w(this,qo,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Y1._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;o(this,va)||v(this,va,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&x(this,ql,Md).call(this,e),(s=o(this,qo))==null||s.popup.updateEdited(t)}resetEdited(){var t;o(this,va)&&(x(this,ql,Md).call(this,o(this,va).rect),(t=o(this,qo))==null||t.popup.resetEdited(),v(this,va,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Wa||(r.tabIndex=kh);const{style:n}=r;if(n.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Rd){const{rotation:A}=e;return!e.hasOwnCanvas&&A!==0&&this.setRotation(A,r),r}const{width:l,height:h}=yn(e.rect);if(!t&&e.borderStyle.width>0){n.borderWidth=`${e.borderStyle.width}px`;const A=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(A>0||_>0){const C=`calc(${A}px * var(--scale-factor)) / calc(${_}px * var(--scale-factor))`;n.borderRadius=C}else if(this instanceof bm){const C=`calc(${l}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;n.borderRadius=C}switch(e.borderStyle.style){case x0.SOLID:n.borderStyle="solid";break;case x0.DASHED:n.borderStyle="dashed";break;case x0.BEVELED:pt("Unimplemented border style: beveled");break;case x0.INSET:pt("Unimplemented border style: inset");break;case x0.UNDERLINE:n.borderBottomStyle="solid";break}const k=e.borderColor||null;k?(v(this,Ho,!0),n.borderColor=et.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):n.borderWidth=0}const c=et.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:d,pageX:p,pageY:g}=i.rawDims;n.left=`${100*(c[0]-p)/u}%`,n.top=`${100*(c[1]-g)/d}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(n.width=`${100*l/u}%`,n.height=`${100*h/d}%`):this.setRotation(b,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:n}=yn(this.data.rect);let l,h;t%180===0?(l=100*r/s,h=100*n/i):(l=100*n/s,h=100*r/i),e.style.width=`${l}%`,e.style.height=`${h}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,i)=>{const r=i.detail[e],n=r[0],l=r.slice(1);i.target.style[s]=Cf[`${n}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:Cf[`${n}_rgb`](l)})};return yt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||s[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[i,r]of Object.entries(e)){const n=s[i];if(n){const l={detail:{[i]:r},target:t};n(l),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,i,r]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,_,k,C]=t.subarray(2,6);if(i===A&&r===_&&e===k&&s===C)return}const{style:n}=this.container;let l;if(o(this,Ho)){const{borderColor:A,borderWidth:_}=n;n.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const h=i-e,c=r-s,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const p=u.createElement("defs");d.append(p);const g=u.createElement("clipPath"),b=`clippath_${this.data.id}`;g.setAttribute("id",b),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let A=2,_=t.length;A<_;A+=8){const k=t[A],C=t[A+1],R=t[A+2],P=t[A+3],I=u.createElement("rect"),N=(R-e)/h,L=(r-C)/c,z=(k-R)/h,q=(C-P)/c;I.setAttribute("x",N),I.setAttribute("y",L),I.setAttribute("width",z),I.setAttribute("height",q),g.append(I),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${L}" width="${z}" height="${q}"/>`)}o(this,Ho)&&(l.push("</g></svg>')"),n.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:t}=this,e=v(this,qo,new Rd({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:n,exportValues:l}of i){if(r===-1||n===e)continue;const h=typeof l=="string"?l:null,c=document.querySelector(`[data-element-id="${n}"]`);if(c&&!Va.has(c)){pt(`_getElementsByName - element not allowed: ${n}`);continue}s.push({id:n,exportValue:h,domElement:c})}return s}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,n=i.getAttribute("data-element-id");n!==e&&Va.has(i)&&s.push({id:n,exportValue:r,domElement:i})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};va=new WeakMap,Ho=new WeakMap,qo=new WeakMap,ql=new WeakSet,Md=function(t){const{container:{style:e},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:n,pageX:l,pageY:h}}}}=this;s==null||s.splice(0,4,...t);const{width:c,height:u}=yn(t);e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(n-t[3]+h)/n}%`,i===0?(e.width=`${100*c/r}%`,e.height=`${100*u/n}%`):this.setRotation(i)};let he=Y1;var Rs,In,gm,vm;class mm extends he{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,Rs);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(x(this,Rs,gm).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(x(this,Rs,vm).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&x(this,Rs,In).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),x(this,Rs,In).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const n=i.get(r);n&&(e[n]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),x(this,Rs,In).call(this)}_bindResetFormAction(e,s){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),x(this,Rs,In).call(this),!this._fieldObjects){pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var d;i==null||i();const{fields:r,refs:n,include:l}=s,h=[];if(r.length!==0||n.length!==0){const p=new Set(n);for(const g of r){const b=this._fieldObjects[g]||[];for(const{id:A}of b)p.add(A)}for(const g of Object.values(this._fieldObjects))for(const b of g)p.has(b.id)===l&&h.push(b)}else for(const p of Object.values(this._fieldObjects))h.push(...p);const c=this.annotationStorage,u=[];for(const p of h){const{id:g}=p;switch(u.push(g),p.type){case"text":{const A=p.defaultValue||"";c.setValue(g,{value:A});break}case"checkbox":case"radiobutton":{const A=p.defaultValue===p.exportValues;c.setValue(g,{value:A});break}case"combobox":case"listbox":{const A=p.defaultValue||"";c.setValue(g,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${g}"]`);if(b){if(!Va.has(b)){pt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Rs=new WeakSet,In=function(){this.container.setAttribute("data-internal-link","")},gm=function(e,s,i=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},x(this,Rs,In).call(this)},vm=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),x(this,Rs,In).call(this)};class s5 extends he{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Wa extends he{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return es.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,n=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(n),shift:n.shiftKey,modifier:this._getKeyModifier(n)}})}):t.addEventListener(s,n=>{var l;if(s==="blur"){if(!e.focused||!n.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(n)}}))})}_setEventListeners(t,e,s,i){var r,n,l;for(const[h,c]of s)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,c,i),c==="Focus"&&!((n=this.data.actions)!=null&&n.Blur)?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":et.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||t5,r=t.style;let n;const l=2,h=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(c/(_u*i))||1,d=c/u;n=Math.min(i,h(d/_u))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-l);n=Math.min(i,h(c/_u))}r.fontSize=`calc(${n}px * var(--scale-factor))`,r.color=et.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class i5 extends Wa{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,i){const r=this.annotationStorage;for(const n of this._getElementsByName(t.name,t.id))n.domElement&&(n.domElement[e]=s),r.setValue(n.id,{[i]:s})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let l=n.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&l.length>h&&(l=l.slice(0,h));let c=n.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",c??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Va.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=kh,this._setRequired(s,this.data.required),h&&(s.maxLength=h),s.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";s.value=u.userValue=g,u.formattedValue=null});let d=p=>{const{formattedValue:g}=u;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var A;if(u.focused)return;const{target:b}=g;u.userValue&&(b.value=u.userValue),u.lastCommittedValue=b.value,u.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const b={value(A){u.userValue=A.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),A.target.value=u.userValue},formattedValue(A){const{formattedValue:_}=A.detail;u.formattedValue=_,_!=null&&A.target!==document.activeElement&&(A.target.value=_),t.setValue(e,{formattedValue:_})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var R;const{charLimit:_}=A.detail,{target:k}=A;if(_===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",_);let C=u.userValue;!C||C.length<=_||(C=C.slice(0,_),k.value=u.userValue=C,t.setValue(e,{value:C}),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(b,g)}),s.addEventListener("keydown",g=>{var _;u.commitKey=1;let b=-1;if(g.key==="Escape"?b=0:g.key==="Enter"&&!this.data.multiLine?b=2:g.key==="Tab"&&(u.commitKey=3),b===-1)return;const{value:A}=g.target;u.lastCommittedValue!==A&&(u.lastCommittedValue=A,u.userValue=A,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:b,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=d;d=null,s.addEventListener("blur",g=>{var A,_;if(!u.focused||!g.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(u.focused=!1);const{value:b}=g.target;u.userValue=b,u.lastCommittedValue!==b&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),p(g)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",g=>{var I;u.lastCommittedValue=null;const{data:b,target:A}=g,{value:_,selectionStart:k,selectionEnd:C}=A;let R=k,P=C;switch(g.inputType){case"deleteWordBackward":{const N=_.substring(0,k).match(/\w*[^\w]*$/);N&&(R-=N[0].length);break}case"deleteWordForward":{const N=_.substring(k).match(/^[^\w]*\w*/);N&&(P+=N[0].length);break}case"deleteContentBackward":k===C&&(R-=1);break;case"deleteContentForward":k===C&&(P+=1);break}g.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,change:b||"",willCommit:!1,selStart:R,selEnd:P}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/h;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class r5 extends Wa{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class n5 extends Wa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Va.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=kh,r.addEventListener("change",n=>{const{name:l,checked:h}=n.target;for(const c of this._getElementsByName(l,s)){const u=h&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(s,{value:h})}),r.addEventListener("resetform",n=>{const l=e.defaultFieldValue||"Off";n.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",n=>{const l={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(l,n)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],n=>n.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class bm extends Wa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const n of this._getElementsByName(e.fieldName,s))t.setValue(n.id,{value:!1});const r=document.createElement("input");if(Va.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=kh,r.addEventListener("change",n=>{const{name:l,checked:h}=n.target;for(const c of this._getElementsByName(l,s))t.setValue(c.id,{value:!1});t.setValue(s,{value:h})}),r.addEventListener("resetform",n=>{const l=e.defaultFieldValue;n.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const n=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const h={value:c=>{const u=n===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const p=u&&d.id===s;d.domElement&&(d.domElement.checked=p),t.setValue(d.id,{value:p})}}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class a5 extends mm{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class o5 extends Wa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Va.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=kh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const p of i.options)p.selected=p.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,s.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let n=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),n=()=>{u.remove(),i.removeEventListener("input",n),n=null},i.addEventListener("input",n)}const l=u=>{const d=u?"value":"textContent",{options:p,multiple:g}=i;return g?Array.prototype.filter.call(p,b=>b.selected).map(b=>b[d]):p.selectedIndex===-1?null:p[p.selectedIndex][d]};let h=l(!1);const c=u=>{const d=u.target.options;return Array.prototype.map.call(d,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const d={value(p){n==null||n();const g=p.detail.value,b=new Set(Array.isArray(g)?g:[g]);for(const A of i.options)A.selected=b.has(A.value);t.setValue(e,{value:l(!0)}),h=l(!1)},multipleSelection(p){i.multiple=!0},remove(p){const g=i.options,b=p.detail.remove;g[b].selected=!1,i.remove(b),g.length>0&&Array.prototype.findIndex.call(g,_=>_.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:l(!0),items:c(p)}),h=l(!1)},clear(p){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),h=l(!1)},insert(p){const{index:g,displayValue:b,exportValue:A}=p.detail.insert,_=i.children[g],k=document.createElement("option");k.textContent=b,k.value=A,_?_.before(k):i.append(k),t.setValue(e,{value:l(!0),items:c(p)}),h=l(!1)},items(p){const{items:g}=p.detail;for(;i.length!==0;)i.remove(0);for(const b of g){const{displayValue:A,exportValue:_}=b,k=document.createElement("option");k.textContent=A,k.value=_,i.append(k)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:l(!0),items:c(p)}),h=l(!1)},indices(p){const g=new Set(p.detail.indices);for(const b of p.target.options)b.selected=g.has(b.index);t.setValue(e,{value:l(!0)}),h=l(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{var g;const d=l(!0),p=l(!1);t.setValue(e,{value:d}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:p,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Rd extends he{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:he._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new l5({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${v1}${s}`).join(",")),this.container}}var Go,Yc,Kc,$o,ba,ie,pr,Vo,Gl,$l,Uo,mr,ni,gr,Vl,vr,Ul,ya,wa,Nt,oc,Pd,ym,wm,Am,xm,lc,hc,Dd;class l5{constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:r,contentsObj:n,richText:l,parent:h,rect:c,parentRect:u,open:d}){w(this,Nt);w(this,Go,x(this,Nt,Am).bind(this));w(this,Yc,x(this,Nt,Dd).bind(this));w(this,Kc,x(this,Nt,hc).bind(this));w(this,$o,x(this,Nt,lc).bind(this));w(this,ba,null);w(this,ie,null);w(this,pr,null);w(this,Vo,null);w(this,Gl,null);w(this,$l,null);w(this,Uo,null);w(this,mr,!1);w(this,ni,null);w(this,gr,null);w(this,Vl,null);w(this,vr,null);w(this,Ul,null);w(this,ya,null);w(this,wa,!1);var p;v(this,ie,t),v(this,Ul,i),v(this,pr,n),v(this,vr,l),v(this,$l,h),v(this,ba,e),v(this,Vl,c),v(this,Uo,u),v(this,Gl,s),v(this,Vo,w1.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",o(this,$o)),g.addEventListener("mouseenter",o(this,Kc)),g.addEventListener("mouseleave",o(this,Yc)),g.classList.add("popupTriggerArea");for(const g of s)(p=g.container)==null||p.addEventListener("keydown",o(this,Go));o(this,ie).hidden=!0,d&&x(this,Nt,lc).call(this)}render(){if(o(this,ni))return;const t=v(this,ni,document.createElement("div"));if(t.className="popup",o(this,ba)){const r=t.style.outlineColor=et.makeHexColor(...o(this,ba));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=et.makeHexColor(...o(this,ba).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=o(this,Ul),t.append(e),o(this,Vo)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,Vo).valueOf()})),e.append(r)}const i=o(this,Nt,oc);if(i)pm.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(o(this,pr));t.append(r)}o(this,ie).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,n=i.length;r<n;++r){const l=i[r];s.append(document.createTextNode(l)),r<n-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;o(this,ya)||v(this,ya,{contentsObj:o(this,pr),richText:o(this,vr)}),t&&v(this,gr,null),e&&(v(this,vr,x(this,Nt,wm).call(this,e)),v(this,pr,null)),(s=o(this,ni))==null||s.remove(),v(this,ni,null)}resetEdited(){var t;o(this,ya)&&({contentsObj:je(this,pr)._,richText:je(this,vr)._}=o(this,ya),v(this,ya,null),(t=o(this,ni))==null||t.remove(),v(this,ni,null),v(this,gr,null))}forceHide(){v(this,wa,this.isVisible),o(this,wa)&&(o(this,ie).hidden=!0)}maybeShow(){o(this,wa)&&(o(this,ni)||x(this,Nt,hc).call(this),v(this,wa,!1),o(this,ie).hidden=!1)}get isVisible(){return o(this,ie).hidden===!1}}Go=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,$o=new WeakMap,ba=new WeakMap,ie=new WeakMap,pr=new WeakMap,Vo=new WeakMap,Gl=new WeakMap,$l=new WeakMap,Uo=new WeakMap,mr=new WeakMap,ni=new WeakMap,gr=new WeakMap,Vl=new WeakMap,vr=new WeakMap,Ul=new WeakMap,ya=new WeakMap,wa=new WeakMap,Nt=new WeakSet,oc=function(){const t=o(this,vr),e=o(this,pr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&o(this,vr).html||null},Pd=function(){var t,e,s;return((s=(e=(t=o(this,Nt,oc))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},ym=function(){var t,e,s;return((s=(e=(t=o(this,Nt,oc))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},wm=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:o(this,Nt,ym),fontSize:o(this,Nt,Pd)?`calc(${o(this,Nt,Pd)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return s},Am=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&o(this,mr))&&x(this,Nt,lc).call(this)},xm=function(){if(o(this,gr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:i,pageY:r}}}=o(this,$l);let n=!!o(this,Uo),l=n?o(this,Uo):o(this,Vl);for(const b of o(this,Gl))if(!l||et.intersect(b.data.rect,l)!==null){l=b.data.rect,n=!0;break}const h=et.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),u=n?l[2]-l[0]+5:0,d=h[0]+u,p=h[1];v(this,gr,[100*(d-i)/e,100*(p-r)/s]);const{style:g}=o(this,ie);g.left=`${o(this,gr)[0]}%`,g.top=`${o(this,gr)[1]}%`},lc=function(){v(this,mr,!o(this,mr)),o(this,mr)?(x(this,Nt,hc).call(this),o(this,ie).addEventListener("click",o(this,$o)),o(this,ie).addEventListener("keydown",o(this,Go))):(x(this,Nt,Dd).call(this),o(this,ie).removeEventListener("click",o(this,$o)),o(this,ie).removeEventListener("keydown",o(this,Go)))},hc=function(){o(this,ni)||this.render(),this.isVisible?o(this,mr)&&o(this,ie).classList.add("focused"):(x(this,Nt,xm).call(this),o(this,ie).hidden=!1,o(this,ie).style.zIndex=parseInt(o(this,ie).style.zIndex)+1e3)},Dd=function(){o(this,ie).classList.remove("focused"),!(o(this,mr)||!this.isVisible)&&(o(this,ie).hidden=!0,o(this,ie).style.zIndex=parseInt(o(this,ie).style.zIndex)-1e3)};class Sm extends he{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ft.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Wl;class h5 extends he{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Wl,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:s,height:i}=yn(e.rect),r=this.svgFactory.create(s,i,!0),n=v(this,Wl,this.svgFactory.createElement("svg:line"));return n.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),n.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),n.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),n.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),n.setAttribute("stroke-width",e.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),r.append(n),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Wl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wl=new WeakMap;var jl;class c5 extends he{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,jl,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:s,height:i}=yn(e.rect),r=this.svgFactory.create(s,i,!0),n=e.borderStyle.width,l=v(this,jl,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",n/2),l.setAttribute("y",n/2),l.setAttribute("width",s-n),l.setAttribute("height",i-n),l.setAttribute("stroke-width",n||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,jl)}addHighlightArea(){this.container.classList.add("highlightArea")}}jl=new WeakMap;var Xl;class u5 extends he{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Xl,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:s,height:i}=yn(e.rect),r=this.svgFactory.create(s,i,!0),n=e.borderStyle.width,l=v(this,Xl,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",i/2),l.setAttribute("rx",s/2-n/2),l.setAttribute("ry",i/2-n/2),l.setAttribute("stroke-width",n||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Xl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xl=new WeakMap;var Yl;class km extends he{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Yl,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:n,height:l}=yn(e),h=this.svgFactory.create(n,l,!0);let c=[];for(let d=0,p=s.length;d<p;d+=2){const g=s[d]-e[0],b=e[3]-s[d+1];c.push(`${g},${b}`)}c=c.join(" ");const u=v(this,Yl,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),h.append(u),this.container.append(h),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Yl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yl=new WeakMap;class d5 extends km{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class f5 extends he{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Kl,Aa,Zl,Id;class _1 extends he{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Zl);w(this,Kl,null);w(this,Aa,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ft.HIGHLIGHT:ft.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:i,borderStyle:r,popupRef:n}}=this,{transform:l,width:h,height:c}=x(this,Zl,Id).call(this,s,e),u=this.svgFactory.create(h,c,!0),d=v(this,Kl,this.svgFactory.createElement("svg:g"));u.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let p=0,g=i.length;p<g;p++){const b=this.svgFactory.createElement(this.svgElementName);o(this,Aa).push(b),b.setAttribute("points",i[p].join(",")),d.append(b)}return!n&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:i,rect:r}=e,n=o(this,Kl);if(s>=0&&n.setAttribute("stroke-width",s||1),i)for(let l=0,h=o(this,Aa).length;l<h;l++)o(this,Aa)[l].setAttribute("points",i[l].join(","));if(r){const{transform:l,width:h,height:c}=x(this,Zl,Id).call(this,this.data.rotation,r);n.parentElement.setAttribute("viewBox",`0 0 ${h} ${c}`),n.setAttribute("transform",l)}}getElementsToTriggerPopup(){return o(this,Aa)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kl=new WeakMap,Aa=new WeakMap,Zl=new WeakSet,Id=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class _m extends he{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ft.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class p5 extends he{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class m5 extends he{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class g5 extends he{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Tm extends he{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ft.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ql,Jl,Ld;class v5 extends he{constructor(e){var i;super(e,{isRenderable:!0});w(this,Jl);w(this,Ql,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",x(this,Jl,Ld).bind(this)),v(this,Ql,i);const{isMac:r}=es.platform;return e.addEventListener("keydown",n=>{n.key==="Enter"&&(r?n.metaKey:n.ctrlKey)&&x(this,Jl,Ld).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return o(this,Ql)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ql=new WeakMap,Jl=new WeakSet,Ld=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var th,xa,Sa,eh,Ua,Em,Nd;class b5{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:n,structTreeLayer:l}){w(this,Ua);w(this,th,null);w(this,xa,null);w(this,Sa,new Map);w(this,eh,null);this.div=t,v(this,th,e),v(this,xa,s),v(this,eh,l||null),this.page=r,this.viewport=n,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return o(this,Sa).size>0}async render(t){var n;const{annotations:e}=t,s=this.div;Ga(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new k1,annotationStorage:t.annotationStorage||new x1,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const h=l.annotationType===ge.POPUP;if(h){const d=i.get(l.id);if(!d)continue;r.elements=d}else{const{width:d,height:p}=yn(l.rect);if(d<=0||p<=0)continue}r.data=l;const c=e5.create(r);if(!c.isRenderable)continue;if(!h&&l.popupRef){const d=i.get(l.popupRef);d?d.push(c):i.set(l.popupRef,[c])}const u=c.render();l.hidden&&(u.style.visibility="hidden"),await x(this,Ua,Em).call(this,u,l.id),c._isEditable&&(o(this,Sa).set(c.data.id,c),(n=this._annotationEditorUIManager)==null||n.renderAnnotationElement(c))}x(this,Ua,Nd).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Ga(e,{rotation:t.rotation}),x(this,Ua,Nd).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(o(this,Sa).values())}getEditableAnnotation(t){return o(this,Sa).get(t)}}th=new WeakMap,xa=new WeakMap,Sa=new WeakMap,eh=new WeakMap,Ua=new WeakSet,Em=async function(t,e){var n,l;const s=t.firstChild||t,i=s.id=`${v1}${e}`,r=await((n=o(this,eh))==null?void 0:n.getAriaAttributes(i));if(r)for(const[h,c]of r)s.setAttribute(h,c);this.div.append(t),(l=o(this,th))==null||l.moveElementInDOM(this.div,t,s,!1)},Nd=function(){if(!o(this,xa))return;const t=this.div;for(const[e,s]of o(this,xa)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}o(this,xa).clear()};const Fh=/\r\n?|\n/g;var ai,As,sh,ka,xs,fe,Cm,Mm,Rm,cc,Mr,uc,dc,Pm,Od,Dm;const Ht=class Ht extends ee{constructor(e){super({...e,name:"freeTextEditor"});w(this,fe);w(this,ai);w(this,As,"");w(this,sh,`${this.id}-editor`);w(this,ka,null);w(this,xs);v(this,ai,e.color||Ht._defaultColor||ee._defaultLineColor),v(this,xs,e.fontSize||Ht._defaultFontSize)}static get _keyboardManager(){const e=Ht.prototype,s=n=>n.isEmpty(),i=$a.TRANSLATE_SMALL,r=$a.TRANSLATE_BIG;return yt(this,"_keyboardManager",new Sh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){ee.initialize(e,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case xt.FREETEXT_SIZE:Ht._defaultFontSize=s;break;case xt.FREETEXT_COLOR:Ht._defaultColor=s;break}}updateParams(e,s){switch(e){case xt.FREETEXT_SIZE:x(this,fe,Cm).call(this,s);break;case xt.FREETEXT_COLOR:x(this,fe,Mm).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[xt.FREETEXT_SIZE,Ht._defaultFontSize],[xt.FREETEXT_COLOR,Ht._defaultColor||ee._defaultLineColor]]}get propertiesToUpdate(){return[[xt.FREETEXT_SIZE,o(this,xs)],[xt.FREETEXT_COLOR,o(this,ai)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ht._internalPadding*e,-(Ht._internalPadding+o(this,xs))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ft.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),v(this,ka,new AbortController);const e=this._uiManager.combinedSignal(o(this,ka));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,sh)),this._isDraggable=!0,(e=o(this,ka))==null||e.abort(),v(this,ka,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=o(this,As),s=v(this,As,x(this,fe,Rm).call(this).trimEnd());if(e===s)return;const i=r=>{if(v(this,As,r),!r){this.remove();return}x(this,fe,dc).call(this),this._uiManager.rebuild(this),x(this,fe,cc).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(e)},mustExec:!1}),x(this,fe,cc).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ht._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;this.width&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,sh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${o(this,xs)}px * var(--scale-factor))`,i.color=o(this,ai),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),_c(this,this.div,["dblclick","keydown"]),this.width){const[r,n]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[h,c]=this.getInitialTranslation();[h,c]=this.pageTranslationToScreen(h,c);const[u,d]=this.pageDimensions,[p,g]=this.pageTranslation;let b,A;switch(this.rotation){case 0:b=e+(l[0]-p)/u,A=s+this.height-(l[1]-g)/d;break;case 90:b=e+(l[0]-p)/u,A=s-(l[1]-g)/d,[h,c]=[c,-h];break;case 180:b=e-this.width+(l[0]-p)/u,A=s-(l[1]-g)/d,[h,c]=[-h,-c];break;case 270:b=e+(l[0]-p-this.height*d)/u,A=s+(l[1]-g-this.width*u)/d,[h,c]=[-c,h];break}this.setAt(b*r,A*n,h,c)}else this.setAt(e*r,s*n,this.width*r,this.height*n);x(this,fe,dc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,A,_;const s=e.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=x(b=Ht,Mr,Od).call(b,s.getData("text")||"").replaceAll(Fh,`
`);if(!r)return;const n=window.getSelection();if(!n.rangeCount)return;this.editorDiv.normalize(),n.deleteFromDocument();const l=n.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),n.collapseToStart();return}const{startContainer:h,startOffset:c}=l,u=[],d=[];if(h.nodeType===Node.TEXT_NODE){const k=h.parentElement;if(d.push(h.nodeValue.slice(c).replaceAll(Fh,"")),k!==this.editorDiv){let C=u;for(const R of this.editorDiv.childNodes){if(R===k){C=d;continue}C.push(x(A=Ht,Mr,uc).call(A,R))}}u.push(h.nodeValue.slice(0,c).replaceAll(Fh,""))}else if(h===this.editorDiv){let k=u,C=0;for(const R of this.editorDiv.childNodes)C++===c&&(k=d),k.push(x(_=Ht,Mr,uc).call(_,R))}v(this,As,`${u.join(`
`)}${r}${d.join(`
`)}`),x(this,fe,dc).call(this);const p=new Range;let g=u.reduce((k,C)=>k+C.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const C=k.nodeValue.length;if(g<=C){p.setStart(k,g),p.setEnd(k,g);break}g-=C}n.removeAllRanges(),n.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,i){var l;let r=null;if(e instanceof Sm){const{data:{defaultAppearanceData:{fontSize:h,fontColor:c},rect:u,rotation:d,id:p,popupRef:g},textContent:b,textPosition:A,parent:{page:{pageNumber:_}}}=e;if(!b||b.length===0)return null;r=e={annotationType:ft.FREETEXT,color:Array.from(c),fontSize:h,value:b.join(`
`),position:A,pageIndex:_-1,rect:u.slice(0),rotation:d,id:p,deleted:!1,popupRef:g}}const n=await super.deserialize(e,s,i);return v(n,xs,e.fontSize),v(n,ai,et.makeHexColor(...e.color)),v(n,As,x(l=Ht,Mr,Od).call(l,e.value)),n.annotationElementId=e.id||null,n._initialData=r,n}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Ht._internalPadding*this.parentScale,i=this.getRect(s,s),r=ee._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,ai)),n={annotationType:ft.FREETEXT,color:r,fontSize:o(this,xs),value:x(this,fe,Pm).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?n:this.annotationElementId&&!x(this,fe,Dm).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${o(this,xs)}px * var(--scale-factor))`,i.color=o(this,ai),s.replaceChildren();for(const n of o(this,As).split(`
`)){const l=document.createElement("div");l.append(n?document.createTextNode(n):document.createElement("br")),s.append(l)}const r=Ht._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:o(this,As)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ai=new WeakMap,As=new WeakMap,sh=new WeakMap,ka=new WeakMap,xs=new WeakMap,fe=new WeakSet,Cm=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-o(this,xs))*this.parentScale),v(this,xs,r),x(this,fe,cc).call(this)},i=o(this,xs);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Mm=function(e){const s=r=>{v(this,ai,this.editorDiv.style.color=r)},i=o(this,ai);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Rm=function(){var i;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(x(i=Ht,Mr,uc).call(i,r)),s=r);return e.join(`
`)},cc=function(){const[e,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:n}=this,l=n.style.display,h=n.classList.contains("hidden");n.classList.remove("hidden"),n.style.display="hidden",r.div.append(this.div),i=n.getBoundingClientRect(),n.remove(),n.style.display=l,n.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/s):(this.width=i.height/e,this.height=i.width/s),this.fixAndSetPosition()},Mr=new WeakSet,uc=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Fh,"")},dc=function(){if(this.editorDiv.replaceChildren(),!!o(this,As))for(const e of o(this,As).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},Pm=function(){return o(this,As).replaceAll(" "," ")},Od=function(e){return e.replaceAll(" "," ")},Dm=function(e){const{value:s,fontSize:i,color:r,pageIndex:n}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==i||e.color.some((l,h)=>l!==r[h])||e.pageIndex!==n},w(Ht,Mr),nt(Ht,"_freeTextDefaultContent",""),nt(Ht,"_internalPadding",0),nt(Ht,"_defaultColor",null),nt(Ht,"_defaultFontSize",10),nt(Ht,"_type","freetext"),nt(Ht,"_editorType",ft.FREETEXT);let Fd=Ht;class K{toSVGPath(){zt("Abstract method `toSVGPath` must be implemented.")}get box(){zt("Abstract getter `box` must be implemented.")}serialize(t,e){zt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,i,r,n){n||(n=new Float32Array(t.length));for(let l=0,h=t.length;l<h;l+=2)n[l]=e+t[l]*i,n[l+1]=s+t[l+1]*r;return n}static _rescaleAndSwap(t,e,s,i,r,n){n||(n=new Float32Array(t.length));for(let l=0,h=t.length;l<h;l+=2)n[l]=e+t[l+1]*i,n[l+1]=s+t[l]*r;return n}static _translate(t,e,s,i){i||(i=new Float32Array(t.length));for(let r=0,n=t.length;r<n;r+=2)i[r]=e+t[r],i[r+1]=s+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,i,r){switch(r){case 90:return[1-e/s,t/i];case 180:return[1-t/s,1-e/i];case 270:return[e/s,1-t/i];default:return[t/s,e/i]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,i,r,n){return[(t+5*s)/6,(e+5*i)/6,(5*s+r)/6,(5*i+n)/6,(s+r)/2,(i+n)/2]}}nt(K,"PRECISION",1e-4);var Ss,oi,Wo,jo,Pi,bt,_a,Ta,ih,rh,Xo,Yo,on,nh,Zc,Qc,we,F0,Im,Lm,Nm,Fm,Om,zm;const Qi=class Qi{constructor({x:t,y:e},s,i,r,n,l=0){w(this,we);w(this,Ss);w(this,oi,[]);w(this,Wo);w(this,jo);w(this,Pi,[]);w(this,bt,new Float32Array(18));w(this,_a);w(this,Ta);w(this,ih);w(this,rh);w(this,Xo);w(this,Yo);w(this,on,[]);v(this,Ss,s),v(this,Yo,r*i),v(this,jo,n),o(this,bt).set([NaN,NaN,NaN,NaN,t,e],6),v(this,Wo,l),v(this,rh,o(Qi,nh)*i),v(this,ih,o(Qi,Qc)*i),v(this,Xo,i),o(this,on).push(t,e)}isEmpty(){return isNaN(o(this,bt)[8])}add({x:t,y:e}){var q;v(this,_a,t),v(this,Ta,e);const[s,i,r,n]=o(this,Ss);let[l,h,c,u]=o(this,bt).subarray(8,12);const d=t-c,p=e-u,g=Math.hypot(d,p);if(g<o(this,ih))return!1;const b=g-o(this,rh),A=b/g,_=A*d,k=A*p;let C=l,R=h;l=c,h=u,c+=_,u+=k,(q=o(this,on))==null||q.push(t,e);const P=-k/b,I=_/b,N=P*o(this,Yo),L=I*o(this,Yo);return o(this,bt).set(o(this,bt).subarray(2,8),0),o(this,bt).set([c+N,u+L],4),o(this,bt).set(o(this,bt).subarray(14,18),12),o(this,bt).set([c-N,u-L],16),isNaN(o(this,bt)[6])?(o(this,Pi).length===0&&(o(this,bt).set([l+N,h+L],2),o(this,Pi).push(NaN,NaN,NaN,NaN,(l+N-s)/r,(h+L-i)/n),o(this,bt).set([l-N,h-L],14),o(this,oi).push(NaN,NaN,NaN,NaN,(l-N-s)/r,(h-L-i)/n)),o(this,bt).set([C,R,l,h,c,u],6),!this.isEmpty()):(o(this,bt).set([C,R,l,h,c,u],6),Math.abs(Math.atan2(R-h,C-l)-Math.atan2(k,_))<Math.PI/2?([l,h,c,u]=o(this,bt).subarray(2,6),o(this,Pi).push(NaN,NaN,NaN,NaN,((l+c)/2-s)/r,((h+u)/2-i)/n),[l,h,C,R]=o(this,bt).subarray(14,18),o(this,oi).push(NaN,NaN,NaN,NaN,((C+l)/2-s)/r,((R+h)/2-i)/n),!0):([C,R,l,h,c,u]=o(this,bt).subarray(0,6),o(this,Pi).push(((C+5*l)/6-s)/r,((R+5*h)/6-i)/n,((5*l+c)/6-s)/r,((5*h+u)/6-i)/n,((l+c)/2-s)/r,((h+u)/2-i)/n),[c,u,l,h,C,R]=o(this,bt).subarray(12,18),o(this,oi).push(((C+5*l)/6-s)/r,((R+5*h)/6-i)/n,((5*l+c)/6-s)/r,((5*h+u)/6-i)/n,((l+c)/2-s)/r,((h+u)/2-i)/n),!0))}toSVGPath(){if(this.isEmpty())return"";const t=o(this,Pi),e=o(this,oi);if(isNaN(o(this,bt)[6])&&!this.isEmpty())return x(this,we,Im).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);x(this,we,Nm).call(this,s);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return x(this,we,Lm).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,i,r,n){return new Bm(t,e,s,i,r,n)}getOutlines(){var d;const t=o(this,Pi),e=o(this,oi),s=o(this,bt),[i,r,n,l]=o(this,Ss),h=new Float32Array((((d=o(this,on))==null?void 0:d.length)??0)+2);for(let p=0,g=h.length-2;p<g;p+=2)h[p]=(o(this,on)[p]-i)/n,h[p+1]=(o(this,on)[p+1]-r)/l;if(h[h.length-2]=(o(this,_a)-i)/n,h[h.length-1]=(o(this,Ta)-r)/l,isNaN(s[6])&&!this.isEmpty())return x(this,we,Fm).call(this,h);const c=new Float32Array(o(this,Pi).length+24+o(this,oi).length);let u=t.length;for(let p=0;p<u;p+=2){if(isNaN(t[p])){c[p]=c[p+1]=NaN;continue}c[p]=t[p],c[p+1]=t[p+1]}u=x(this,we,zm).call(this,c,u);for(let p=e.length-6;p>=6;p-=6)for(let g=0;g<6;g+=2){if(isNaN(e[p+g])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[p+g],c[u+1]=e[p+g+1],u+=2}return x(this,we,Om).call(this,c,u),this.newFreeDrawOutline(c,h,o(this,Ss),o(this,Xo),o(this,Wo),o(this,jo))}};Ss=new WeakMap,oi=new WeakMap,Wo=new WeakMap,jo=new WeakMap,Pi=new WeakMap,bt=new WeakMap,_a=new WeakMap,Ta=new WeakMap,ih=new WeakMap,rh=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,on=new WeakMap,nh=new WeakMap,Zc=new WeakMap,Qc=new WeakMap,we=new WeakSet,F0=function(){const t=o(this,bt).subarray(4,6),e=o(this,bt).subarray(16,18),[s,i,r,n]=o(this,Ss);return[(o(this,_a)+(t[0]-e[0])/2-s)/r,(o(this,Ta)+(t[1]-e[1])/2-i)/n,(o(this,_a)+(e[0]-t[0])/2-s)/r,(o(this,Ta)+(e[1]-t[1])/2-i)/n]},Im=function(){const[t,e,s,i]=o(this,Ss),[r,n,l,h]=x(this,we,F0).call(this);return`M${(o(this,bt)[2]-t)/s} ${(o(this,bt)[3]-e)/i} L${(o(this,bt)[4]-t)/s} ${(o(this,bt)[5]-e)/i} L${r} ${n} L${l} ${h} L${(o(this,bt)[16]-t)/s} ${(o(this,bt)[17]-e)/i} L${(o(this,bt)[14]-t)/s} ${(o(this,bt)[15]-e)/i} Z`},Lm=function(t){const e=o(this,oi);t.push(`L${e[4]} ${e[5]} Z`)},Nm=function(t){const[e,s,i,r]=o(this,Ss),n=o(this,bt).subarray(4,6),l=o(this,bt).subarray(16,18),[h,c,u,d]=x(this,we,F0).call(this);t.push(`L${(n[0]-e)/i} ${(n[1]-s)/r} L${h} ${c} L${u} ${d} L${(l[0]-e)/i} ${(l[1]-s)/r}`)},Fm=function(t){const e=o(this,bt),[s,i,r,n]=o(this,Ss),[l,h,c,u]=x(this,we,F0).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-i)/n,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-i)/n,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-i)/n,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-i)/n],0),this.newFreeDrawOutline(d,t,o(this,Ss),o(this,Xo),o(this,Wo),o(this,jo))},Om=function(t,e){const s=o(this,oi);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},zm=function(t,e){const s=o(this,bt).subarray(4,6),i=o(this,bt).subarray(16,18),[r,n,l,h]=o(this,Ss),[c,u,d,p]=x(this,we,F0).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-n)/h,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-n)/h],e),e+=24},w(Qi,nh,8),w(Qi,Zc,2),w(Qi,Qc,o(Qi,nh)+o(Qi,Zc));let Cc=Qi;var Ko,Ea,br,ah,ks,oh,oe,Jc,Hm;class Bm extends K{constructor(e,s,i,r,n,l){super();w(this,Jc);w(this,Ko);w(this,Ea,new Float32Array(4));w(this,br);w(this,ah);w(this,ks);w(this,oh);w(this,oe);v(this,oe,e),v(this,ks,s),v(this,Ko,i),v(this,oh,r),v(this,br,n),v(this,ah,l),this.lastPoint=[NaN,NaN],x(this,Jc,Hm).call(this,l);const[h,c,u,d]=o(this,Ea);for(let p=0,g=e.length;p<g;p+=2)e[p]=(e[p]-h)/u,e[p+1]=(e[p+1]-c)/d;for(let p=0,g=s.length;p<g;p+=2)s[p]=(s[p]-h)/u,s[p+1]=(s[p+1]-c)/d}toSVGPath(){const e=[`M${o(this,oe)[4]} ${o(this,oe)[5]}`];for(let s=6,i=o(this,oe).length;s<i;s+=6){if(isNaN(o(this,oe)[s])){e.push(`L${o(this,oe)[s+4]} ${o(this,oe)[s+5]}`);continue}e.push(`C${o(this,oe)[s]} ${o(this,oe)[s+1]} ${o(this,oe)[s+2]} ${o(this,oe)[s+3]} ${o(this,oe)[s+4]} ${o(this,oe)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,i,r],n){const l=i-e,h=r-s;let c,u;switch(n){case 0:c=K._rescale(o(this,oe),e,r,l,-h),u=K._rescale(o(this,ks),e,r,l,-h);break;case 90:c=K._rescaleAndSwap(o(this,oe),e,s,l,h),u=K._rescaleAndSwap(o(this,ks),e,s,l,h);break;case 180:c=K._rescale(o(this,oe),i,s,-l,h),u=K._rescale(o(this,ks),i,s,-l,h);break;case 270:c=K._rescaleAndSwap(o(this,oe),i,r,-l,-h),u=K._rescaleAndSwap(o(this,ks),i,r,-l,-h);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return o(this,Ea)}newOutliner(e,s,i,r,n,l=0){return new Cc(e,s,i,r,n,l)}getNewOutline(e,s){const[i,r,n,l]=o(this,Ea),[h,c,u,d]=o(this,Ko),p=n*u,g=l*d,b=i*u+h,A=r*d+c,_=this.newOutliner({x:o(this,ks)[0]*p+b,y:o(this,ks)[1]*g+A},o(this,Ko),o(this,oh),e,o(this,ah),s??o(this,br));for(let k=2;k<o(this,ks).length;k+=2)_.add({x:o(this,ks)[k]*p+b,y:o(this,ks)[k+1]*g+A});return _.getOutlines()}}Ko=new WeakMap,Ea=new WeakMap,br=new WeakMap,ah=new WeakMap,ks=new WeakMap,oh=new WeakMap,oe=new WeakMap,Jc=new WeakSet,Hm=function(e){const s=o(this,oe);let i=s[4],r=s[5],n=i,l=r,h=i,c=r,u=i,d=r;const p=e?Math.max:Math.min;for(let b=6,A=s.length;b<A;b+=6){if(isNaN(s[b]))n=Math.min(n,s[b+4]),l=Math.min(l,s[b+5]),h=Math.max(h,s[b+4]),c=Math.max(c,s[b+5]),d<s[b+5]?(u=s[b+4],d=s[b+5]):d===s[b+5]&&(u=p(u,s[b+4]));else{const _=et.bezierBoundingBox(i,r,...s.slice(b,b+6));n=Math.min(n,_[0]),l=Math.min(l,_[1]),h=Math.max(h,_[2]),c=Math.max(c,_[3]),d<_[3]?(u=_[2],d=_[3]):d===_[3]&&(u=p(u,_[2]))}i=s[b+4],r=s[b+5]}const g=o(this,Ea);g[0]=n-o(this,br),g[1]=l-o(this,br),g[2]=h-n+2*o(this,br),g[3]=c-l+2*o(this,br),this.lastPoint=[u,d]};var lh,hh,ln,li,is,qm,fc,Gm,$m,Bd;class zd{constructor(t,e=0,s=0,i=!0){w(this,is);w(this,lh);w(this,hh);w(this,ln,[]);w(this,li,[]);let r=1/0,n=-1/0,l=1/0,h=-1/0;const c=10**-4;for(const{x:_,y:k,width:C,height:R}of t){const P=Math.floor((_-e)/c)*c,I=Math.ceil((_+C+e)/c)*c,N=Math.floor((k-e)/c)*c,L=Math.ceil((k+R+e)/c)*c,z=[P,N,L,!0],q=[I,N,L,!1];o(this,ln).push(z,q),r=Math.min(r,P),n=Math.max(n,I),l=Math.min(l,N),h=Math.max(h,L)}const u=n-r+2*s,d=h-l+2*s,p=r-s,g=l-s,b=o(this,ln).at(i?-1:-2),A=[b[0],b[2]];for(const _ of o(this,ln)){const[k,C,R]=_;_[0]=(k-p)/u,_[1]=(C-g)/d,_[2]=(R-g)/d}v(this,lh,new Float32Array([p,g,u,d])),v(this,hh,A)}getOutlines(){o(this,ln).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of o(this,ln))e[3]?(t.push(...x(this,is,Bd).call(this,e)),x(this,is,Gm).call(this,e)):(x(this,is,$m).call(this,e),t.push(...x(this,is,Bd).call(this,e)));return x(this,is,qm).call(this,t)}}lh=new WeakMap,hh=new WeakMap,ln=new WeakMap,li=new WeakMap,is=new WeakSet,qm=function(t){const e=[],s=new Set;for(const n of t){const[l,h,c]=n;e.push([l,h,n],[l,c,n])}e.sort((n,l)=>n[1]-l[1]||n[0]-l[0]);for(let n=0,l=e.length;n<l;n+=2){const h=e[n][2],c=e[n+1][2];h.push(c),c.push(h),s.add(h),s.add(c)}const i=[];let r;for(;s.size>0;){const n=s.values().next().value;let[l,h,c,u,d]=n;s.delete(n);let p=l,g=h;for(r=[l,c],i.push(r);;){let b;if(s.has(u))b=u;else if(s.has(d))b=d;else break;s.delete(b),[l,h,c,u,d]=b,p!==l&&(r.push(p,g,l,g===h?h:c),p=l),g=g===h?c:h}r.push(p,g)}return new y5(i,o(this,lh),o(this,hh))},fc=function(t){const e=o(this,li);let s=0,i=e.length-1;for(;s<=i;){const r=s+i>>1,n=e[r][0];if(n===t)return r;n<t?s=r+1:i=r-1}return i+1},Gm=function([,t,e]){const s=x(this,is,fc).call(this,t);o(this,li).splice(s,0,[t,e])},$m=function([,t,e]){const s=x(this,is,fc).call(this,t);for(let i=s;i<o(this,li).length;i++){const[r,n]=o(this,li)[i];if(r!==t)break;if(r===t&&n===e){o(this,li).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,n]=o(this,li)[i];if(r!==t)break;if(r===t&&n===e){o(this,li).splice(i,1);return}}},Bd=function(t){const[e,s,i]=t,r=[[e,s,i]],n=x(this,is,fc).call(this,i);for(let l=0;l<n;l++){const[h,c]=o(this,li)[l];for(let u=0,d=r.length;u<d;u++){const[,p,g]=r[u];if(!(c<=p||g<=h)){if(p>=h){if(g>c)r[u][1]=c;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=h,g>c&&r.push([e,c,g])}}}return r};var ch,Zo;class y5 extends K{constructor(e,s,i){super();w(this,ch);w(this,Zo);v(this,Zo,e),v(this,ch,s),this.lastPoint=i}toSVGPath(){const e=[];for(const s of o(this,Zo)){let[i,r]=s;e.push(`M${i} ${r}`);for(let n=2;n<s.length;n+=2){const l=s[n],h=s[n+1];l===i?(e.push(`V${h}`),r=h):h===r&&(e.push(`H${l}`),i=l)}e.push("Z")}return e.join(" ")}serialize([e,s,i,r],n){const l=[],h=i-e,c=r-s;for(const u of o(this,Zo)){const d=new Array(u.length);for(let p=0;p<u.length;p+=2)d[p]=e+u[p]*h,d[p+1]=r-u[p+1]*c;l.push(d)}return l}get box(){return o(this,ch)}get classNamesForOutlining(){return["highlightOutline"]}}ch=new WeakMap,Zo=new WeakMap;class Hd extends Cc{newFreeDrawOutline(t,e,s,i,r,n){return new w5(t,e,s,i,r,n)}}class w5 extends Bm{newOutliner(t,e,s,i,r,n=0){return new Hd(t,e,s,i,r,n)}}var hi,Ca,Qo,ye,uh,Jo,dh,fh,hn,ci,t0,ph,Lt,qd,Gd,$d,Ln,Vm,Br;const hs=class hs{constructor({editor:t=null,uiManager:e=null}){w(this,Lt);w(this,hi,null);w(this,Ca,null);w(this,Qo);w(this,ye,null);w(this,uh,!1);w(this,Jo,!1);w(this,dh,null);w(this,fh);w(this,hn,null);w(this,ci,null);w(this,t0);var s;t?(v(this,Jo,!1),v(this,t0,xt.HIGHLIGHT_COLOR),v(this,dh,t)):(v(this,Jo,!0),v(this,t0,xt.HIGHLIGHT_DEFAULT_COLOR)),v(this,ci,(t==null?void 0:t._uiManager)||e),v(this,fh,o(this,ci)._eventBus),v(this,Qo,(t==null?void 0:t.color)||((s=o(this,ci))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),o(hs,ph)||v(hs,ph,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return yt(this,"_keyboardManager",new Sh([[["Escape","mac+Escape"],hs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],hs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],hs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],hs.prototype._moveToPrevious],[["Home","mac+Home"],hs.prototype._moveToBeginning],[["End","mac+End"],hs.prototype._moveToEnd]]))}renderButton(){const t=v(this,hi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=o(this,ci)._signal;t.addEventListener("click",x(this,Lt,Ln).bind(this),{signal:e}),t.addEventListener("keydown",x(this,Lt,$d).bind(this),{signal:e});const s=v(this,Ca,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=o(this,Qo),t.append(s),t}renderMainDropdown(){const t=v(this,ye,x(this,Lt,qd).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===o(this,hi)){x(this,Lt,Ln).call(this,t);return}const e=t.target.getAttribute("data-color");e&&x(this,Lt,Gd).call(this,e,t)}_moveToNext(t){var e,s;if(!o(this,Lt,Br)){x(this,Lt,Ln).call(this,t);return}if(t.target===o(this,hi)){(e=o(this,ye).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=o(this,ye))==null?void 0:e.firstChild)||t.target===o(this,hi)){o(this,Lt,Br)&&this._hideDropdownFromKeyboard();return}o(this,Lt,Br)||x(this,Lt,Ln).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!o(this,Lt,Br)){x(this,Lt,Ln).call(this,t);return}(e=o(this,ye).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!o(this,Lt,Br)){x(this,Lt,Ln).call(this,t);return}(e=o(this,ye).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=o(this,ye))==null||t.classList.add("hidden"),(e=o(this,hn))==null||e.abort(),v(this,hn,null)}_hideDropdownFromKeyboard(){var t;if(!o(this,Jo)){if(!o(this,Lt,Br)){(t=o(this,dh))==null||t.unselect();return}this.hideDropdown(),o(this,hi).focus({preventScroll:!0,focusVisible:o(this,uh)})}}updateColor(t){if(o(this,Ca)&&(o(this,Ca).style.backgroundColor=t),!o(this,ye))return;const e=o(this,ci).highlightColors.values();for(const s of o(this,ye).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=o(this,hi))==null||t.remove(),v(this,hi,null),v(this,Ca,null),(e=o(this,ye))==null||e.remove(),v(this,ye,null)}};hi=new WeakMap,Ca=new WeakMap,Qo=new WeakMap,ye=new WeakMap,uh=new WeakMap,Jo=new WeakMap,dh=new WeakMap,fh=new WeakMap,hn=new WeakMap,ci=new WeakMap,t0=new WeakMap,ph=new WeakMap,Lt=new WeakSet,qd=function(){const t=document.createElement("div"),e=o(this,ci)._signal;t.addEventListener("contextmenu",mi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of o(this,ci).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",o(hs,ph)[s]);const n=document.createElement("span");r.append(n),n.className="swatch",n.style.backgroundColor=i,r.setAttribute("aria-selected",i===o(this,Qo)),r.addEventListener("click",x(this,Lt,Gd).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",x(this,Lt,$d).bind(this),{signal:e}),t},Gd=function(t,e){e.stopPropagation(),o(this,fh).dispatch("switchannotationeditorparams",{source:this,type:o(this,t0),value:t})},$d=function(t){hs._keyboardManager.exec(this,t)},Ln=function(t){if(o(this,Lt,Br)){this.hideDropdown();return}if(v(this,uh,t.detail===0),o(this,hn)||(v(this,hn,new AbortController),window.addEventListener("pointerdown",x(this,Lt,Vm).bind(this),{signal:o(this,ci).combinedSignal(o(this,hn))})),o(this,ye)){o(this,ye).classList.remove("hidden");return}const e=v(this,ye,x(this,Lt,qd).call(this));o(this,hi).append(e)},Vm=function(t){var e;(e=o(this,ye))!=null&&e.contains(t.target)||this.hideDropdown()},Br=function(){return o(this,ye)&&!o(this,ye).classList.contains("hidden")},w(hs,ph,null);let Mc=hs;var e0,mh,yr,Ma,s0,ds,gh,vh,Ra,qs,_s,Le,i0,wr,$e,r0,Gs,bh,dt,Vd,pc,Um,Wm,jm,Ud,Nn,Ws,io,Xm,mc,O0,Ym,Km,Zm,Qm,Jm;const Mt=class Mt extends ee{constructor(e){super({...e,name:"highlightEditor"});w(this,dt);w(this,e0,null);w(this,mh,0);w(this,yr);w(this,Ma,null);w(this,s0,null);w(this,ds,null);w(this,gh,null);w(this,vh,0);w(this,Ra,null);w(this,qs,null);w(this,_s,null);w(this,Le,!1);w(this,i0,null);w(this,wr);w(this,$e,null);w(this,r0,"");w(this,Gs);w(this,bh,"");this.color=e.color||Mt._defaultColor,v(this,Gs,e.thickness||Mt._defaultThickness),v(this,wr,e.opacity||Mt._defaultOpacity),v(this,yr,e.boxes||null),v(this,bh,e.methodOfCreation||""),v(this,r0,e.text||""),this._isDraggable=!1,e.highlightId>-1?(v(this,Le,!0),x(this,dt,pc).call(this,e),x(this,dt,Nn).call(this)):o(this,yr)&&(v(this,e0,e.anchorNode),v(this,mh,e.anchorOffset),v(this,gh,e.focusNode),v(this,vh,e.focusOffset),x(this,dt,Vd).call(this),x(this,dt,Nn).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Mt.prototype;return yt(this,"_keyboardManager",new Sh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,Le)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,Gs),methodOfCreation:o(this,bh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var i;ee.initialize(e,s),Mt._defaultColor||(Mt._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case xt.HIGHLIGHT_DEFAULT_COLOR:Mt._defaultColor=s;break;case xt.HIGHLIGHT_THICKNESS:Mt._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return o(this,i0)}updateParams(e,s){switch(e){case xt.HIGHLIGHT_COLOR:x(this,dt,Um).call(this,s);break;case xt.HIGHLIGHT_THICKNESS:x(this,dt,Wm).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[xt.HIGHLIGHT_DEFAULT_COLOR,Mt._defaultColor],[xt.HIGHLIGHT_THICKNESS,Mt._defaultThickness]]}get propertiesToUpdate(){return[[xt.HIGHLIGHT_COLOR,this.color||Mt._defaultColor],[xt.HIGHLIGHT_THICKNESS,o(this,Gs)||Mt._defaultThickness],[xt.HIGHLIGHT_FREE,o(this,Le)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(v(this,s0,new Mc({editor:this})),e.addColorPicker(o(this,s0))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,dt,O0).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,x(this,dt,O0).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){x(this,dt,Ud).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,dt,Nn).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?x(this,dt,Ud).call(this):e&&(x(this,dt,Nn).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,n,l;const{drawLayer:s}=this.parent;let i;o(this,Le)?(e=(e-this.rotation+360)%360,i=x(r=Mt,Ws,io).call(r,o(this,qs).box,e)):i=x(n=Mt,Ws,io).call(n,[this.x,this.y,this.width,this.height],e),s.updateProperties(o(this,_s),{bbox:i,root:{"data-main-rotation":e}}),s.updateProperties(o(this,$e),{bbox:x(l=Mt,Ws,io).call(l,o(this,ds).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();o(this,r0)&&(e.setAttribute("aria-label",o(this,r0)),e.setAttribute("role","mark")),o(this,Le)?e.classList.add("free"):this.div.addEventListener("keydown",x(this,dt,Xm).bind(this),{signal:this._uiManager._signal});const s=v(this,Ra,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=o(this,Ma);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),_c(this,o(this,Ra),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,$e),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,$e),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:x(this,dt,mc).call(this,!0);break;case 1:case 3:x(this,dt,mc).call(this,!1);break}}select(){var e;super.select(),o(this,$e)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,$e),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),o(this,$e)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,$e),{rootClass:{selected:!1}}),o(this,Le)||x(this,dt,mc).call(this,!1))}get _mustFixPosition(){return!o(this,Le)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(o(this,_s),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(o(this,$e),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:i,x:r,y:n}){const{x:l,y:h,width:c,height:u}=i.getBoundingClientRect(),d=new AbortController,p=e.combinedSignal(d),g=b=>{d.abort(),x(this,Ws,Qm).call(this,e,b)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",Ps,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",mi,{signal:p}),i.addEventListener("pointermove",x(this,Ws,Zm).bind(this,e),{signal:p}),this._freeHighlight=new Hd({x:r,y:n},[l,h,c,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,i){var A,_,k,C;let r=null;if(e instanceof _m){const{data:{quadPoints:R,rect:P,rotation:I,id:N,color:L,opacity:z,popupRef:q},parent:{page:{pageNumber:st}}}=e;r=e={annotationType:ft.HIGHLIGHT,color:Array.from(L),opacity:z,quadPoints:R,boxes:null,pageIndex:st-1,rect:P.slice(0),rotation:I,id:N,deleted:!1,popupRef:q}}else if(e instanceof _1){const{data:{inkLists:R,rect:P,rotation:I,id:N,color:L,borderStyle:{rawWidth:z},popupRef:q},parent:{page:{pageNumber:st}}}=e;r=e={annotationType:ft.HIGHLIGHT,color:Array.from(L),thickness:z,inkLists:R,boxes:null,pageIndex:st-1,rect:P.slice(0),rotation:I,id:N,deleted:!1,popupRef:q}}const{color:n,quadPoints:l,inkLists:h,opacity:c}=e,u=await super.deserialize(e,s,i);u.color=et.makeHexColor(...n),v(u,wr,c||1),h&&v(u,Gs,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[d,p]=u.pageDimensions,[g,b]=u.pageTranslation;if(l){const R=v(u,yr,[]);for(let P=0;P<l.length;P+=8)R.push({x:(l[P]-g)/d,y:1-(l[P+1]-b)/p,width:(l[P+2]-l[P])/d,height:(l[P+1]-l[P+5])/p});x(A=u,dt,Vd).call(A),x(_=u,dt,Nn).call(_),u.rotate(u.rotation)}else if(h){v(u,Le,!0);const R=h[0],P={x:R[0]-g,y:p-(R[1]-b)},I=new Hd(P,[0,0,d,p],1,o(u,Gs)/2,!0,.001);for(let z=0,q=R.length;z<q;z+=2)P.x=R[z]-g,P.y=p-(R[z+1]-b),I.add(P);const{id:N,clipPathId:L}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);x(k=u,dt,pc).call(k,{highlightOutlines:I.getOutlines(),highlightId:N,clipPathId:L}),x(C=u,dt,Nn).call(C)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=ee._colorManager.convert(this.color),r={annotationType:ft.HIGHLIGHT,color:i,opacity:o(this,wr),thickness:o(this,Gs),quadPoints:x(this,dt,Ym).call(this),outlines:x(this,dt,Km).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:x(this,dt,O0).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,dt,Jm).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};e0=new WeakMap,mh=new WeakMap,yr=new WeakMap,Ma=new WeakMap,s0=new WeakMap,ds=new WeakMap,gh=new WeakMap,vh=new WeakMap,Ra=new WeakMap,qs=new WeakMap,_s=new WeakMap,Le=new WeakMap,i0=new WeakMap,wr=new WeakMap,$e=new WeakMap,r0=new WeakMap,Gs=new WeakMap,bh=new WeakMap,dt=new WeakSet,Vd=function(){const e=new zd(o(this,yr),.001);v(this,qs,e.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,qs).box;const s=new zd(o(this,yr),.0025,.001,this._uiManager.direction==="ltr");v(this,ds,s.getOutlines());const{lastPoint:i}=o(this,ds);v(this,i0,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},pc=function({highlightOutlines:e,highlightId:s,clipPathId:i}){var d,p;if(v(this,qs,e),v(this,ds,e.getNewOutline(o(this,Gs)/2+1.5,.0025)),s>=0)v(this,_s,s),v(this,Ma,i),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),v(this,$e,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,ds).box,path:{d:o(this,ds).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,_s),{bbox:x(d=Mt,Ws,io).call(d,o(this,qs).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,$e),{bbox:x(p=Mt,Ws,io).call(p,o(this,ds).box,g),path:{d:o(this,ds).toSVGPath()}})}const[n,l,h,c]=e.box;switch(this.rotation){case 0:this.x=n,this.y=l,this.width=h,this.height=c;break;case 90:{const[g,b]=this.parentDimensions;this.x=l,this.y=1-n,this.width=h*b/g,this.height=c*g/b;break}case 180:this.x=1-n,this.y=1-l,this.width=h,this.height=c;break;case 270:{const[g,b]=this.parentDimensions;this.x=1-l,this.y=n,this.width=h*b/g,this.height=c*g/b;break}}const{lastPoint:u}=o(this,ds);v(this,i0,[(u[0]-n)/h,(u[1]-l)/c])},Um=function(e){const s=(n,l)=>{var h,c;this.color=n,v(this,wr,l),(h=this.parent)==null||h.drawLayer.updateProperties(o(this,_s),{root:{fill:n,"fill-opacity":l}}),(c=o(this,s0))==null||c.updateColor(n)},i=this.color,r=o(this,wr);this.addCommands({cmd:s.bind(this,e,Mt._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Wm=function(e){const s=o(this,Gs),i=r=>{v(this,Gs,r),x(this,dt,jm).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},jm=function(e){if(!o(this,Le))return;x(this,dt,pc).call(this,{highlightOutlines:o(this,qs).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},Ud=function(){o(this,_s)===null||!this.parent||(this.parent.drawLayer.remove(o(this,_s)),v(this,_s,null),this.parent.drawLayer.remove(o(this,$e)),v(this,$e,null))},Nn=function(e=this.parent){o(this,_s)===null&&({id:je(this,_s)._,clipPathId:je(this,Ma)._}=e.drawLayer.draw({bbox:o(this,qs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":o(this,wr)},rootClass:{highlight:!0,free:o(this,Le)},path:{d:o(this,qs).toSVGPath()}},!1,!0),v(this,$e,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,Le)},bbox:o(this,ds).box,path:{d:o(this,ds).toSVGPath()}},o(this,Le))),o(this,Ra)&&(o(this,Ra).style.clipPath=o(this,Ma)))},Ws=new WeakSet,io=function([e,s,i,r],n){switch(n){case 90:return[1-s-r,e,r,i];case 180:return[1-e-i,1-s-r,i,r];case 270:return[s,1-e-i,r,i]}return[e,s,i,r]},Xm=function(e){Mt._keyboardManager.exec(this,e)},mc=function(e){if(!o(this,e0))return;const s=window.getSelection();e?s.setPosition(o(this,e0),o(this,mh)):s.setPosition(o(this,gh),o(this,vh))},O0=function(){return o(this,Le)?this.rotation:0},Ym=function(){if(o(this,Le))return null;const[e,s]=this.pageDimensions,[i,r]=this.pageTranslation,n=o(this,yr),l=new Float32Array(n.length*8);let h=0;for(const{x:c,y:u,width:d,height:p}of n){const g=c*e+i,b=(1-u)*s+r;l[h]=l[h+4]=g,l[h+1]=l[h+3]=b,l[h+2]=l[h+6]=g+d*e,l[h+5]=l[h+7]=b-p*s,h+=8}return l},Km=function(e){return o(this,qs).serialize(e,x(this,dt,O0).call(this))},Zm=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Qm=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Jm=function(e){const{color:s}=this._initialData;return e.color.some((i,r)=>i!==s[r])},w(Mt,Ws),nt(Mt,"_defaultColor",null),nt(Mt,"_defaultOpacity",1),nt(Mt,"_defaultThickness",12),nt(Mt,"_type","highlight"),nt(Mt,"_editorType",ft.HIGHLIGHT),nt(Mt,"_freeHighlightId",-1),nt(Mt,"_freeHighlight",null),nt(Mt,"_freeHighlightClipId","");let Rc=Mt;var Pa;class A5{constructor(){w(this,Pa,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))this.updateProperty(e,s)}updateSVGProperty(t,e){o(this,Pa)[t]=e}toSVGProperties(){const t=o(this,Pa);return v(this,Pa,Object.create(null)),{root:t}}reset(){v(this,Pa,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){zt("Not implemented")}}Pa=new WeakMap;var Ts,n0,Te,Da,Ia,cn,un,dn,La,St,jd,Xd,Yd,z0,t4,gc,B0,ro;const Q=class Q extends ee{constructor(e){super(e);w(this,St);w(this,Ts,null);w(this,n0);nt(this,"_drawId",null);v(this,n0,e.mustBeCommitted||!1),e.drawOutlines&&(x(this,St,jd).call(this,e),x(this,St,z0).call(this))}static _mergeSVGProperties(e,s){const i=new Set(Object.keys(e));for(const[r,n]of Object.entries(s))i.has(r)?Object.assign(e[r],n):e[r]=n;return e}static getDefaultDrawingOptions(e){zt("Not implemented")}static get typesMap(){zt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(o(Q,Te).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,s[r]]);return e}_updateProperty(e,s,i){const r=this._drawingOptions,n=r[s],l=h=>{var u;r.updateProperty(s,h);const c=o(this,Ts).updateProperty(s,h);c&&x(this,St,B0).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(o(this,Ts).getPathResizingSVGProperties(x(this,St,gc).call(this)),{bbox:x(this,St,ro).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(o(this,Ts).getPathResizedSVGProperties(x(this,St,gc).call(this)),{bbox:x(this,St,ro).call(this)}))}_onTranslating(e,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:x(this,St,ro).call(this,e,s)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(o(this,Ts).getPathTranslatedSVGProperties(x(this,St,gc).call(this),this.parentDimensions),{bbox:x(this,St,ro).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,n0)&&(v(this,n0,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){x(this,St,Yd).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,St,z0).call(this),x(this,St,B0).call(this,o(this,Ts).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),x(this,St,Yd).call(this)):e&&(this._uiManager.addShouldRescale(this),x(this,St,z0).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties({bbox:x(this,St,ro).call(this)},o(this,Ts).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&x(this,St,B0).call(this,o(this,Ts).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const s=document.createElement("div");e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,s,i,r,n){zt("Not implemented")}static startDrawing(e,s,i,r){var _;const{target:n,offsetX:l,offsetY:h,pointerId:c,pointerType:u}=r;if(o(Q,un)&&o(Q,un)!==u)return;const{viewport:{rotation:d}}=e,{width:p,height:g}=n.getBoundingClientRect(),b=v(Q,Da,new AbortController),A=e.combinedSignal(b);if(o(Q,cn)||v(Q,cn,c),o(Q,un)??v(Q,un,u),window.addEventListener("pointerup",k=>{var C;o(Q,cn)===k.pointerId?this._endDraw(k):(C=o(Q,dn))==null||C.delete(k.pointerId)},{signal:A}),window.addEventListener("pointercancel",k=>{var C;o(Q,cn)===k.pointerId?this._currentParent.endDrawingSession():(C=o(Q,dn))==null||C.delete(k.pointerId)},{signal:A}),window.addEventListener("pointerdown",k=>{o(Q,un)===k.pointerType&&((o(Q,dn)||v(Q,dn,new Set)).add(k.pointerId),o(Q,Te).isCancellable()&&(o(Q,Te).removeLastElement(),o(Q,Te).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",mi,{signal:A}),n.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),n.addEventListener("touchmove",k=>{k.timeStamp===o(Q,La)&&Ps(k)},{signal:A}),e.toggleDrawing(),(_=s._editorUndoBar)==null||_.hide(),o(Q,Te)){e.drawLayer.updateProperties(this._currentDrawId,o(Q,Te).startNew(l,h,p,g,d));return}s.updateUIForDefaultProperties(this),v(Q,Te,this.createDrawerInstance(l,h,p,g,d)),v(Q,Ia,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(o(Q,Ia).toSVGProperties(),o(Q,Te).defaultSVGProperties),!0,!1)}static _drawMove(e){var n;if(v(Q,La,-1),!o(Q,Te))return;const{offsetX:s,offsetY:i,pointerId:r}=e;if(o(Q,cn)===r){if(((n=o(Q,dn))==null?void 0:n.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(Q,Te).add(s,i)),v(Q,La,e.timeStamp),Ps(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,v(Q,Te,null),v(Q,Ia,null),v(Q,un,null),v(Q,La,NaN)),o(Q,Da)&&(o(Q,Da).abort(),v(Q,Da,null),v(Q,cn,NaN),v(Q,dn,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),e&&s.drawLayer.updateProperties(this._currentDrawId,o(Q,Te).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=o(Q,Te),r=this._currentDrawId,n=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(n))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:xt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(xt.DRAW_STEP),!o(Q,Te).isEmpty()){const{pageDimensions:[i,r],scale:n}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(Q,Te).getOutlines(i*n,r*n,n,this._INNER_MARGIN),drawingOptions:o(Q,Ia),mustBeCommitted:!e});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,i,r,n,l){zt("Not implemented")}static async deserialize(e,s,i){var d,p;const{rawDims:{pageWidth:r,pageHeight:n,pageX:l,pageY:h}}=s.viewport,c=this.deserializeDraw(l,h,r,n,this._INNER_MARGIN,e),u=await super.deserialize(e,s,i);return u.createDrawingOptions(e),x(d=u,St,jd).call(d,{drawOutlines:c}),x(p=u,St,z0).call(p),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[s,i]=this.pageTranslation,[r,n]=this.pageDimensions;return o(this,Ts).serialize([s,i,r,n],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ts=new WeakMap,n0=new WeakMap,Te=new WeakMap,Da=new WeakMap,Ia=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap,La=new WeakMap,St=new WeakSet,jd=function({drawOutlines:e,drawId:s,drawingOptions:i}){v(this,Ts,e),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=x(this,St,Xd).call(this,e,this.parent),x(this,St,B0).call(this,e.box)},Xd=function(e,s){const{id:i}=s.drawLayer.draw(Q._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},Yd=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},z0=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=x(this,St,Xd).call(this,o(this,Ts),e)}},t4=function([e,s,i,r]){const{parentDimensions:[n,l],rotation:h}=this;switch(h){case 90:return[s,1-e,i*(l/n),r*(n/l)];case 180:return[1-e,1-s,i,r];case 270:return[1-s,e,i*(l/n),r*(n/l)];default:return[e,s,i,r]}},gc=function(){const{x:e,y:s,width:i,height:r,parentDimensions:[n,l],rotation:h}=this;switch(h){case 90:return[1-s,e,i*(n/l),r*(l/n)];case 180:return[1-e,1-s,i,r];case 270:return[s,1-e,i*(n/l),r*(l/n)];default:return[e,s,i,r]}},B0=function(e){if([this.x,this.y,this.width,this.height]=x(this,St,t4).call(this,e),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},ro=function(){const{x:e,y:s,width:i,height:r,rotation:n,parentRotation:l,parentDimensions:[h,c]}=this;switch((n*4+l)/90){case 1:return[1-s-r,e,r,i];case 2:return[1-e-i,1-s-r,i,r];case 3:return[s,1-e-i,r,i];case 4:return[e,s-i*(h/c),r*(c/h),i*(h/c)];case 5:return[1-s,e,i*(h/c),r*(c/h)];case 6:return[1-e-r*(c/h),1-s,r*(c/h),i*(h/c)];case 7:return[s-i*(h/c),1-e-r*(c/h),i*(h/c),r*(c/h)];case 8:return[e-i,s-r,i,r];case 9:return[1-s,e-i,r,i];case 10:return[1-e,1-s,i,r];case 11:return[s-r,1-e,r,i];case 12:return[e-r*(c/h),s,r*(c/h),i*(h/c)];case 13:return[1-s-i*(h/c),e-r*(c/h),i*(h/c),r*(c/h)];case 14:return[1-e,1-s-i*(h/c),r*(c/h),i*(h/c)];case 15:return[s,1-e,i*(h/c),r*(c/h)];default:return[e,s,i,r]}},nt(Q,"_currentDrawId",-1),nt(Q,"_currentParent",null),w(Q,Te,null),w(Q,Da,null),w(Q,Ia,null),w(Q,cn,NaN),w(Q,un,null),w(Q,dn,null),w(Q,La,NaN),nt(Q,"_INNER_MARGIN",3);let Wd=Q;var Di,Ee,Ce,Na,a0,Ze,Ne,$s,Fa,Oa,za,o0,vc;class x5{constructor(t,e,s,i,r,n){w(this,o0);w(this,Di,new Float64Array(6));w(this,Ee);w(this,Ce);w(this,Na);w(this,a0);w(this,Ze);w(this,Ne,"");w(this,$s,0);w(this,Fa,new Pc);w(this,Oa);w(this,za);v(this,Oa,s),v(this,za,i),v(this,Na,r),v(this,a0,n),[t,e]=x(this,o0,vc).call(this,t,e);const l=v(this,Ee,[NaN,NaN,NaN,NaN,t,e]);v(this,Ze,[t,e]),v(this,Ce,[{line:l,points:o(this,Ze)}]),o(this,Di).set(l,0)}updateProperty(t,e){t==="stroke-width"&&v(this,a0,e)}isEmpty(){return!o(this,Ce)||o(this,Ce).length===0}isCancellable(){return o(this,Ze).length<=10}add(t,e){[t,e]=x(this,o0,vc).call(this,t,e);const[s,i,r,n]=o(this,Di).subarray(2,6),l=t-r,h=e-n;return Math.hypot(o(this,Oa)*l,o(this,za)*h)<=2?null:(o(this,Ze).push(t,e),isNaN(s)?(o(this,Di).set([r,n,t,e],2),o(this,Ee).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(o(this,Di)[0])&&o(this,Ee).splice(6,6),o(this,Di).set([s,i,r,n,t,e],0),o(this,Ee).push(...K.createBezierPoints(s,i,r,n,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(o(this,Ze).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,i,r){v(this,Oa,s),v(this,za,i),v(this,Na,r),[t,e]=x(this,o0,vc).call(this,t,e);const n=v(this,Ee,[NaN,NaN,NaN,NaN,t,e]);v(this,Ze,[t,e]);const l=o(this,Ce).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),o(this,Ce).push({line:n,points:o(this,Ze)}),o(this,Di).set(n,0),v(this,$s,0),this.toSVGPath(),null}getLastElement(){return o(this,Ce).at(-1)}setLastElement(t){return o(this,Ce)?(o(this,Ce).push(t),v(this,Ee,t.line),v(this,Ze,t.points),v(this,$s,0),{path:{d:this.toSVGPath()}}):o(this,Fa).setLastElement(t)}removeLastElement(){if(!o(this,Ce))return o(this,Fa).removeLastElement();o(this,Ce).pop(),v(this,Ne,"");for(let t=0,e=o(this,Ce).length;t<e;t++){const{line:s,points:i}=o(this,Ce)[t];v(this,Ee,s),v(this,Ze,i),v(this,$s,0),this.toSVGPath()}return{path:{d:o(this,Ne)}}}toSVGPath(){const t=K.svgRound(o(this,Ee)[4]),e=K.svgRound(o(this,Ee)[5]);if(o(this,Ze).length===2)return v(this,Ne,`${o(this,Ne)} M ${t} ${e} Z`),o(this,Ne);if(o(this,Ze).length<=6){const i=o(this,Ne).lastIndexOf("M");v(this,Ne,`${o(this,Ne).slice(0,i)} M ${t} ${e}`),v(this,$s,6)}if(o(this,Ze).length===4){const i=K.svgRound(o(this,Ee)[10]),r=K.svgRound(o(this,Ee)[11]);return v(this,Ne,`${o(this,Ne)} L ${i} ${r}`),v(this,$s,12),o(this,Ne)}const s=[];o(this,$s)===0&&(s.push(`M ${t} ${e}`),v(this,$s,6));for(let i=o(this,$s),r=o(this,Ee).length;i<r;i+=6){const[n,l,h,c,u,d]=o(this,Ee).slice(i,i+6).map(K.svgRound);s.push(`C${n} ${l} ${h} ${c} ${u} ${d}`)}return v(this,Ne,o(this,Ne)+s.join(" ")),v(this,$s,o(this,Ee).length),o(this,Ne)}getOutlines(t,e,s,i){const r=o(this,Ce).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),o(this,Fa).build(o(this,Ce),t,e,s,o(this,Na),o(this,a0),i),v(this,Di,null),v(this,Ee,null),v(this,Ce,null),v(this,Ne,null),o(this,Fa)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Di=new WeakMap,Ee=new WeakMap,Ce=new WeakMap,Na=new WeakMap,a0=new WeakMap,Ze=new WeakMap,Ne=new WeakMap,$s=new WeakMap,Fa=new WeakMap,Oa=new WeakMap,za=new WeakMap,o0=new WeakSet,vc=function(t,e){return K._normalizePoint(t,e,o(this,Oa),o(this,za),o(this,Na))};var Qe,yh,wh,Es,Ii,Li,l0,h0,c0,Oe,Ki,e4,s4,i4;const K1=class K1 extends K{constructor(){super(...arguments);w(this,Oe);w(this,Qe);w(this,yh,0);w(this,wh);w(this,Es);w(this,Ii);w(this,Li);w(this,l0);w(this,h0);w(this,c0)}build(e,s,i,r,n,l,h){v(this,Ii,s),v(this,Li,i),v(this,l0,r),v(this,h0,n),v(this,c0,l),v(this,wh,h??0),v(this,Es,e),x(this,Oe,s4).call(this)}setLastElement(e){return o(this,Es).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,Es).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of o(this,Es)){if(e.push(`M${K.svgRound(s[4])} ${K.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12){e.push(`L${K.svgRound(s[10])} ${K.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[n,l,h,c,u,d]=s.subarray(i,i+6).map(K.svgRound);e.push(`C${n} ${l} ${h} ${c} ${u} ${d}`)}}return e.join("")}serialize([e,s,i,r],n){const l=[],h=[],[c,u,d,p]=x(this,Oe,e4).call(this);let g,b,A,_,k,C,R,P,I;switch(o(this,h0)){case 0:I=K._rescale,g=e,b=s+r,A=i,_=-r,k=e+c*i,C=s+(1-u-p)*r,R=e+(c+d)*i,P=s+(1-u)*r;break;case 90:I=K._rescaleAndSwap,g=e,b=s,A=i,_=r,k=e+u*i,C=s+c*r,R=e+(u+p)*i,P=s+(c+d)*r;break;case 180:I=K._rescale,g=e+i,b=s,A=-i,_=r,k=e+(1-c-d)*i,C=s+u*r,R=e+(1-c)*i,P=s+(u+p)*r;break;case 270:I=K._rescaleAndSwap,g=e+i,b=s+r,A=-i,_=-r,k=e+(1-u-p)*i,C=s+(1-c-d)*r,R=e+(1-u)*i,P=s+(1-c)*r;break}for(const{line:N,points:L}of o(this,Es))l.push(I(N,g,b,A,_,n?new Array(N.length):null)),h.push(I(L,g,b,A,_,n?new Array(L.length):null));return{lines:l,points:h,rect:[k,C,R,P]}}static deserialize(e,s,i,r,n,{paths:{lines:l,points:h},rotation:c,thickness:u}){const d=[];let p,g,b,A,_;switch(c){case 0:_=K._rescale,p=-e/i,g=s/r+1,b=1/i,A=-1/r;break;case 90:_=K._rescaleAndSwap,p=-s/r,g=-e/i,b=1/r,A=1/i;break;case 180:_=K._rescale,p=e/i+1,g=-s/r,b=-1/i,A=1/r;break;case 270:_=K._rescaleAndSwap,p=s/r+1,g=e/i+1,b=-1/r,A=-1/i;break}if(!l){l=[];for(const C of h){const R=C.length;if(R===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(R===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const P=new Float32Array(3*(R-2));l.push(P);let[I,N,L,z]=C.subarray(0,4);P.set([NaN,NaN,NaN,NaN,I,N],0);for(let q=4;q<R;q+=2){const st=C[q],X=C[q+1];P.set(K.createBezierPoints(I,N,L,z,st,X),(q-2)*3),[I,N,L,z]=[L,z,st,X]}}}for(let C=0,R=l.length;C<R;C++)d.push({line:_(l[C].map(P=>P??NaN),p,g,b,A),points:_(h[C].map(P=>P??NaN),p,g,b,A)});const k=new K1;return k.build(d,i,r,1,c,u,n),k}get box(){return o(this,Qe)}updateProperty(e,s){return e==="stroke-width"?x(this,Oe,i4).call(this,s):null}updateParentDimensions([e,s],i){const[r,n]=x(this,Oe,Ki).call(this);v(this,Ii,e),v(this,Li,s),v(this,l0,i);const[l,h]=x(this,Oe,Ki).call(this),c=l-r,u=h-n,d=o(this,Qe);return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateRotation(e){return v(this,yh,e),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,Qe).map(K.svgRound).join(" ")}get defaultProperties(){const[e,s]=o(this,Qe);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${K.svgRound(e)} ${K.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=o(this,Qe);let i=0,r=0,n=0,l=0,h=0,c=0;switch(o(this,yh)){case 90:r=s/e,n=-e/s,h=e;break;case 180:i=-1,l=-1,h=e,c=s;break;case 270:r=-s/e,n=e/s,c=s;break;default:return""}return`matrix(${i} ${r} ${n} ${l} ${K.svgRound(h)} ${K.svgRound(c)})`}getPathResizingSVGProperties([e,s,i,r]){const[n,l]=x(this,Oe,Ki).call(this),[h,c,u,d]=o(this,Qe);if(Math.abs(u-n)<=K.PRECISION||Math.abs(d-l)<=K.PRECISION){const _=e+i/2-(h+u/2),k=s+r/2-(c+d/2);return{path:{"transform-origin":`${K.svgRound(e)} ${K.svgRound(s)}`,transform:`${this.rotationTransform} translate(${_} ${k})`}}}const p=(i-2*n)/(u-2*n),g=(r-2*l)/(d-2*l),b=u/i,A=d/r;return{path:{"transform-origin":`${K.svgRound(h)} ${K.svgRound(c)}`,transform:`${this.rotationTransform} scale(${b} ${A}) translate(${K.svgRound(n)} ${K.svgRound(l)}) scale(${p} ${g}) translate(${K.svgRound(-n)} ${K.svgRound(-l)})`}}}getPathResizedSVGProperties([e,s,i,r]){const[n,l]=x(this,Oe,Ki).call(this),h=o(this,Qe),[c,u,d,p]=h;if(h[0]=e,h[1]=s,h[2]=i,h[3]=r,Math.abs(d-n)<=K.PRECISION||Math.abs(p-l)<=K.PRECISION){const k=e+i/2-(c+d/2),C=s+r/2-(u+p/2);for(const{line:R,points:P}of o(this,Es))K._translate(R,k,C,R),K._translate(P,k,C,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${K.svgRound(e)} ${K.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(i-2*n)/(d-2*n),b=(r-2*l)/(p-2*l),A=-g*(c+n)+e+n,_=-b*(u+l)+s+l;if(g!==1||b!==1||A!==0||_!==0)for(const{line:k,points:C}of o(this,Es))K._rescale(k,A,_,g,b,k),K._rescale(C,A,_,g,b,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${K.svgRound(e)} ${K.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],i){const[r,n]=i,l=o(this,Qe),h=e-l[0],c=s-l[1];if(o(this,Ii)===r&&o(this,Li)===n)for(const{line:u,points:d}of o(this,Es))K._translate(u,h,c,u),K._translate(d,h,c,d);else{const u=o(this,Ii)/r,d=o(this,Li)/n;v(this,Ii,r),v(this,Li,n);for(const{line:p,points:g}of o(this,Es))K._rescale(p,h,c,u,d,p),K._rescale(g,h,c,u,d,g);l[2]*=u,l[3]*=d}return l[0]=e,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${K.svgRound(e)} ${K.svgRound(s)}`}}}get defaultSVGProperties(){const e=o(this,Qe);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${K.svgRound(e[0])} ${K.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};Qe=new WeakMap,yh=new WeakMap,wh=new WeakMap,Es=new WeakMap,Ii=new WeakMap,Li=new WeakMap,l0=new WeakMap,h0=new WeakMap,c0=new WeakMap,Oe=new WeakSet,Ki=function(e=o(this,c0)){const s=o(this,wh)+e/2*o(this,l0);return o(this,h0)%180===0?[s/o(this,Ii),s/o(this,Li)]:[s/o(this,Li),s/o(this,Ii)]},e4=function(){const[e,s,i,r]=o(this,Qe),[n,l]=x(this,Oe,Ki).call(this,0);return[e+n,s+l,i-2*n,r-2*l]},s4=function(){const e=v(this,Qe,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of o(this,Es)){if(r.length<=12){for(let h=4,c=r.length;h<c;h+=6){const[u,d]=r.subarray(h,h+2);e[0]=Math.min(e[0],u),e[1]=Math.min(e[1],d),e[2]=Math.max(e[2],u),e[3]=Math.max(e[3],d)}continue}let n=r[4],l=r[5];for(let h=6,c=r.length;h<c;h+=6){const[u,d,p,g,b,A]=r.subarray(h,h+6);et.bezierBoundingBox(n,l,u,d,p,g,b,A,e),n=b,l=A}}const[s,i]=x(this,Oe,Ki).call(this);e[0]=Math.min(1,Math.max(0,e[0]-s)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+s)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]},i4=function(e){const[s,i]=x(this,Oe,Ki).call(this);v(this,c0,e);const[r,n]=x(this,Oe,Ki).call(this),[l,h]=[r-s,n-i],c=o(this,Qe);return c[0]-=l,c[1]-=h,c[2]+=2*l,c[3]+=2*h,c};let Pc=K1;var u0;const Z1=class Z1 extends A5{constructor(e){super();w(this,u0);v(this,u0,e),super.updateProperties({fill:"none",stroke:ee._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,s){e==="stroke-width"&&(s??(s=this["stroke-width"]),s*=o(this,u0).realScale),super.updateSVGProperty(e,s)}clone(){const e=new Z1(o(this,u0));return e.updateAll(this),e}};u0=new WeakMap;let Kd=Z1;var tu,r4;const ao=class ao extends Wd{constructor(e){super({...e,name:"inkEditor"});w(this,tu);this._willKeepAspectRatio=!0}static initialize(e,s){ee.initialize(e,s),this._defaultDrawingOptions=new Kd(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return yt(this,"typesMap",new Map([[xt.INK_THICKNESS,"stroke-width"],[xt.INK_COLOR,"stroke"],[xt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,i,r,n){return new x5(e,s,i,r,n,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,i,r,n,l){return Pc.deserialize(e,s,i,r,n,l)}static async deserialize(e,s,i){let r=null;if(e instanceof _1){const{data:{inkLists:l,rect:h,rotation:c,id:u,color:d,opacity:p,borderStyle:{rawWidth:g},popupRef:b},parent:{page:{pageNumber:A}}}=e;r=e={annotationType:ft.INK,color:Array.from(d),thickness:g,opacity:p,paths:{points:l},boxes:null,pageIndex:A-1,rect:h.slice(0),rotation:c,id:u,deleted:!1,popupRef:b}}const n=await super.deserialize(e,s,i);return n.annotationElementId=e.id||null,n._initialData=r,n}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:i}){this._drawingOptions=ao.getDefaultDrawingOptions({stroke:et.makeHexColor(...e),"stroke-width":s,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:n,"stroke-opacity":l,"stroke-width":h}}=this,c={annotationType:ft.INK,color:ee._colorManager.convert(n),opacity:l,thickness:h,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!x(this,tu,r4).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const{points:s,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};tu=new WeakSet,r4=function(e){const{color:s,thickness:i,opacity:r,pageIndex:n}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,h)=>l!==s[h])||e.thickness!==i||e.opacity!==r||e.pageIndex!==n},nt(ao,"_type","ink"),nt(ao,"_editorType",ft.INK),nt(ao,"_defaultDrawingOptions",null);let Zd=ao;var Qt,Fe,fn,Ar,pn,d0,Ni,Fi,Cs,f0,Tt,H0,q0,bc,Jd,yc,t1,wc,n4;const U0=class U0 extends ee{constructor(e){super({...e,name:"stampEditor"});w(this,Tt);w(this,Qt,null);w(this,Fe,null);w(this,fn,null);w(this,Ar,null);w(this,pn,null);w(this,d0,"");w(this,Ni,null);w(this,Fi,null);w(this,Cs,!1);w(this,f0,!1);v(this,Ar,e.bitmapUrl),v(this,pn,e.bitmapFile)}static initialize(e,s){ee.initialize(e,s)}static get supportedTypes(){return yt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return yt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,s){s.pasteEditor(ft.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:n,height:l}=e||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:r,width:n,height:l,channels:r.length/(n*l)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const c=h.output;return await this.setGuessedAltText(c),s&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var e;o(this,Fe)&&(v(this,Qt,null),this._uiManager.imageManager.deleteId(o(this,Fe)),(e=o(this,Ni))==null||e.remove(),v(this,Ni,null),o(this,Fi)&&(clearTimeout(o(this,Fi)),v(this,Fi,null))),super.remove()}rebuild(){if(!this.parent){o(this,Fe)&&x(this,Tt,bc).call(this);return}super.rebuild(),this.div!==null&&(o(this,Fe)&&o(this,Ni)===null&&x(this,Tt,bc).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(o(this,fn)||o(this,Qt)||o(this,Ar)||o(this,pn)||o(this,Fe))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;if(this.width&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),o(this,Qt)?x(this,Tt,Jd).call(this):x(this,Tt,bc).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,s*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,Fi)!==null&&clearTimeout(o(this,Fi)),v(this,Fi,setTimeout(()=>{v(this,Fi,null),x(this,Tt,t1).call(this)},200))}copyCanvas(e,s,i=!1){var g;e||(e=224);const{width:r,height:n}=o(this,Qt),l=new Ku;let h=o(this,Qt),c=r,u=n,d=null;if(s){if(r>s||n>s){const z=Math.min(s/r,s/n);c=Math.floor(r*z),u=Math.floor(n*z)}d=document.createElement("canvas");const b=d.width=Math.ceil(c*l.sx),A=d.height=Math.ceil(u*l.sy);o(this,Cs)||(h=x(this,Tt,yc).call(this,b,A));const _=d.getContext("2d");_.filter=this._uiManager.hcmFilter;let k="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",C="#42414d");const R=15,P=R*l.sx,I=R*l.sy,N=new OffscreenCanvas(P*2,I*2),L=N.getContext("2d");L.fillStyle=k,L.fillRect(0,0,P*2,I*2),L.fillStyle=C,L.fillRect(0,0,P,I),L.fillRect(P,I,P,I),_.fillStyle=_.createPattern(N,"repeat"),_.fillRect(0,0,b,A),_.drawImage(h,0,0,h.width,h.height,0,0,b,A)}let p=null;if(i){let b,A;if(l.symmetric&&h.width<e&&h.height<e)b=h.width,A=h.height;else if(h=o(this,Qt),r>e||n>e){const C=Math.min(e/r,e/n);b=Math.floor(r*C),A=Math.floor(n*C),o(this,Cs)||(h=x(this,Tt,yc).call(this,b,A))}const k=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});k.drawImage(h,0,0,h.width,h.height,0,0,b,A),p={width:b,height:A,data:k.getImageData(0,0,b,A).data}}return{canvas:d,width:c,height:u,imageData:p}}getImageForAltText(){return o(this,Ni)}static async deserialize(e,s,i){var A;let r=null;if(e instanceof Tm){const{data:{rect:_,rotation:k,id:C,structParent:R,popupRef:P},container:I,parent:{page:{pageNumber:N}}}=e,L=I.querySelector("canvas"),z=i.imageManager.getFromCanvas(I.id,L);L.remove();const q=((A=await s._structTree.getAriaAttributes(`${v1}${C}`))==null?void 0:A.get("aria-label"))||"";r=e={annotationType:ft.STAMP,bitmapId:z.id,bitmap:z.bitmap,pageIndex:N-1,rect:_.slice(0),rotation:k,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:q},isSvg:!1,structParent:R,popupRef:P}}const n=await super.deserialize(e,s,i),{rect:l,bitmap:h,bitmapUrl:c,bitmapId:u,isSvg:d,accessibilityData:p}=e;u&&i.imageManager.isValidId(u)?(v(n,Fe,u),h&&v(n,Qt,h)):v(n,Ar,c),v(n,Cs,d);const[g,b]=n.pageDimensions;return n.width=(l[2]-l[0])/g,n.height=(l[3]-l[1])/b,n.annotationElementId=e.id||null,p&&(n.altTextData=p),n._initialData=r,v(n,f0,!!r),n}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:ft.STAMP,bitmapId:o(this,Fe),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,Cs),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=x(this,Tt,wc).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:n}=this.serializeAltText(!1);if(!r&&n&&(i.accessibilityData={type:"Figure",alt:n}),this.annotationElementId){const h=x(this,Tt,n4).call(this,i);if(h.isSame)return null;h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const l=o(this,Cs)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(o(this,Fe)))s.stamps.set(o(this,Fe),{area:l,serialized:i}),i.bitmap=x(this,Tt,wc).call(this,!1);else if(o(this,Cs)){const h=s.stamps.get(o(this,Fe));l>h.area&&(h.area=l,h.serialized.bitmap.close(),h.serialized.bitmap=x(this,Tt,wc).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};Qt=new WeakMap,Fe=new WeakMap,fn=new WeakMap,Ar=new WeakMap,pn=new WeakMap,d0=new WeakMap,Ni=new WeakMap,Fi=new WeakMap,Cs=new WeakMap,f0=new WeakMap,Tt=new WeakSet,H0=function(e,s=!1){if(!e){this.remove();return}v(this,Qt,e.bitmap),s||(v(this,Fe,e.id),v(this,Cs,e.isSvg)),e.file&&v(this,d0,e.file.name),x(this,Tt,Jd).call(this)},q0=function(){if(v(this,fn,null),this._uiManager.enableWaiting(!1),!!o(this,Ni)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,Qt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,Qt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},bc=function(){if(o(this,Fe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,Fe)).then(i=>x(this,Tt,H0).call(this,i,!0)).finally(()=>x(this,Tt,q0).call(this));return}if(o(this,Ar)){const i=o(this,Ar);v(this,Ar,null),this._uiManager.enableWaiting(!0),v(this,fn,this._uiManager.imageManager.getFromUrl(i).then(r=>x(this,Tt,H0).call(this,r)).finally(()=>x(this,Tt,q0).call(this)));return}if(o(this,pn)){const i=o(this,pn);v(this,pn,null),this._uiManager.enableWaiting(!0),v(this,fn,this._uiManager.imageManager.getFromFile(i).then(r=>x(this,Tt,H0).call(this,r)).finally(()=>x(this,Tt,q0).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=U0.supportedTypesStr;const s=this._uiManager._signal;v(this,fn,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,Tt,H0).call(this,r)}i()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>x(this,Tt,q0).call(this))),e.click()},Jd=function(){var d;const{div:e}=this;let{width:s,height:i}=o(this,Qt);const[r,n]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,i=this.height*n;else if(s>l*r||i>l*n){const p=Math.min(l*r/s,l*n/i);s*=p,i*=p}const[h,c]=this.parentDimensions;this.setDims(s*h/r,i*c/n),this._uiManager.enableWaiting(!1);const u=v(this,Ni,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=i/n,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),x(this,Tt,t1).call(this),o(this,f0)||(this.parent.addUndoableEditor(this),v(this,f0,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,d0)&&u.setAttribute("aria-label",o(this,d0))},yc=function(e,s){const{width:i,height:r}=o(this,Qt);let n=i,l=r,h=o(this,Qt);for(;n>2*e||l>2*s;){const c=n,u=l;n>2*e&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(n,l);d.getContext("2d").drawImage(h,0,0,c,u,0,0,n,l),h=d.transferToImageBitmap()}return h},t1=function(){const[e,s]=this.parentDimensions,{width:i,height:r}=this,n=new Ku,l=Math.ceil(i*e*n.sx),h=Math.ceil(r*s*n.sy),c=o(this,Ni);if(!c||c.width===l&&c.height===h)return;c.width=l,c.height=h;const u=o(this,Cs)?o(this,Qt):x(this,Tt,yc).call(this,l,h),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,l,h)},wc=function(e){if(e){if(o(this,Cs)){const r=this._uiManager.imageManager.getSvgUrl(o(this,Fe));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=o(this,Qt),s.getContext("2d").drawImage(o(this,Qt),0,0),s.toDataURL()}if(o(this,Cs)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*An.PDF_TO_CSS_UNITS),n=Math.round(this.height*i*An.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,n);return l.getContext("2d").drawImage(o(this,Qt),0,0,o(this,Qt).width,o(this,Qt).height,0,0,r,n),l.transferToImageBitmap()}return structuredClone(o(this,Qt))},n4=function(e){var l;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===s,n=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&n,isSameAltText:n}},nt(U0,"_type","stamp"),nt(U0,"_editorType",ft.STAMP);let Qd=U0;var Ba,p0,Oi,mn,xr,Vs,gn,m0,Ha,ui,Sr,Ve,kr,tt,vn,jt,a4,wi,s1,i1,Ac;const Js=class Js{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:n,drawLayer:l,textLayer:h,viewport:c,l10n:u}){w(this,jt);w(this,Ba);w(this,p0,!1);w(this,Oi,null);w(this,mn,null);w(this,xr,null);w(this,Vs,new Map);w(this,gn,!1);w(this,m0,!1);w(this,Ha,!1);w(this,ui,null);w(this,Sr,null);w(this,Ve,null);w(this,kr,null);w(this,tt);const d=[...o(Js,vn).values()];if(!Js._initialized){Js._initialized=!0;for(const p of d)p.initialize(u,t)}t.registerEditorTypes(d),v(this,tt,t),this.pageIndex=e,this.div=s,v(this,Ba,r),v(this,Oi,n),this.viewport=c,v(this,Ve,h),this.drawLayer=l,this._structTree=i,o(this,tt).addLayer(this)}get isEmpty(){return o(this,Vs).size===0}get isInvisible(){return this.isEmpty&&o(this,tt).getMode()===ft.NONE}updateToolbar(t){o(this,tt).updateToolbar(t)}updateMode(t=o(this,tt).getMode()){switch(x(this,jt,Ac).call(this),t){case ft.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ft.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ft.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of o(Js,vn).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=o(this,Ve))==null?void 0:e.div)}setEditingState(t){o(this,tt).setEditingState(t)}addCommands(t){o(this,tt).addCommands(t)}cleanUndoStack(t){o(this,tt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=o(this,Oi))==null||e.div.classList.toggle("disabled",!t)}async enable(){v(this,Ha,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of o(this,Vs).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(o(this,tt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!o(this,Oi)){v(this,Ha,!1);return}const e=o(this,Oi).getEditableAnnotations();for(const s of e){if(s.hide(),o(this,tt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}v(this,Ha,!1)}disable(){var i;v(this,m0,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of o(this,Vs).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(o(this,Oi)){const r=o(this,Oi).getEditableAnnotations();for(const n of r){const{id:l}=n.data;if(o(this,tt).isDeletedAnnotationElement(l))continue;let h=e.get(l);if(h){h.resetAnnotationElement(n),h.show(!1),n.show();continue}h=t.get(l),h&&(o(this,tt).addChangedExistingAnnotation(h),h.renderAnnotationElement(n)&&h.show(!1)),n.show()}}x(this,jt,Ac).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of o(Js,vn).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),v(this,m0,!1)}getEditableAnnotation(t){var e;return((e=o(this,Oi))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){o(this,tt).getActive()!==t&&o(this,tt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=o(this,Ve))!=null&&t.div&&!o(this,kr)){v(this,kr,new AbortController);const e=o(this,tt).combinedSignal(o(this,kr));o(this,Ve).div.addEventListener("pointerdown",x(this,jt,a4).bind(this),{signal:e}),o(this,Ve).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=o(this,Ve))!=null&&t.div&&o(this,kr)&&(o(this,kr).abort(),v(this,kr,null),o(this,Ve).div.classList.remove("highlighting"))}enableClick(){if(o(this,mn))return;v(this,mn,new AbortController);const t=o(this,tt).combinedSignal(o(this,mn));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=o(this,mn))==null||t.abort(),v(this,mn,null)}attach(t){o(this,Vs).set(t.id,t);const{annotationElementId:e}=t;e&&o(this,tt).isDeletedAnnotationElement(e)&&o(this,tt).removeDeletedAnnotationElement(t)}detach(t){var e;o(this,Vs).delete(t.id),(e=o(this,Ba))==null||e.removePointerInTextLayer(t.contentDiv),!o(this,m0)&&t.annotationElementId&&o(this,tt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),o(this,tt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(o(this,tt).addDeletedAnnotationElement(t.annotationElementId),ee.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),o(this,tt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!o(this,Ha)),o(this,tt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!o(this,xr)&&(t._focusEventsAllowed=!1,v(this,xr,setTimeout(()=>{v(this,xr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:o(this,tt)._signal}),e.focus())},0))),t._structTreeParentId=(s=o(this,Ba))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return o(this,tt).getId()}combinedSignal(t){return o(this,tt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=o(this,jt,wi))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){o(this,tt).updateToolbar(t),o(this,tt).updateMode(t);const{offsetX:s,offsetY:i}=x(this,jt,i1).call(this),r=this.getNextId(),n=x(this,jt,s1).call(this,{parent:this,id:r,x:s,y:i,uiManager:o(this,tt),isCentered:!0,...e});n&&this.add(n)}async deserialize(t){var e;return await((e=o(Js,vn).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,o(this,tt)))||null}createAndAddNewEditor(t,e,s={}){const i=this.getNextId(),r=x(this,jt,s1).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:o(this,tt),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(x(this,jt,i1).call(this),!0)}setSelected(t){o(this,tt).setSelected(t)}toggleSelected(t){o(this,tt).toggleSelected(t)}unselect(t){o(this,tt).unselect(t)}pointerup(t){var s;const{isMac:e}=es.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&o(this,gn)&&(v(this,gn,!1),!((s=o(this,jt,wi))!=null&&s.isDrawer&&o(this,jt,wi).supportMultipleDrawings))){if(!o(this,p0)){v(this,p0,!0);return}if(o(this,tt).getMode()===ft.STAMP){o(this,tt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var i;if(o(this,tt).getMode()===ft.HIGHLIGHT&&this.enableTextSelection(),o(this,gn)){v(this,gn,!1);return}const{isMac:e}=es.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(v(this,gn,!0),(i=o(this,jt,wi))!=null&&i.isDrawer){this.startDrawingSession(t);return}const s=o(this,tt).getActive();v(this,p0,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus(),o(this,ui)){o(this,jt,wi).startDrawing(this,o(this,tt),!1,t);return}o(this,tt).setCurrentDrawingSession(this),v(this,ui,new AbortController);const e=o(this,tt).combinedSignal(o(this,ui));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(v(this,Sr,null),this.commitOrRemove())},{signal:e}),o(this,jt,wi).startDrawing(this,o(this,tt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&v(this,Sr,e);return}o(this,Sr)&&setTimeout(()=>{var e;(e=o(this,Sr))==null||e.focus(),v(this,Sr,null)},0)}endDrawingSession(t=!1){return o(this,ui)?(o(this,tt).setCurrentDrawingSession(null),o(this,ui).abort(),v(this,ui,null),v(this,Sr,null),o(this,jt,wi).endDrawing(t)):null}findNewParent(t,e,s){const i=o(this,tt).findParent(e,s);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return o(this,ui)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,ui)&&o(this,jt,wi).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=o(this,tt).getActive())==null?void 0:t.parent)===this&&(o(this,tt).commitOrRemove(),o(this,tt).setActiveEditor(null)),o(this,xr)&&(clearTimeout(o(this,xr)),v(this,xr,null));for(const s of o(this,Vs).values())(e=o(this,Ba))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,o(this,Vs).clear(),o(this,tt).removeLayer(this)}render({viewport:t}){this.viewport=t,Ga(this.div,t);for(const e of o(this,tt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){o(this,tt).commitOrRemove(),x(this,jt,Ac).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Ga(this.div,{rotation:s}),e!==s)for(const i of o(this,Vs).values())i.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return o(this,tt).viewParameters.realScale}};Ba=new WeakMap,p0=new WeakMap,Oi=new WeakMap,mn=new WeakMap,xr=new WeakMap,Vs=new WeakMap,gn=new WeakMap,m0=new WeakMap,Ha=new WeakMap,ui=new WeakMap,Sr=new WeakMap,Ve=new WeakMap,kr=new WeakMap,tt=new WeakMap,vn=new WeakMap,jt=new WeakSet,a4=function(t){o(this,tt).unselectAll();const{target:e}=t;if(e===o(this,Ve).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&o(this,Ve).div.contains(e)){const{isMac:s}=es.platform;if(t.button!==0||t.ctrlKey&&s)return;o(this,tt).showAllEditors("highlight",!0,!0),o(this,Ve).div.classList.add("free"),this.toggleDrawing(),Rc.startHighlighting(this,o(this,tt).direction==="ltr",{target:o(this,Ve).div,x:t.x,y:t.y}),o(this,Ve).div.addEventListener("pointerup",()=>{o(this,Ve).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,tt)._signal}),t.preventDefault()}},wi=function(){return o(Js,vn).get(o(this,tt).getMode())},s1=function(t){const e=o(this,jt,wi);return e?new e.prototype.constructor(t):null},i1=function(){const{x:t,y:e,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),n=Math.max(0,e),l=Math.min(window.innerWidth,t+s),h=Math.min(window.innerHeight,e+i),c=(r+l)/2-t,u=(n+h)/2-e,[d,p]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:d,offsetY:p}},Ac=function(){for(const t of o(this,Vs).values())t.isEmpty()&&t.remove()},nt(Js,"_initialized",!1),w(Js,vn,new Map([Fd,Zd,Qd,Rc].map(t=>[t._editorType,t])));let e1=Js;var di,Ah,Je,qa,eu,o4,qi,n1,l4,a1;const He=class He{constructor({pageIndex:t}){w(this,qi);w(this,di,null);w(this,Ah,0);w(this,Je,new Map);w(this,qa,new Map);this.pageIndex=t}setParent(t){if(!o(this,di)){v(this,di,t);return}if(o(this,di)!==t){if(o(this,Je).size>0)for(const e of o(this,Je).values())e.remove(),t.append(e);v(this,di,t)}}static get _svgFactory(){return yt(this,"_svgFactory",new k1)}draw(t,e=!1,s=!1){const i=je(this,Ah)._++,r=x(this,qi,n1).call(this),n=He._svgFactory.createElement("defs");r.append(n);const l=He._svgFactory.createElement("path");n.append(l);const h=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke"),e&&o(this,qa).set(i,l);const c=s?x(this,qi,l4).call(this,n,h):null,u=He._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${h}`),this.updateProperties(r,t),o(this,Je).set(i,r),{id:i,clipPathId:`url(#${c})`}}drawOutline(t,e){const s=je(this,Ah)._++,i=x(this,qi,n1).call(this),r=He._svgFactory.createElement("defs");i.append(r);const n=He._svgFactory.createElement("path");r.append(n);const l=`path_p${this.pageIndex}_${s}`;n.setAttribute("id",l),n.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const d=He._svgFactory.createElement("mask");r.append(d),h=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",h),d.setAttribute("maskUnits","objectBoundingBox");const p=He._svgFactory.createElement("rect");d.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const g=He._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${l}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const c=He._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${l}`),h&&c.setAttribute("mask",`url(#${h})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,t),o(this,Je).set(s,i),s}finalizeDraw(t,e){o(this,qa).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:s,bbox:i,rootClass:r,path:n}=e,l=typeof t=="number"?o(this,Je).get(t):t;if(l){if(s&&x(this,qi,a1).call(this,l,s),i&&x(h=He,eu,o4).call(h,l,i),r){const{classList:c}=l;for(const[u,d]of Object.entries(r))c.toggle(u,d)}if(n){const u=l.firstChild.firstChild;x(this,qi,a1).call(this,u,n)}}}updateParent(t,e){if(e===this)return;const s=o(this,Je).get(t);s&&(o(e,di).append(s),o(this,Je).delete(t),o(e,Je).set(t,s))}remove(t){o(this,qa).delete(t),o(this,di)!==null&&(o(this,Je).get(t).remove(),o(this,Je).delete(t))}destroy(){v(this,di,null);for(const t of o(this,Je).values())t.remove();o(this,Je).clear(),o(this,qa).clear()}};di=new WeakMap,Ah=new WeakMap,Je=new WeakMap,qa=new WeakMap,eu=new WeakSet,o4=function(t,[e,s,i,r]){const{style:n}=t;n.top=`${100*s}%`,n.left=`${100*e}%`,n.width=`${100*i}%`,n.height=`${100*r}%`},qi=new WeakSet,n1=function(){const t=He._svgFactory.create(1,1,!0);return o(this,di).append(t),t.setAttribute("aria-hidden",!0),t},l4=function(t,e){const s=He._svgFactory.createElement("clipPath");t.append(s);const i=`clip_${e}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=He._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},a1=function(t,e){for(const[s,i]of Object.entries(e))i===null?t.removeAttribute(s):t.setAttribute(s,i)},w(He,eu);let r1=He;globalThis.pdfjsTestingUtils={HighlightOutliner:zd};var S5=ut.AbortException,k5=ut.AnnotationEditorLayer,_5=ut.AnnotationEditorParamsType,T5=ut.AnnotationEditorType,E5=ut.AnnotationEditorUIManager,C5=ut.AnnotationLayer,M5=ut.AnnotationMode,R5=ut.ColorPicker,P5=ut.DOMSVGFactory,D5=ut.DrawLayer,I5=ut.FeatureTest,h4=ut.GlobalWorkerOptions,L5=ut.ImageKind,N5=ut.InvalidPDFException,F5=ut.MissingPDFException,O5=ut.OPS,z5=ut.OutputScale,B5=ut.PDFDataRangeTransport,H5=ut.PDFDateString,q5=ut.PDFWorker,G5=ut.PasswordResponses,$5=ut.PermissionFlag,V5=ut.PixelsPerInch,U5=ut.RenderingCancelledException,W5=ut.TextLayer,j5=ut.TouchManager,X5=ut.UnexpectedResponseException,Y5=ut.Util,K5=ut.VerbosityLevel,Z5=ut.XfaLayer,Q5=ut.build,J5=ut.createValidAbsoluteUrl,t3=ut.fetchData,c4=ut.getDocument,e3=ut.getFilenameFromUrl,s3=ut.getPdfFilenameFromUrl,i3=ut.getXfaPageViewport,r3=ut.isDataScheme,n3=ut.isPdfFile,a3=ut.noContextMenu,o3=ut.normalizeUnicode,l3=ut.setLayerDimensions,h3=ut.shadow,c3=ut.stopEvent,u4=ut.version;const u3=Object.freeze(Object.defineProperty({__proto__:null,AbortException:S5,AnnotationEditorLayer:k5,AnnotationEditorParamsType:_5,AnnotationEditorType:T5,AnnotationEditorUIManager:E5,AnnotationLayer:C5,AnnotationMode:M5,ColorPicker:R5,DOMSVGFactory:P5,DrawLayer:D5,FeatureTest:I5,GlobalWorkerOptions:h4,ImageKind:L5,InvalidPDFException:N5,MissingPDFException:F5,OPS:O5,OutputScale:z5,PDFDataRangeTransport:B5,PDFDateString:H5,PDFWorker:q5,PasswordResponses:G5,PermissionFlag:$5,PixelsPerInch:V5,RenderingCancelledException:U5,TextLayer:W5,TouchManager:j5,UnexpectedResponseException:X5,Util:Y5,VerbosityLevel:K5,XfaLayer:Z5,build:Q5,createValidAbsoluteUrl:J5,fetchData:t3,getDocument:c4,getFilenameFromUrl:e3,getPdfFilenameFromUrl:s3,getXfaPageViewport:i3,isDataScheme:r3,isPdfFile:n3,noContextMenu:a3,normalizeUnicode:o3,setLayerDimensions:l3,shadow:h3,stopEvent:c3,version:u4},Symbol.toStringTag,{value:"Module"}));class ms{constructor(t,e,s){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=s}static range(t,e){return e?!t||!t.loc||!e.loc||t.loc.lexer!==e.loc.lexer?null:new ms(t.loc.lexer,t.loc.start,e.loc.end):t&&t.loc}}class Is{constructor(t,e){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=e}range(t,e){return new Is(e,ms.range(this,t))}}class H{constructor(t,e){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var s="KaTeX parse error: "+t,i,r,n=e&&e.loc;if(n&&n.start<=n.end){var l=n.lexer.input;i=n.start,r=n.end,i===l.length?s+=" at end of input: ":s+=" at position "+(i+1)+": ";var h=l.slice(i,r).replace(/[^]/g,"$&̲"),c;i>15?c="…"+l.slice(i-15,i):c=l.slice(0,i);var u;r+15<l.length?u=l.slice(r,r+15)+"…":u=l.slice(r),s+=c+h+u}var d=new Error(s);return d.name="ParseError",d.__proto__=H.prototype,d.position=i,i!=null&&r!=null&&(d.length=r-i),d.rawMessage=t,d}}H.prototype.__proto__=Error.prototype;var d3=function(t,e){return t===void 0?e:t},f3=/([A-Z])/g,p3=function(t){return t.replace(f3,"-$1").toLowerCase()},m3={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},g3=/[&><"']/g;function v3(a){return String(a).replace(g3,t=>m3[t])}var d4=function a(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?a(t.body[0]):t:t.type==="font"?a(t.body):t},b3=function(t){var e=d4(t);return e.type==="mathord"||e.type==="textord"||e.type==="atom"},y3=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},w3=function(t){var e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return e?e[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?null:e[1].toLowerCase():"_relative"},_t={deflt:d3,escape:v3,hyphenate:p3,getBaseElem:d4,isCharacterBox:b3,protocolFromUrl:w3},xc={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:a=>"#"+a},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(a,t)=>(t.push(a),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:a=>Math.max(0,a),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:a=>Math.max(0,a),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:a=>Math.max(0,a),cli:"-e, --max-expand <n>",cliProcessor:a=>a==="Infinity"?1/0:parseInt(a)},globalGroup:{type:"boolean",cli:!1}};function A3(a){if(a.default)return a.default;var t=a.type,e=Array.isArray(t)?t[0]:t;if(typeof e!="string")return e.enum[0];switch(e){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class T1{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var e in xc)if(xc.hasOwnProperty(e)){var s=xc[e];this[e]=t[e]!==void 0?s.processor?s.processor(t[e]):t[e]:A3(s)}}reportNonstrict(t,e,s){var i=this.strict;if(typeof i=="function"&&(i=i(t,e,s)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new H("LaTeX-incompatible input and strict mode is set to 'error': "+(e+" ["+t+"]"),s);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(e+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+e+" ["+t+"]"))}}useStrictBehavior(t,e,s){var i=this.strict;if(typeof i=="function")try{i=i(t,e,s)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(e+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+e+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var e=_t.protocolFromUrl(t.url);if(e==null)return!1;t.protocol=e}var s=typeof this.trust=="function"?this.trust(t):this.trust;return!!s}}class Or{constructor(t,e,s){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=s}sup(){return zi[x3[this.id]]}sub(){return zi[S3[this.id]]}fracNum(){return zi[k3[this.id]]}fracDen(){return zi[_3[this.id]]}cramp(){return zi[T3[this.id]]}text(){return zi[E3[this.id]]}isTight(){return this.size>=2}}var E1=0,Dc=1,ho=2,Tr=3,Y0=4,js=5,g0=6,ts=7,zi=[new Or(E1,0,!1),new Or(Dc,0,!0),new Or(ho,1,!1),new Or(Tr,1,!0),new Or(Y0,2,!1),new Or(js,2,!0),new Or(g0,3,!1),new Or(ts,3,!0)],x3=[Y0,js,Y0,js,g0,ts,g0,ts],S3=[js,js,js,js,ts,ts,ts,ts],k3=[ho,Tr,Y0,js,g0,ts,g0,ts],_3=[Tr,Tr,js,js,ts,ts,ts,ts],T3=[Dc,Dc,Tr,Tr,js,js,ts,ts],E3=[E1,Dc,ho,Tr,ho,Tr,ho,Tr],rt={DISPLAY:zi[E1],TEXT:zi[ho],SCRIPT:zi[Y0],SCRIPTSCRIPT:zi[g0]},o1=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function C3(a){for(var t=0;t<o1.length;t++)for(var e=o1[t],s=0;s<e.blocks.length;s++){var i=e.blocks[s];if(a>=i[0]&&a<=i[1])return e.name}return null}var Sc=[];o1.forEach(a=>a.blocks.forEach(t=>Sc.push(...t)));function f4(a){for(var t=0;t<Sc.length;t+=2)if(a>=Sc[t]&&a<=Sc[t+1])return!0;return!1}var Za=80,M3=function(t,e){return"M95,"+(622+t+e)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},R3=function(t,e){return"M263,"+(601+t+e)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},P3=function(t,e){return"M983 "+(10+t+e)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},D3=function(t,e){return"M424,"+(2398+t+e)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+e+`
h400000v`+(40+t)+"h-400000z"},I3=function(t,e){return"M473,"+(2713+t+e)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"},L3=function(t){var e=t/2;return"M400000 "+t+" H0 L"+e+" 0 l65 45 L145 "+(t-80)+" H400000z"},N3=function(t,e,s){var i=s-54-e-t;return"M702 "+(t+e)+"H400000"+(40+t)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+e+"H400000v"+(40+t)+"H742z"},F3=function(t,e,s){e=1e3*e;var i="";switch(t){case"sqrtMain":i=M3(e,Za);break;case"sqrtSize1":i=R3(e,Za);break;case"sqrtSize2":i=P3(e,Za);break;case"sqrtSize3":i=D3(e,Za);break;case"sqrtSize4":i=I3(e,Za);break;case"sqrtTall":i=N3(e,Za,s)}return i},O3=function(t,e){switch(t){case"⎜":return"M291 0 H417 V"+e+" H291z M291 0 H417 V"+e+" H291z";case"∣":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z";case"∥":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z"+("M367 0 H410 V"+e+" H367z M367 0 H410 V"+e+" H367z");case"⎟":return"M457 0 H583 V"+e+" H457z M457 0 H583 V"+e+" H457z";case"⎢":return"M319 0 H403 V"+e+" H319z M319 0 H403 V"+e+" H319z";case"⎥":return"M263 0 H347 V"+e+" H263z M263 0 H347 V"+e+" H263z";case"⎪":return"M384 0 H504 V"+e+" H384z M384 0 H504 V"+e+" H384z";case"⏐":return"M312 0 H355 V"+e+" H312z M312 0 H355 V"+e+" H312z";case"‖":return"M257 0 H300 V"+e+" H257z M257 0 H300 V"+e+" H257z"+("M478 0 H521 V"+e+" H478z M478 0 H521 V"+e+" H478z");default:return""}},Mf={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},z3=function(t,e){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+e+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+e+" v1759 h84z";case"vert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+" v585 h43z";case"doublevert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+` v585 h43z
M367 15 v585 v`+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+e+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+e+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+e+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v602 h84z
M403 1759 V0 H319 V1759 v`+e+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v602 h84z
M347 1759 V0 h-84 V1759 v`+e+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(e+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(e+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(e+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(e+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class _h{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t}toMarkup(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t}toText(){var t=e=>e.toText();return this.children.map(t).join("")}}var Bi={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Oh={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Rf={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function B3(a,t){Bi[a]=t}function C1(a,t,e){if(!Bi[t])throw new Error("Font metrics not found for font: "+t+".");var s=a.charCodeAt(0),i=Bi[t][s];if(!i&&a[0]in Rf&&(s=Rf[a[0]].charCodeAt(0),i=Bi[t][s]),!i&&e==="text"&&f4(s)&&(i=Bi[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Du={};function H3(a){var t;if(a>=5?t=0:a>=3?t=1:t=2,!Du[t]){var e=Du[t]={cssEmPerMu:Oh.quad[t]/18};for(var s in Oh)Oh.hasOwnProperty(s)&&(e[s]=Oh[s][t])}return Du[t]}var q3=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Pf=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Df=function(t,e){return e.size<2?t:q3[t-1][e.size-1]};class Ji{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Ji.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=Pf[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var e={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return new Ji(e)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:Df(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:Pf[t-1]})}havingBaseStyle(t){t=t||this.style.text();var e=Df(Ji.BASESIZE,t);return this.size===e&&this.textSize===Ji.BASESIZE&&this.style===t?this:this.extend({style:t,size:e})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Ji.BASESIZE?["sizing","reset-size"+this.size,"size"+Ji.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=H3(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Ji.BASESIZE=6;var l1={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},G3={ex:!0,em:!0,mu:!0},p4=function(t){return typeof t!="string"&&(t=t.unit),t in l1||t in G3||t==="ex"},te=function(t,e){var s;if(t.unit in l1)s=l1[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if(t.unit==="mu")s=e.fontMetrics().cssEmPerMu;else{var i;if(e.style.isTight()?i=e.havingStyle(e.style.text()):i=e,t.unit==="ex")s=i.fontMetrics().xHeight;else if(t.unit==="em")s=i.fontMetrics().quad;else throw new H("Invalid unit: '"+t.unit+"'");i!==e&&(s*=i.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*s,e.maxSize)},G=function(t){return+t.toFixed(4)+"em"},xn=function(t){return t.filter(e=>e).join(" ")},m4=function(t,e,s){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=s||{},e){e.style.isTight()&&this.classes.push("mtight");var i=e.getColor();i&&(this.style.color=i)}},g4=function(t){var e=document.createElement(t);e.className=xn(this.classes);for(var s in this.style)this.style.hasOwnProperty(s)&&(e.style[s]=this.style[s]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&e.setAttribute(i,this.attributes[i]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e},$3=/[\s"'>/=\x00-\x1f]/,v4=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+_t.escape(xn(this.classes))+'"');var s="";for(var i in this.style)this.style.hasOwnProperty(i)&&(s+=_t.hyphenate(i)+":"+this.style[i]+";");s&&(e+=' style="'+_t.escape(s)+'"');for(var r in this.attributes)if(this.attributes.hasOwnProperty(r)){if($3.test(r))throw new H("Invalid attribute name '"+r+"'");e+=" "+r+'="'+_t.escape(this.attributes[r])+'"'}e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+t+">",e};class Th{constructor(t,e,s,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,m4.call(this,t,s,i),this.children=e||[]}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return this.classes.includes(t)}toNode(){return g4.call(this,"span")}toMarkup(){return v4.call(this,"span")}}class M1{constructor(t,e,s,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,m4.call(this,e,i),this.children=s||[],this.setAttribute("href",t)}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return this.classes.includes(t)}toNode(){return g4.call(this,"a")}toMarkup(){return v4.call(this,"a")}}class V3{constructor(t,e,s){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=s}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var e in this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t}toMarkup(){var t='<img src="'+_t.escape(this.src)+'"'+(' alt="'+_t.escape(this.alt)+'"'),e="";for(var s in this.style)this.style.hasOwnProperty(s)&&(e+=_t.hyphenate(s)+":"+this.style[s]+";");return e&&(t+=' style="'+_t.escape(e)+'"'),t+="'/>",t}}var U3={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class Ys{constructor(t,e,s,i,r,n,l,h){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=s||0,this.italic=i||0,this.skew=r||0,this.width=n||0,this.classes=l||[],this.style=h||{},this.maxFontSize=0;var c=C3(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=U3[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),e=null;this.italic>0&&(e=document.createElement("span"),e.style.marginRight=G(this.italic)),this.classes.length>0&&(e=e||document.createElement("span"),e.className=xn(this.classes));for(var s in this.style)this.style.hasOwnProperty(s)&&(e=e||document.createElement("span"),e.style[s]=this.style[s]);return e?(e.appendChild(t),e):t}toMarkup(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=_t.escape(xn(this.classes)),e+='"');var s="";this.italic>0&&(s+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(s+=_t.hyphenate(i)+":"+this.style[i]+";");s&&(t=!0,e+=' style="'+_t.escape(s)+'"');var r=_t.escape(this.text);return t?(e+=">",e+=r,e+="</span>",e):r}}class Rr{constructor(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");for(var s in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,s)&&e.setAttribute(s,this.attributes[s]);for(var i=0;i<this.children.length;i++)e.appendChild(this.children[i].toNode());return e}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+_t.escape(this.attributes[e])+'"');t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</svg>",t}}class Sn{constructor(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",Mf[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+_t.escape(this.alternate)+'"/>':'<path d="'+_t.escape(Mf[this.pathName])+'"/>'}}class h1{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"line");for(var s in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,s)&&e.setAttribute(s,this.attributes[s]);return e}toMarkup(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+_t.escape(this.attributes[e])+'"');return t+="/>",t}}function If(a){if(a instanceof Ys)return a;throw new Error("Expected symbolNode but got "+String(a)+".")}function W3(a){if(a instanceof Th)return a;throw new Error("Expected span<HtmlDomNode> but got "+String(a)+".")}var j3={bin:1,close:1,inner:1,open:1,punct:1,rel:1},X3={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},qt={math:{},text:{}};function f(a,t,e,s,i,r){qt[a][i]={font:t,group:e,replace:s},r&&s&&(qt[a][s]=qt[a][i])}var m="math",O="text",y="main",T="ams",Xt="accent-token",j="bin",rs="close",v0="inner",it="mathord",pe="op-token",Ns="open",cu="punct",E="rel",Nr="spacing",M="textord";f(m,y,E,"≡","\\equiv",!0);f(m,y,E,"≺","\\prec",!0);f(m,y,E,"≻","\\succ",!0);f(m,y,E,"∼","\\sim",!0);f(m,y,E,"⊥","\\perp");f(m,y,E,"⪯","\\preceq",!0);f(m,y,E,"⪰","\\succeq",!0);f(m,y,E,"≃","\\simeq",!0);f(m,y,E,"∣","\\mid",!0);f(m,y,E,"≪","\\ll",!0);f(m,y,E,"≫","\\gg",!0);f(m,y,E,"≍","\\asymp",!0);f(m,y,E,"∥","\\parallel");f(m,y,E,"⋈","\\bowtie",!0);f(m,y,E,"⌣","\\smile",!0);f(m,y,E,"⊑","\\sqsubseteq",!0);f(m,y,E,"⊒","\\sqsupseteq",!0);f(m,y,E,"≐","\\doteq",!0);f(m,y,E,"⌢","\\frown",!0);f(m,y,E,"∋","\\ni",!0);f(m,y,E,"∝","\\propto",!0);f(m,y,E,"⊢","\\vdash",!0);f(m,y,E,"⊣","\\dashv",!0);f(m,y,E,"∋","\\owns");f(m,y,cu,".","\\ldotp");f(m,y,cu,"⋅","\\cdotp");f(m,y,M,"#","\\#");f(O,y,M,"#","\\#");f(m,y,M,"&","\\&");f(O,y,M,"&","\\&");f(m,y,M,"ℵ","\\aleph",!0);f(m,y,M,"∀","\\forall",!0);f(m,y,M,"ℏ","\\hbar",!0);f(m,y,M,"∃","\\exists",!0);f(m,y,M,"∇","\\nabla",!0);f(m,y,M,"♭","\\flat",!0);f(m,y,M,"ℓ","\\ell",!0);f(m,y,M,"♮","\\natural",!0);f(m,y,M,"♣","\\clubsuit",!0);f(m,y,M,"℘","\\wp",!0);f(m,y,M,"♯","\\sharp",!0);f(m,y,M,"♢","\\diamondsuit",!0);f(m,y,M,"ℜ","\\Re",!0);f(m,y,M,"♡","\\heartsuit",!0);f(m,y,M,"ℑ","\\Im",!0);f(m,y,M,"♠","\\spadesuit",!0);f(m,y,M,"§","\\S",!0);f(O,y,M,"§","\\S");f(m,y,M,"¶","\\P",!0);f(O,y,M,"¶","\\P");f(m,y,M,"†","\\dag");f(O,y,M,"†","\\dag");f(O,y,M,"†","\\textdagger");f(m,y,M,"‡","\\ddag");f(O,y,M,"‡","\\ddag");f(O,y,M,"‡","\\textdaggerdbl");f(m,y,rs,"⎱","\\rmoustache",!0);f(m,y,Ns,"⎰","\\lmoustache",!0);f(m,y,rs,"⟯","\\rgroup",!0);f(m,y,Ns,"⟮","\\lgroup",!0);f(m,y,j,"∓","\\mp",!0);f(m,y,j,"⊖","\\ominus",!0);f(m,y,j,"⊎","\\uplus",!0);f(m,y,j,"⊓","\\sqcap",!0);f(m,y,j,"∗","\\ast");f(m,y,j,"⊔","\\sqcup",!0);f(m,y,j,"◯","\\bigcirc",!0);f(m,y,j,"∙","\\bullet",!0);f(m,y,j,"‡","\\ddagger");f(m,y,j,"≀","\\wr",!0);f(m,y,j,"⨿","\\amalg");f(m,y,j,"&","\\And");f(m,y,E,"⟵","\\longleftarrow",!0);f(m,y,E,"⇐","\\Leftarrow",!0);f(m,y,E,"⟸","\\Longleftarrow",!0);f(m,y,E,"⟶","\\longrightarrow",!0);f(m,y,E,"⇒","\\Rightarrow",!0);f(m,y,E,"⟹","\\Longrightarrow",!0);f(m,y,E,"↔","\\leftrightarrow",!0);f(m,y,E,"⟷","\\longleftrightarrow",!0);f(m,y,E,"⇔","\\Leftrightarrow",!0);f(m,y,E,"⟺","\\Longleftrightarrow",!0);f(m,y,E,"↦","\\mapsto",!0);f(m,y,E,"⟼","\\longmapsto",!0);f(m,y,E,"↗","\\nearrow",!0);f(m,y,E,"↩","\\hookleftarrow",!0);f(m,y,E,"↪","\\hookrightarrow",!0);f(m,y,E,"↘","\\searrow",!0);f(m,y,E,"↼","\\leftharpoonup",!0);f(m,y,E,"⇀","\\rightharpoonup",!0);f(m,y,E,"↙","\\swarrow",!0);f(m,y,E,"↽","\\leftharpoondown",!0);f(m,y,E,"⇁","\\rightharpoondown",!0);f(m,y,E,"↖","\\nwarrow",!0);f(m,y,E,"⇌","\\rightleftharpoons",!0);f(m,T,E,"≮","\\nless",!0);f(m,T,E,"","\\@nleqslant");f(m,T,E,"","\\@nleqq");f(m,T,E,"⪇","\\lneq",!0);f(m,T,E,"≨","\\lneqq",!0);f(m,T,E,"","\\@lvertneqq");f(m,T,E,"⋦","\\lnsim",!0);f(m,T,E,"⪉","\\lnapprox",!0);f(m,T,E,"⊀","\\nprec",!0);f(m,T,E,"⋠","\\npreceq",!0);f(m,T,E,"⋨","\\precnsim",!0);f(m,T,E,"⪹","\\precnapprox",!0);f(m,T,E,"≁","\\nsim",!0);f(m,T,E,"","\\@nshortmid");f(m,T,E,"∤","\\nmid",!0);f(m,T,E,"⊬","\\nvdash",!0);f(m,T,E,"⊭","\\nvDash",!0);f(m,T,E,"⋪","\\ntriangleleft");f(m,T,E,"⋬","\\ntrianglelefteq",!0);f(m,T,E,"⊊","\\subsetneq",!0);f(m,T,E,"","\\@varsubsetneq");f(m,T,E,"⫋","\\subsetneqq",!0);f(m,T,E,"","\\@varsubsetneqq");f(m,T,E,"≯","\\ngtr",!0);f(m,T,E,"","\\@ngeqslant");f(m,T,E,"","\\@ngeqq");f(m,T,E,"⪈","\\gneq",!0);f(m,T,E,"≩","\\gneqq",!0);f(m,T,E,"","\\@gvertneqq");f(m,T,E,"⋧","\\gnsim",!0);f(m,T,E,"⪊","\\gnapprox",!0);f(m,T,E,"⊁","\\nsucc",!0);f(m,T,E,"⋡","\\nsucceq",!0);f(m,T,E,"⋩","\\succnsim",!0);f(m,T,E,"⪺","\\succnapprox",!0);f(m,T,E,"≆","\\ncong",!0);f(m,T,E,"","\\@nshortparallel");f(m,T,E,"∦","\\nparallel",!0);f(m,T,E,"⊯","\\nVDash",!0);f(m,T,E,"⋫","\\ntriangleright");f(m,T,E,"⋭","\\ntrianglerighteq",!0);f(m,T,E,"","\\@nsupseteqq");f(m,T,E,"⊋","\\supsetneq",!0);f(m,T,E,"","\\@varsupsetneq");f(m,T,E,"⫌","\\supsetneqq",!0);f(m,T,E,"","\\@varsupsetneqq");f(m,T,E,"⊮","\\nVdash",!0);f(m,T,E,"⪵","\\precneqq",!0);f(m,T,E,"⪶","\\succneqq",!0);f(m,T,E,"","\\@nsubseteqq");f(m,T,j,"⊴","\\unlhd");f(m,T,j,"⊵","\\unrhd");f(m,T,E,"↚","\\nleftarrow",!0);f(m,T,E,"↛","\\nrightarrow",!0);f(m,T,E,"⇍","\\nLeftarrow",!0);f(m,T,E,"⇏","\\nRightarrow",!0);f(m,T,E,"↮","\\nleftrightarrow",!0);f(m,T,E,"⇎","\\nLeftrightarrow",!0);f(m,T,E,"△","\\vartriangle");f(m,T,M,"ℏ","\\hslash");f(m,T,M,"▽","\\triangledown");f(m,T,M,"◊","\\lozenge");f(m,T,M,"Ⓢ","\\circledS");f(m,T,M,"®","\\circledR");f(O,T,M,"®","\\circledR");f(m,T,M,"∡","\\measuredangle",!0);f(m,T,M,"∄","\\nexists");f(m,T,M,"℧","\\mho");f(m,T,M,"Ⅎ","\\Finv",!0);f(m,T,M,"⅁","\\Game",!0);f(m,T,M,"‵","\\backprime");f(m,T,M,"▲","\\blacktriangle");f(m,T,M,"▼","\\blacktriangledown");f(m,T,M,"■","\\blacksquare");f(m,T,M,"⧫","\\blacklozenge");f(m,T,M,"★","\\bigstar");f(m,T,M,"∢","\\sphericalangle",!0);f(m,T,M,"∁","\\complement",!0);f(m,T,M,"ð","\\eth",!0);f(O,y,M,"ð","ð");f(m,T,M,"╱","\\diagup");f(m,T,M,"╲","\\diagdown");f(m,T,M,"□","\\square");f(m,T,M,"□","\\Box");f(m,T,M,"◊","\\Diamond");f(m,T,M,"¥","\\yen",!0);f(O,T,M,"¥","\\yen",!0);f(m,T,M,"✓","\\checkmark",!0);f(O,T,M,"✓","\\checkmark");f(m,T,M,"ℶ","\\beth",!0);f(m,T,M,"ℸ","\\daleth",!0);f(m,T,M,"ℷ","\\gimel",!0);f(m,T,M,"ϝ","\\digamma",!0);f(m,T,M,"ϰ","\\varkappa");f(m,T,Ns,"┌","\\@ulcorner",!0);f(m,T,rs,"┐","\\@urcorner",!0);f(m,T,Ns,"└","\\@llcorner",!0);f(m,T,rs,"┘","\\@lrcorner",!0);f(m,T,E,"≦","\\leqq",!0);f(m,T,E,"⩽","\\leqslant",!0);f(m,T,E,"⪕","\\eqslantless",!0);f(m,T,E,"≲","\\lesssim",!0);f(m,T,E,"⪅","\\lessapprox",!0);f(m,T,E,"≊","\\approxeq",!0);f(m,T,j,"⋖","\\lessdot");f(m,T,E,"⋘","\\lll",!0);f(m,T,E,"≶","\\lessgtr",!0);f(m,T,E,"⋚","\\lesseqgtr",!0);f(m,T,E,"⪋","\\lesseqqgtr",!0);f(m,T,E,"≑","\\doteqdot");f(m,T,E,"≓","\\risingdotseq",!0);f(m,T,E,"≒","\\fallingdotseq",!0);f(m,T,E,"∽","\\backsim",!0);f(m,T,E,"⋍","\\backsimeq",!0);f(m,T,E,"⫅","\\subseteqq",!0);f(m,T,E,"⋐","\\Subset",!0);f(m,T,E,"⊏","\\sqsubset",!0);f(m,T,E,"≼","\\preccurlyeq",!0);f(m,T,E,"⋞","\\curlyeqprec",!0);f(m,T,E,"≾","\\precsim",!0);f(m,T,E,"⪷","\\precapprox",!0);f(m,T,E,"⊲","\\vartriangleleft");f(m,T,E,"⊴","\\trianglelefteq");f(m,T,E,"⊨","\\vDash",!0);f(m,T,E,"⊪","\\Vvdash",!0);f(m,T,E,"⌣","\\smallsmile");f(m,T,E,"⌢","\\smallfrown");f(m,T,E,"≏","\\bumpeq",!0);f(m,T,E,"≎","\\Bumpeq",!0);f(m,T,E,"≧","\\geqq",!0);f(m,T,E,"⩾","\\geqslant",!0);f(m,T,E,"⪖","\\eqslantgtr",!0);f(m,T,E,"≳","\\gtrsim",!0);f(m,T,E,"⪆","\\gtrapprox",!0);f(m,T,j,"⋗","\\gtrdot");f(m,T,E,"⋙","\\ggg",!0);f(m,T,E,"≷","\\gtrless",!0);f(m,T,E,"⋛","\\gtreqless",!0);f(m,T,E,"⪌","\\gtreqqless",!0);f(m,T,E,"≖","\\eqcirc",!0);f(m,T,E,"≗","\\circeq",!0);f(m,T,E,"≜","\\triangleq",!0);f(m,T,E,"∼","\\thicksim");f(m,T,E,"≈","\\thickapprox");f(m,T,E,"⫆","\\supseteqq",!0);f(m,T,E,"⋑","\\Supset",!0);f(m,T,E,"⊐","\\sqsupset",!0);f(m,T,E,"≽","\\succcurlyeq",!0);f(m,T,E,"⋟","\\curlyeqsucc",!0);f(m,T,E,"≿","\\succsim",!0);f(m,T,E,"⪸","\\succapprox",!0);f(m,T,E,"⊳","\\vartriangleright");f(m,T,E,"⊵","\\trianglerighteq");f(m,T,E,"⊩","\\Vdash",!0);f(m,T,E,"∣","\\shortmid");f(m,T,E,"∥","\\shortparallel");f(m,T,E,"≬","\\between",!0);f(m,T,E,"⋔","\\pitchfork",!0);f(m,T,E,"∝","\\varpropto");f(m,T,E,"◀","\\blacktriangleleft");f(m,T,E,"∴","\\therefore",!0);f(m,T,E,"∍","\\backepsilon");f(m,T,E,"▶","\\blacktriangleright");f(m,T,E,"∵","\\because",!0);f(m,T,E,"⋘","\\llless");f(m,T,E,"⋙","\\gggtr");f(m,T,j,"⊲","\\lhd");f(m,T,j,"⊳","\\rhd");f(m,T,E,"≂","\\eqsim",!0);f(m,y,E,"⋈","\\Join");f(m,T,E,"≑","\\Doteq",!0);f(m,T,j,"∔","\\dotplus",!0);f(m,T,j,"∖","\\smallsetminus");f(m,T,j,"⋒","\\Cap",!0);f(m,T,j,"⋓","\\Cup",!0);f(m,T,j,"⩞","\\doublebarwedge",!0);f(m,T,j,"⊟","\\boxminus",!0);f(m,T,j,"⊞","\\boxplus",!0);f(m,T,j,"⋇","\\divideontimes",!0);f(m,T,j,"⋉","\\ltimes",!0);f(m,T,j,"⋊","\\rtimes",!0);f(m,T,j,"⋋","\\leftthreetimes",!0);f(m,T,j,"⋌","\\rightthreetimes",!0);f(m,T,j,"⋏","\\curlywedge",!0);f(m,T,j,"⋎","\\curlyvee",!0);f(m,T,j,"⊝","\\circleddash",!0);f(m,T,j,"⊛","\\circledast",!0);f(m,T,j,"⋅","\\centerdot");f(m,T,j,"⊺","\\intercal",!0);f(m,T,j,"⋒","\\doublecap");f(m,T,j,"⋓","\\doublecup");f(m,T,j,"⊠","\\boxtimes",!0);f(m,T,E,"⇢","\\dashrightarrow",!0);f(m,T,E,"⇠","\\dashleftarrow",!0);f(m,T,E,"⇇","\\leftleftarrows",!0);f(m,T,E,"⇆","\\leftrightarrows",!0);f(m,T,E,"⇚","\\Lleftarrow",!0);f(m,T,E,"↞","\\twoheadleftarrow",!0);f(m,T,E,"↢","\\leftarrowtail",!0);f(m,T,E,"↫","\\looparrowleft",!0);f(m,T,E,"⇋","\\leftrightharpoons",!0);f(m,T,E,"↶","\\curvearrowleft",!0);f(m,T,E,"↺","\\circlearrowleft",!0);f(m,T,E,"↰","\\Lsh",!0);f(m,T,E,"⇈","\\upuparrows",!0);f(m,T,E,"↿","\\upharpoonleft",!0);f(m,T,E,"⇃","\\downharpoonleft",!0);f(m,y,E,"⊶","\\origof",!0);f(m,y,E,"⊷","\\imageof",!0);f(m,T,E,"⊸","\\multimap",!0);f(m,T,E,"↭","\\leftrightsquigarrow",!0);f(m,T,E,"⇉","\\rightrightarrows",!0);f(m,T,E,"⇄","\\rightleftarrows",!0);f(m,T,E,"↠","\\twoheadrightarrow",!0);f(m,T,E,"↣","\\rightarrowtail",!0);f(m,T,E,"↬","\\looparrowright",!0);f(m,T,E,"↷","\\curvearrowright",!0);f(m,T,E,"↻","\\circlearrowright",!0);f(m,T,E,"↱","\\Rsh",!0);f(m,T,E,"⇊","\\downdownarrows",!0);f(m,T,E,"↾","\\upharpoonright",!0);f(m,T,E,"⇂","\\downharpoonright",!0);f(m,T,E,"⇝","\\rightsquigarrow",!0);f(m,T,E,"⇝","\\leadsto");f(m,T,E,"⇛","\\Rrightarrow",!0);f(m,T,E,"↾","\\restriction");f(m,y,M,"‘","`");f(m,y,M,"$","\\$");f(O,y,M,"$","\\$");f(O,y,M,"$","\\textdollar");f(m,y,M,"%","\\%");f(O,y,M,"%","\\%");f(m,y,M,"_","\\_");f(O,y,M,"_","\\_");f(O,y,M,"_","\\textunderscore");f(m,y,M,"∠","\\angle",!0);f(m,y,M,"∞","\\infty",!0);f(m,y,M,"′","\\prime");f(m,y,M,"△","\\triangle");f(m,y,M,"Γ","\\Gamma",!0);f(m,y,M,"Δ","\\Delta",!0);f(m,y,M,"Θ","\\Theta",!0);f(m,y,M,"Λ","\\Lambda",!0);f(m,y,M,"Ξ","\\Xi",!0);f(m,y,M,"Π","\\Pi",!0);f(m,y,M,"Σ","\\Sigma",!0);f(m,y,M,"Υ","\\Upsilon",!0);f(m,y,M,"Φ","\\Phi",!0);f(m,y,M,"Ψ","\\Psi",!0);f(m,y,M,"Ω","\\Omega",!0);f(m,y,M,"A","Α");f(m,y,M,"B","Β");f(m,y,M,"E","Ε");f(m,y,M,"Z","Ζ");f(m,y,M,"H","Η");f(m,y,M,"I","Ι");f(m,y,M,"K","Κ");f(m,y,M,"M","Μ");f(m,y,M,"N","Ν");f(m,y,M,"O","Ο");f(m,y,M,"P","Ρ");f(m,y,M,"T","Τ");f(m,y,M,"X","Χ");f(m,y,M,"¬","\\neg",!0);f(m,y,M,"¬","\\lnot");f(m,y,M,"⊤","\\top");f(m,y,M,"⊥","\\bot");f(m,y,M,"∅","\\emptyset");f(m,T,M,"∅","\\varnothing");f(m,y,it,"α","\\alpha",!0);f(m,y,it,"β","\\beta",!0);f(m,y,it,"γ","\\gamma",!0);f(m,y,it,"δ","\\delta",!0);f(m,y,it,"ϵ","\\epsilon",!0);f(m,y,it,"ζ","\\zeta",!0);f(m,y,it,"η","\\eta",!0);f(m,y,it,"θ","\\theta",!0);f(m,y,it,"ι","\\iota",!0);f(m,y,it,"κ","\\kappa",!0);f(m,y,it,"λ","\\lambda",!0);f(m,y,it,"μ","\\mu",!0);f(m,y,it,"ν","\\nu",!0);f(m,y,it,"ξ","\\xi",!0);f(m,y,it,"ο","\\omicron",!0);f(m,y,it,"π","\\pi",!0);f(m,y,it,"ρ","\\rho",!0);f(m,y,it,"σ","\\sigma",!0);f(m,y,it,"τ","\\tau",!0);f(m,y,it,"υ","\\upsilon",!0);f(m,y,it,"ϕ","\\phi",!0);f(m,y,it,"χ","\\chi",!0);f(m,y,it,"ψ","\\psi",!0);f(m,y,it,"ω","\\omega",!0);f(m,y,it,"ε","\\varepsilon",!0);f(m,y,it,"ϑ","\\vartheta",!0);f(m,y,it,"ϖ","\\varpi",!0);f(m,y,it,"ϱ","\\varrho",!0);f(m,y,it,"ς","\\varsigma",!0);f(m,y,it,"φ","\\varphi",!0);f(m,y,j,"∗","*",!0);f(m,y,j,"+","+");f(m,y,j,"−","-",!0);f(m,y,j,"⋅","\\cdot",!0);f(m,y,j,"∘","\\circ",!0);f(m,y,j,"÷","\\div",!0);f(m,y,j,"±","\\pm",!0);f(m,y,j,"×","\\times",!0);f(m,y,j,"∩","\\cap",!0);f(m,y,j,"∪","\\cup",!0);f(m,y,j,"∖","\\setminus",!0);f(m,y,j,"∧","\\land");f(m,y,j,"∨","\\lor");f(m,y,j,"∧","\\wedge",!0);f(m,y,j,"∨","\\vee",!0);f(m,y,M,"√","\\surd");f(m,y,Ns,"⟨","\\langle",!0);f(m,y,Ns,"∣","\\lvert");f(m,y,Ns,"∥","\\lVert");f(m,y,rs,"?","?");f(m,y,rs,"!","!");f(m,y,rs,"⟩","\\rangle",!0);f(m,y,rs,"∣","\\rvert");f(m,y,rs,"∥","\\rVert");f(m,y,E,"=","=");f(m,y,E,":",":");f(m,y,E,"≈","\\approx",!0);f(m,y,E,"≅","\\cong",!0);f(m,y,E,"≥","\\ge");f(m,y,E,"≥","\\geq",!0);f(m,y,E,"←","\\gets");f(m,y,E,">","\\gt",!0);f(m,y,E,"∈","\\in",!0);f(m,y,E,"","\\@not");f(m,y,E,"⊂","\\subset",!0);f(m,y,E,"⊃","\\supset",!0);f(m,y,E,"⊆","\\subseteq",!0);f(m,y,E,"⊇","\\supseteq",!0);f(m,T,E,"⊈","\\nsubseteq",!0);f(m,T,E,"⊉","\\nsupseteq",!0);f(m,y,E,"⊨","\\models");f(m,y,E,"←","\\leftarrow",!0);f(m,y,E,"≤","\\le");f(m,y,E,"≤","\\leq",!0);f(m,y,E,"<","\\lt",!0);f(m,y,E,"→","\\rightarrow",!0);f(m,y,E,"→","\\to");f(m,T,E,"≱","\\ngeq",!0);f(m,T,E,"≰","\\nleq",!0);f(m,y,Nr," ","\\ ");f(m,y,Nr," ","\\space");f(m,y,Nr," ","\\nobreakspace");f(O,y,Nr," ","\\ ");f(O,y,Nr," "," ");f(O,y,Nr," ","\\space");f(O,y,Nr," ","\\nobreakspace");f(m,y,Nr,null,"\\nobreak");f(m,y,Nr,null,"\\allowbreak");f(m,y,cu,",",",");f(m,y,cu,";",";");f(m,T,j,"⊼","\\barwedge",!0);f(m,T,j,"⊻","\\veebar",!0);f(m,y,j,"⊙","\\odot",!0);f(m,y,j,"⊕","\\oplus",!0);f(m,y,j,"⊗","\\otimes",!0);f(m,y,M,"∂","\\partial",!0);f(m,y,j,"⊘","\\oslash",!0);f(m,T,j,"⊚","\\circledcirc",!0);f(m,T,j,"⊡","\\boxdot",!0);f(m,y,j,"△","\\bigtriangleup");f(m,y,j,"▽","\\bigtriangledown");f(m,y,j,"†","\\dagger");f(m,y,j,"⋄","\\diamond");f(m,y,j,"⋆","\\star");f(m,y,j,"◃","\\triangleleft");f(m,y,j,"▹","\\triangleright");f(m,y,Ns,"{","\\{");f(O,y,M,"{","\\{");f(O,y,M,"{","\\textbraceleft");f(m,y,rs,"}","\\}");f(O,y,M,"}","\\}");f(O,y,M,"}","\\textbraceright");f(m,y,Ns,"{","\\lbrace");f(m,y,rs,"}","\\rbrace");f(m,y,Ns,"[","\\lbrack",!0);f(O,y,M,"[","\\lbrack",!0);f(m,y,rs,"]","\\rbrack",!0);f(O,y,M,"]","\\rbrack",!0);f(m,y,Ns,"(","\\lparen",!0);f(m,y,rs,")","\\rparen",!0);f(O,y,M,"<","\\textless",!0);f(O,y,M,">","\\textgreater",!0);f(m,y,Ns,"⌊","\\lfloor",!0);f(m,y,rs,"⌋","\\rfloor",!0);f(m,y,Ns,"⌈","\\lceil",!0);f(m,y,rs,"⌉","\\rceil",!0);f(m,y,M,"\\","\\backslash");f(m,y,M,"∣","|");f(m,y,M,"∣","\\vert");f(O,y,M,"|","\\textbar",!0);f(m,y,M,"∥","\\|");f(m,y,M,"∥","\\Vert");f(O,y,M,"∥","\\textbardbl");f(O,y,M,"~","\\textasciitilde");f(O,y,M,"\\","\\textbackslash");f(O,y,M,"^","\\textasciicircum");f(m,y,E,"↑","\\uparrow",!0);f(m,y,E,"⇑","\\Uparrow",!0);f(m,y,E,"↓","\\downarrow",!0);f(m,y,E,"⇓","\\Downarrow",!0);f(m,y,E,"↕","\\updownarrow",!0);f(m,y,E,"⇕","\\Updownarrow",!0);f(m,y,pe,"∐","\\coprod");f(m,y,pe,"⋁","\\bigvee");f(m,y,pe,"⋀","\\bigwedge");f(m,y,pe,"⨄","\\biguplus");f(m,y,pe,"⋂","\\bigcap");f(m,y,pe,"⋃","\\bigcup");f(m,y,pe,"∫","\\int");f(m,y,pe,"∫","\\intop");f(m,y,pe,"∬","\\iint");f(m,y,pe,"∭","\\iiint");f(m,y,pe,"∏","\\prod");f(m,y,pe,"∑","\\sum");f(m,y,pe,"⨂","\\bigotimes");f(m,y,pe,"⨁","\\bigoplus");f(m,y,pe,"⨀","\\bigodot");f(m,y,pe,"∮","\\oint");f(m,y,pe,"∯","\\oiint");f(m,y,pe,"∰","\\oiiint");f(m,y,pe,"⨆","\\bigsqcup");f(m,y,pe,"∫","\\smallint");f(O,y,v0,"…","\\textellipsis");f(m,y,v0,"…","\\mathellipsis");f(O,y,v0,"…","\\ldots",!0);f(m,y,v0,"…","\\ldots",!0);f(m,y,v0,"⋯","\\@cdots",!0);f(m,y,v0,"⋱","\\ddots",!0);f(m,y,M,"⋮","\\varvdots");f(O,y,M,"⋮","\\varvdots");f(m,y,Xt,"ˊ","\\acute");f(m,y,Xt,"ˋ","\\grave");f(m,y,Xt,"¨","\\ddot");f(m,y,Xt,"~","\\tilde");f(m,y,Xt,"ˉ","\\bar");f(m,y,Xt,"˘","\\breve");f(m,y,Xt,"ˇ","\\check");f(m,y,Xt,"^","\\hat");f(m,y,Xt,"⃗","\\vec");f(m,y,Xt,"˙","\\dot");f(m,y,Xt,"˚","\\mathring");f(m,y,it,"","\\@imath");f(m,y,it,"","\\@jmath");f(m,y,M,"ı","ı");f(m,y,M,"ȷ","ȷ");f(O,y,M,"ı","\\i",!0);f(O,y,M,"ȷ","\\j",!0);f(O,y,M,"ß","\\ss",!0);f(O,y,M,"æ","\\ae",!0);f(O,y,M,"œ","\\oe",!0);f(O,y,M,"ø","\\o",!0);f(O,y,M,"Æ","\\AE",!0);f(O,y,M,"Œ","\\OE",!0);f(O,y,M,"Ø","\\O",!0);f(O,y,Xt,"ˊ","\\'");f(O,y,Xt,"ˋ","\\`");f(O,y,Xt,"ˆ","\\^");f(O,y,Xt,"˜","\\~");f(O,y,Xt,"ˉ","\\=");f(O,y,Xt,"˘","\\u");f(O,y,Xt,"˙","\\.");f(O,y,Xt,"¸","\\c");f(O,y,Xt,"˚","\\r");f(O,y,Xt,"ˇ","\\v");f(O,y,Xt,"¨",'\\"');f(O,y,Xt,"˝","\\H");f(O,y,Xt,"◯","\\textcircled");var b4={"--":!0,"---":!0,"``":!0,"''":!0};f(O,y,M,"–","--",!0);f(O,y,M,"–","\\textendash");f(O,y,M,"—","---",!0);f(O,y,M,"—","\\textemdash");f(O,y,M,"‘","`",!0);f(O,y,M,"‘","\\textquoteleft");f(O,y,M,"’","'",!0);f(O,y,M,"’","\\textquoteright");f(O,y,M,"“","``",!0);f(O,y,M,"“","\\textquotedblleft");f(O,y,M,"”","''",!0);f(O,y,M,"”","\\textquotedblright");f(m,y,M,"°","\\degree",!0);f(O,y,M,"°","\\degree");f(O,y,M,"°","\\textdegree",!0);f(m,y,M,"£","\\pounds");f(m,y,M,"£","\\mathsterling",!0);f(O,y,M,"£","\\pounds");f(O,y,M,"£","\\textsterling",!0);f(m,T,M,"✠","\\maltese");f(O,T,M,"✠","\\maltese");var Lf='0123456789/@."';for(var Iu=0;Iu<Lf.length;Iu++){var Nf=Lf.charAt(Iu);f(m,y,M,Nf,Nf)}var Ff='0123456789!@*()-=+";:?/.,';for(var Lu=0;Lu<Ff.length;Lu++){var Of=Ff.charAt(Lu);f(O,y,M,Of,Of)}var Ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Nu=0;Nu<Ic.length;Nu++){var zh=Ic.charAt(Nu);f(m,y,it,zh,zh),f(O,y,M,zh,zh)}f(m,T,M,"C","ℂ");f(O,T,M,"C","ℂ");f(m,T,M,"H","ℍ");f(O,T,M,"H","ℍ");f(m,T,M,"N","ℕ");f(O,T,M,"N","ℕ");f(m,T,M,"P","ℙ");f(O,T,M,"P","ℙ");f(m,T,M,"Q","ℚ");f(O,T,M,"Q","ℚ");f(m,T,M,"R","ℝ");f(O,T,M,"R","ℝ");f(m,T,M,"Z","ℤ");f(O,T,M,"Z","ℤ");f(m,y,it,"h","ℎ");f(O,y,it,"h","ℎ");var ht="";for(var Xe=0;Xe<Ic.length;Xe++){var se=Ic.charAt(Xe);ht=String.fromCharCode(55349,56320+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56372+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56424+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56580+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56684+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56736+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56788+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56840+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56944+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),Xe<26&&(ht=String.fromCharCode(55349,56632+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht),ht=String.fromCharCode(55349,56476+Xe),f(m,y,it,se,ht),f(O,y,M,se,ht))}ht="𝕜";f(m,y,it,"k",ht);f(O,y,M,"k",ht);for(var Pn=0;Pn<10;Pn++){var zr=Pn.toString();ht=String.fromCharCode(55349,57294+Pn),f(m,y,it,zr,ht),f(O,y,M,zr,ht),ht=String.fromCharCode(55349,57314+Pn),f(m,y,it,zr,ht),f(O,y,M,zr,ht),ht=String.fromCharCode(55349,57324+Pn),f(m,y,it,zr,ht),f(O,y,M,zr,ht),ht=String.fromCharCode(55349,57334+Pn),f(m,y,it,zr,ht),f(O,y,M,zr,ht)}var c1="ÐÞþ";for(var Fu=0;Fu<c1.length;Fu++){var Bh=c1.charAt(Fu);f(m,y,it,Bh,Bh),f(O,y,M,Bh,Bh)}var Hh=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],zf=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Y3=function(t,e){var s=t.charCodeAt(0),i=t.charCodeAt(1),r=(s-55296)*1024+(i-56320)+65536,n=e==="math"?0:1;if(119808<=r&&r<120484){var l=Math.floor((r-119808)/26);return[Hh[l][2],Hh[l][n]]}else if(120782<=r&&r<=120831){var h=Math.floor((r-120782)/10);return[zf[h][2],zf[h][n]]}else{if(r===120485||r===120486)return[Hh[0][2],Hh[0][n]];if(120486<r&&r<120782)return["",""];throw new H("Unsupported character: "+t)}},uu=function(t,e,s){return qt[s][t]&&qt[s][t].replace&&(t=qt[s][t].replace),{value:t,metrics:C1(t,e,s)}},fi=function(t,e,s,i,r){var n=uu(t,e,s),l=n.metrics;t=n.value;var h;if(l){var c=l.italic;(s==="text"||i&&i.font==="mathit")&&(c=0),h=new Ys(t,l.height,l.depth,c,l.skew,l.width,r)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+e+"' and mode '"+s+"'")),h=new Ys(t,0,0,0,0,0,r);if(i){h.maxFontSize=i.sizeMultiplier,i.style.isTight()&&h.classes.push("mtight");var u=i.getColor();u&&(h.style.color=u)}return h},K3=function(t,e,s,i){return i===void 0&&(i=[]),s.font==="boldsymbol"&&uu(t,"Main-Bold",e).metrics?fi(t,"Main-Bold",e,s,i.concat(["mathbf"])):t==="\\"||qt[e][t].font==="main"?fi(t,"Main-Regular",e,s,i):fi(t,"AMS-Regular",e,s,i.concat(["amsrm"]))},Z3=function(t,e,s,i,r){return r!=="textord"&&uu(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Q3=function(t,e,s){var i=t.mode,r=t.text,n=["mord"],l=i==="math"||i==="text"&&e.font,h=l?e.font:e.fontFamily,c="",u="";if(r.charCodeAt(0)===55349&&([c,u]=Y3(r,i)),c.length>0)return fi(r,c,i,e,n.concat(u));if(h){var d,p;if(h==="boldsymbol"){var g=Z3(r,i,e,n,s);d=g.fontName,p=[g.fontClass]}else l?(d=A4[h].fontName,p=[h]):(d=qh(h,e.fontWeight,e.fontShape),p=[h,e.fontWeight,e.fontShape]);if(uu(r,d,i).metrics)return fi(r,d,i,e,n.concat(p));if(b4.hasOwnProperty(r)&&d.slice(0,10)==="Typewriter"){for(var b=[],A=0;A<r.length;A++)b.push(fi(r[A],d,i,e,n.concat(p)));return w4(b)}}if(s==="mathord")return fi(r,"Math-Italic",i,e,n.concat(["mathnormal"]));if(s==="textord"){var _=qt[i][r]&&qt[i][r].font;if(_==="ams"){var k=qh("amsrm",e.fontWeight,e.fontShape);return fi(r,k,i,e,n.concat("amsrm",e.fontWeight,e.fontShape))}else if(_==="main"||!_){var C=qh("textrm",e.fontWeight,e.fontShape);return fi(r,C,i,e,n.concat(e.fontWeight,e.fontShape))}else{var R=qh(_,e.fontWeight,e.fontShape);return fi(r,R,i,e,n.concat(R,e.fontWeight,e.fontShape))}}else throw new Error("unexpected type: "+s+" in makeOrd")},J3=(a,t)=>{if(xn(a.classes)!==xn(t.classes)||a.skew!==t.skew||a.maxFontSize!==t.maxFontSize)return!1;if(a.classes.length===1){var e=a.classes[0];if(e==="mbin"||e==="mord")return!1}for(var s in a.style)if(a.style.hasOwnProperty(s)&&a.style[s]!==t.style[s])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&a.style[i]!==t.style[i])return!1;return!0},t6=a=>{for(var t=0;t<a.length-1;t++){var e=a[t],s=a[t+1];e instanceof Ys&&s instanceof Ys&&J3(e,s)&&(e.text+=s.text,e.height=Math.max(e.height,s.height),e.depth=Math.max(e.depth,s.depth),e.italic=s.italic,a.splice(t+1,1),t--)}return a},R1=function(t){for(var e=0,s=0,i=0,r=0;r<t.children.length;r++){var n=t.children[r];n.height>e&&(e=n.height),n.depth>s&&(s=n.depth),n.maxFontSize>i&&(i=n.maxFontSize)}t.height=e,t.depth=s,t.maxFontSize=i},fs=function(t,e,s,i){var r=new Th(t,e,s,i);return R1(r),r},y4=(a,t,e,s)=>new Th(a,t,e,s),e6=function(t,e,s){var i=fs([t],[],e);return i.height=Math.max(s||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),i.style.borderBottomWidth=G(i.height),i.maxFontSize=1,i},s6=function(t,e,s,i){var r=new M1(t,e,s,i);return R1(r),r},w4=function(t){var e=new _h(t);return R1(e),e},i6=function(t,e){return t instanceof _h?fs([],[t],e):t},r6=function(t){if(t.positionType==="individualShift"){for(var e=t.children,s=[e[0]],i=-e[0].shift-e[0].elem.depth,r=i,n=1;n<e.length;n++){var l=-e[n].shift-r-e[n].elem.depth,h=l-(e[n-1].elem.height+e[n-1].elem.depth);r=r+l,s.push({type:"kern",size:h}),s.push(e[n])}return{children:s,depth:i}}var c;if(t.positionType==="top"){for(var u=t.positionData,d=0;d<t.children.length;d++){var p=t.children[d];u-=p.type==="kern"?p.size:p.elem.height+p.elem.depth}c=u}else if(t.positionType==="bottom")c=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")c=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")c=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:c}},n6=function(t,e){for(var{children:s,depth:i}=r6(t),r=0,n=0;n<s.length;n++){var l=s[n];if(l.type==="elem"){var h=l.elem;r=Math.max(r,h.maxFontSize,h.height)}}r+=2;var c=fs(["pstrut"],[]);c.style.height=G(r);for(var u=[],d=i,p=i,g=i,b=0;b<s.length;b++){var A=s[b];if(A.type==="kern")g+=A.size;else{var _=A.elem,k=A.wrapperClasses||[],C=A.wrapperStyle||{},R=fs(k,[c,_],void 0,C);R.style.top=G(-r-g-_.depth),A.marginLeft&&(R.style.marginLeft=A.marginLeft),A.marginRight&&(R.style.marginRight=A.marginRight),u.push(R),g+=_.height+_.depth}d=Math.min(d,g),p=Math.max(p,g)}var P=fs(["vlist"],u);P.style.height=G(p);var I;if(d<0){var N=fs([],[]),L=fs(["vlist"],[N]);L.style.height=G(-d);var z=fs(["vlist-s"],[new Ys("​")]);I=[fs(["vlist-r"],[P,z]),fs(["vlist-r"],[L])]}else I=[fs(["vlist-r"],[P])];var q=fs(["vlist-t"],I);return I.length===2&&q.classes.push("vlist-t2"),q.height=p,q.depth=-d,q},a6=(a,t)=>{var e=fs(["mspace"],[],t),s=te(a,t);return e.style.marginRight=G(s),e},qh=function(t,e,s){var i="";switch(t){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=t}var r;return e==="textbf"&&s==="textit"?r="BoldItalic":e==="textbf"?r="Bold":e==="textit"?r="Italic":r="Regular",i+"-"+r},A4={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},x4={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},o6=function(t,e){var[s,i,r]=x4[t],n=new Sn(s),l=new Rr([n],{width:G(i),height:G(r),style:"width:"+G(i),viewBox:"0 0 "+1e3*i+" "+1e3*r,preserveAspectRatio:"xMinYMin"}),h=y4(["overlay"],[l],e);return h.height=r,h.style.height=G(r),h.style.width=G(i),h},D={fontMap:A4,makeSymbol:fi,mathsym:K3,makeSpan:fs,makeSvgSpan:y4,makeLineSpan:e6,makeAnchor:s6,makeFragment:w4,wrapFragment:i6,makeVList:n6,makeOrd:Q3,makeGlue:a6,staticSvg:o6,svgData:x4,tryCombineChars:t6},Jt={number:3,unit:"mu"},Dn={number:4,unit:"mu"},ji={number:5,unit:"mu"},l6={mord:{mop:Jt,mbin:Dn,mrel:ji,minner:Jt},mop:{mord:Jt,mop:Jt,mrel:ji,minner:Jt},mbin:{mord:Dn,mop:Dn,mopen:Dn,minner:Dn},mrel:{mord:ji,mop:ji,mopen:ji,minner:ji},mopen:{},mclose:{mop:Jt,mbin:Dn,mrel:ji,minner:Jt},mpunct:{mord:Jt,mop:Jt,mrel:ji,mopen:Jt,mclose:Jt,mpunct:Jt,minner:Jt},minner:{mord:Jt,mop:Jt,mbin:Dn,mrel:ji,mopen:Jt,mpunct:Jt,minner:Jt}},h6={mord:{mop:Jt},mop:{mord:Jt,mop:Jt},mbin:{},mrel:{},mopen:{},mclose:{mop:Jt},mpunct:{},minner:{mop:Jt}},S4={},Lc={},Nc={};function W(a){for(var{type:t,names:e,props:s,handler:i,htmlBuilder:r,mathmlBuilder:n}=a,l={type:t,numArgs:s.numArgs,argTypes:s.argTypes,allowedInArgument:!!s.allowedInArgument,allowedInText:!!s.allowedInText,allowedInMath:s.allowedInMath===void 0?!0:s.allowedInMath,numOptionalArgs:s.numOptionalArgs||0,infix:!!s.infix,primitive:!!s.primitive,handler:i},h=0;h<e.length;++h)S4[e[h]]=l;t&&(r&&(Lc[t]=r),n&&(Nc[t]=n))}function ja(a){var{type:t,htmlBuilder:e,mathmlBuilder:s}=a;W({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:e,mathmlBuilder:s})}var Fc=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},le=function(t){return t.type==="ordgroup"?t.body:[t]},Pr=D.makeSpan,c6=["leftmost","mbin","mopen","mrel","mop","mpunct"],u6=["rightmost","mrel","mclose","mpunct"],d6={display:rt.DISPLAY,text:rt.TEXT,script:rt.SCRIPT,scriptscript:rt.SCRIPTSCRIPT},f6={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ae=function(t,e,s,i){i===void 0&&(i=[null,null]);for(var r=[],n=0;n<t.length;n++){var l=kt(t[n],e);if(l instanceof _h){var h=l.children;r.push(...h)}else r.push(l)}if(D.tryCombineChars(r),!s)return r;var c=e;if(t.length===1){var u=t[0];u.type==="sizing"?c=e.havingSize(u.size):u.type==="styling"&&(c=e.havingStyle(d6[u.style]))}var d=Pr([i[0]||"leftmost"],[],e),p=Pr([i[1]||"rightmost"],[],e),g=s==="root";return Bf(r,(b,A)=>{var _=A.classes[0],k=b.classes[0];_==="mbin"&&u6.includes(k)?A.classes[0]="mord":k==="mbin"&&c6.includes(_)&&(b.classes[0]="mord")},{node:d},p,g),Bf(r,(b,A)=>{var _=u1(A),k=u1(b),C=_&&k?b.hasClass("mtight")?h6[_][k]:l6[_][k]:null;if(C)return D.makeGlue(C,c)},{node:d},p,g),r},Bf=function a(t,e,s,i,r){i&&t.push(i);for(var n=0;n<t.length;n++){var l=t[n],h=k4(l);if(h){a(h.children,e,s,null,r);continue}var c=!l.hasClass("mspace");if(c){var u=e(l,s.node);u&&(s.insertAfter?s.insertAfter(u):(t.unshift(u),n++))}c?s.node=l:r&&l.hasClass("newline")&&(s.node=Pr(["leftmost"])),s.insertAfter=(d=>p=>{t.splice(d+1,0,p),n++})(n)}i&&t.pop()},k4=function(t){return t instanceof _h||t instanceof M1||t instanceof Th&&t.hasClass("enclosing")?t:null},p6=function a(t,e){var s=k4(t);if(s){var i=s.children;if(i.length){if(e==="right")return a(i[i.length-1],"right");if(e==="left")return a(i[0],"left")}}return t},u1=function(t,e){return t?(e&&(t=p6(t,e)),f6[t.classes[0]]||null):null},K0=function(t,e){var s=["nulldelimiter"].concat(t.baseSizingClasses());return Pr(e.concat(s))},kt=function(t,e,s){if(!t)return Pr();if(Lc[t.type]){var i=Lc[t.type](t,e);if(s&&e.size!==s.size){i=Pr(e.sizingClasses(s),[i],e);var r=e.sizeMultiplier/s.sizeMultiplier;i.height*=r,i.depth*=r}return i}else throw new H("Got group of unknown type: '"+t.type+"'")};function Gh(a,t){var e=Pr(["base"],a,t),s=Pr(["strut"]);return s.style.height=G(e.height+e.depth),e.depth&&(s.style.verticalAlign=G(-e.depth)),e.children.unshift(s),e}function d1(a,t){var e=null;a.length===1&&a[0].type==="tag"&&(e=a[0].tag,a=a[0].body);var s=Ae(a,t,"root"),i;s.length===2&&s[1].hasClass("tag")&&(i=s.pop());for(var r=[],n=[],l=0;l<s.length;l++)if(n.push(s[l]),s[l].hasClass("mbin")||s[l].hasClass("mrel")||s[l].hasClass("allowbreak")){for(var h=!1;l<s.length-1&&s[l+1].hasClass("mspace")&&!s[l+1].hasClass("newline");)l++,n.push(s[l]),s[l].hasClass("nobreak")&&(h=!0);h||(r.push(Gh(n,t)),n=[])}else s[l].hasClass("newline")&&(n.pop(),n.length>0&&(r.push(Gh(n,t)),n=[]),r.push(s[l]));n.length>0&&r.push(Gh(n,t));var c;e?(c=Gh(Ae(e,t,!0)),c.classes=["tag"],r.push(c)):i&&r.push(i);var u=Pr(["katex-html"],r);if(u.setAttribute("aria-hidden","true"),c){var d=c.children[0];d.style.height=G(u.height+u.depth),u.depth&&(d.style.verticalAlign=G(-u.depth))}return u}function _4(a){return new _h(a)}class Ds{constructor(t,e,s){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=e||[],this.classes=s||[]}setAttribute(t,e){this.attributes[t]=e}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);this.classes.length>0&&(t.className=xn(this.classes));for(var s=0;s<this.children.length;s++)if(this.children[s]instanceof Hi&&this.children[s+1]instanceof Hi){for(var i=this.children[s].toText()+this.children[++s].toText();this.children[s+1]instanceof Hi;)i+=this.children[++s].toText();t.appendChild(new Hi(i).toNode())}else t.appendChild(this.children[s].toNode());return t}toMarkup(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=_t.escape(this.attributes[e]),t+='"');this.classes.length>0&&(t+=' class ="'+_t.escape(xn(this.classes))+'"'),t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class Hi{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return _t.escape(this.toText())}toText(){return this.text}}class m6{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character=" ":t>=.1666&&t<=.1667?this.character=" ":t>=.2222&&t<=.2223?this.character=" ":t>=.2777&&t<=.2778?this.character="  ":t>=-.05556&&t<=-.05555?this.character=" ⁣":t>=-.1667&&t<=-.1666?this.character=" ⁣":t>=-.2223&&t<=-.2222?this.character=" ⁣":t>=-.2778&&t<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",G(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+G(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var B={MathNode:Ds,TextNode:Hi,SpaceNode:m6,newDocumentFragment:_4},Ks=function(t,e,s){return qt[e][t]&&qt[e][t].replace&&t.charCodeAt(0)!==55349&&!(b4.hasOwnProperty(t)&&s&&(s.fontFamily&&s.fontFamily.slice(4,6)==="tt"||s.font&&s.font.slice(4,6)==="tt"))&&(t=qt[e][t].replace),new B.TextNode(t)},P1=function(t){return t.length===1?t[0]:new B.MathNode("mrow",t)},D1=function(t,e){if(e.fontFamily==="texttt")return"monospace";if(e.fontFamily==="textsf")return e.fontShape==="textit"&&e.fontWeight==="textbf"?"sans-serif-bold-italic":e.fontShape==="textit"?"sans-serif-italic":e.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(e.fontShape==="textit"&&e.fontWeight==="textbf")return"bold-italic";if(e.fontShape==="textit")return"italic";if(e.fontWeight==="textbf")return"bold";var s=e.font;if(!s||s==="mathnormal")return null;var i=t.mode;if(s==="mathit")return"italic";if(s==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(s==="mathbf")return"bold";if(s==="mathbb")return"double-struck";if(s==="mathsfit")return"sans-serif-italic";if(s==="mathfrak")return"fraktur";if(s==="mathscr"||s==="mathcal")return"script";if(s==="mathsf")return"sans-serif";if(s==="mathtt")return"monospace";var r=t.text;if(["\\imath","\\jmath"].includes(r))return null;qt[i][r]&&qt[i][r].replace&&(r=qt[i][r].replace);var n=D.fontMap[s].fontName;return C1(r,n,i)?D.fontMap[s].variant:null};function Ou(a){if(!a)return!1;if(a.type==="mi"&&a.children.length===1){var t=a.children[0];return t instanceof Hi&&t.text==="."}else if(a.type==="mo"&&a.children.length===1&&a.getAttribute("separator")==="true"&&a.getAttribute("lspace")==="0em"&&a.getAttribute("rspace")==="0em"){var e=a.children[0];return e instanceof Hi&&e.text===","}else return!1}var gs=function(t,e,s){if(t.length===1){var i=Bt(t[0],e);return s&&i instanceof Ds&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var r=[],n,l=0;l<t.length;l++){var h=Bt(t[l],e);if(h instanceof Ds&&n instanceof Ds){if(h.type==="mtext"&&n.type==="mtext"&&h.getAttribute("mathvariant")===n.getAttribute("mathvariant")){n.children.push(...h.children);continue}else if(h.type==="mn"&&n.type==="mn"){n.children.push(...h.children);continue}else if(Ou(h)&&n.type==="mn"){n.children.push(...h.children);continue}else if(h.type==="mn"&&Ou(n))h.children=[...n.children,...h.children],r.pop();else if((h.type==="msup"||h.type==="msub")&&h.children.length>=1&&(n.type==="mn"||Ou(n))){var c=h.children[0];c instanceof Ds&&c.type==="mn"&&(c.children=[...n.children,...c.children],r.pop())}else if(n.type==="mi"&&n.children.length===1){var u=n.children[0];if(u instanceof Hi&&u.text==="̸"&&(h.type==="mo"||h.type==="mi"||h.type==="mn")){var d=h.children[0];d instanceof Hi&&d.text.length>0&&(d.text=d.text.slice(0,1)+"̸"+d.text.slice(1),r.pop())}}}r.push(h),n=h}return r},kn=function(t,e,s){return P1(gs(t,e,s))},Bt=function(t,e){if(!t)return new B.MathNode("mrow");if(Nc[t.type]){var s=Nc[t.type](t,e);return s}else throw new H("Got group of unknown type: '"+t.type+"'")};function Hf(a,t,e,s,i){var r=gs(a,e),n;r.length===1&&r[0]instanceof Ds&&["mrow","mtable"].includes(r[0].type)?n=r[0]:n=new B.MathNode("mrow",r);var l=new B.MathNode("annotation",[new B.TextNode(t)]);l.setAttribute("encoding","application/x-tex");var h=new B.MathNode("semantics",[n,l]),c=new B.MathNode("math",[h]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),s&&c.setAttribute("display","block");var u=i?"katex":"katex-mathml";return D.makeSpan([u],[c])}var T4=function(t){return new Ji({style:t.displayMode?rt.DISPLAY:rt.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},E4=function(t,e){if(e.displayMode){var s=["katex-display"];e.leqno&&s.push("leqno"),e.fleqn&&s.push("fleqn"),t=D.makeSpan(s,[t])}return t},g6=function(t,e,s){var i=T4(s),r;if(s.output==="mathml")return Hf(t,e,i,s.displayMode,!0);if(s.output==="html"){var n=d1(t,i);r=D.makeSpan(["katex"],[n])}else{var l=Hf(t,e,i,s.displayMode,!1),h=d1(t,i);r=D.makeSpan(["katex"],[l,h])}return E4(r,s)},v6=function(t,e,s){var i=T4(s),r=d1(t,i),n=D.makeSpan(["katex"],[r]);return E4(n,s)},b6={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},y6=function(t){var e=new B.MathNode("mo",[new B.TextNode(b6[t.replace(/^\\/,"")])]);return e.setAttribute("stretchy","true"),e},w6={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},A6=function(t){return t.type==="ordgroup"?t.body.length:1},x6=function(t,e){function s(){var l=4e5,h=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(h)){var c=t,u=A6(c.base),d,p,g;if(u>5)h==="widehat"||h==="widecheck"?(d=420,l=2364,g=.42,p=h+"4"):(d=312,l=2340,g=.34,p="tilde4");else{var b=[1,1,2,2,3,3][u];h==="widehat"||h==="widecheck"?(l=[0,1062,2364,2364,2364][b],d=[0,239,300,360,420][b],g=[0,.24,.3,.3,.36,.42][b],p=h+b):(l=[0,600,1033,2339,2340][b],d=[0,260,286,306,312][b],g=[0,.26,.286,.3,.306,.34][b],p="tilde"+b)}var A=new Sn(p),_=new Rr([A],{width:"100%",height:G(g),viewBox:"0 0 "+l+" "+d,preserveAspectRatio:"none"});return{span:D.makeSvgSpan([],[_],e),minWidth:0,height:g}}else{var k=[],C=w6[h],[R,P,I]=C,N=I/1e3,L=R.length,z,q;if(L===1){var st=C[3];z=["hide-tail"],q=[st]}else if(L===2)z=["halfarrow-left","halfarrow-right"],q=["xMinYMin","xMaxYMin"];else if(L===3)z=["brace-left","brace-center","brace-right"],q=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+L+" children.");for(var X=0;X<L;X++){var ot=new Sn(R[X]),Et=new Rr([ot],{width:"400em",height:G(N),viewBox:"0 0 "+l+" "+I,preserveAspectRatio:q[X]+" slice"}),ct=D.makeSvgSpan([z[X]],[Et],e);if(L===1)return{span:ct,minWidth:P,height:N};ct.style.height=G(N),k.push(ct)}return{span:D.makeSpan(["stretchy"],k,e),minWidth:P,height:N}}}var{span:i,minWidth:r,height:n}=s();return i.height=n,i.style.height=G(n),r>0&&(i.style.minWidth=G(r)),i},S6=function(t,e,s,i,r){var n,l=t.height+t.depth+s+i;if(/fbox|color|angl/.test(e)){if(n=D.makeSpan(["stretchy",e],[],r),e==="fbox"){var h=r.color&&r.getColor();h&&(n.style.borderColor=h)}}else{var c=[];/^[bx]cancel$/.test(e)&&c.push(new h1({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&c.push(new h1({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new Rr(c,{width:"100%",height:G(l)});n=D.makeSvgSpan([],[u],r)}return n.height=l,n.style.height=G(l),n},Dr={encloseSpan:S6,mathMLnode:y6,svgSpan:x6};function mt(a,t){if(!a||a.type!==t)throw new Error("Expected node of type "+t+", but got "+(a?"node of type "+a.type:String(a)));return a}function I1(a){var t=du(a);if(!t)throw new Error("Expected node of symbol group type, but got "+(a?"node of type "+a.type:String(a)));return t}function du(a){return a&&(a.type==="atom"||X3.hasOwnProperty(a.type))?a:null}var L1=(a,t)=>{var e,s,i;a&&a.type==="supsub"?(s=mt(a.base,"accent"),e=s.base,a.base=e,i=W3(kt(a,t)),a.base=s):(s=mt(a,"accent"),e=s.base);var r=kt(e,t.havingCrampedStyle()),n=s.isShifty&&_t.isCharacterBox(e),l=0;if(n){var h=_t.getBaseElem(e),c=kt(h,t.havingCrampedStyle());l=If(c).skew}var u=s.label==="\\c",d=u?r.height+r.depth:Math.min(r.height,t.fontMetrics().xHeight),p;if(s.isStretchy)p=Dr.svgSpan(s,t),p=D.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"elem",elem:p,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+G(2*l)+")",marginLeft:G(2*l)}:void 0}]},t);else{var g,b;s.label==="\\vec"?(g=D.staticSvg("vec",t),b=D.svgData.vec[1]):(g=D.makeOrd({mode:s.mode,text:s.label},t,"textord"),g=If(g),g.italic=0,b=g.width,u&&(d+=g.depth)),p=D.makeSpan(["accent-body"],[g]);var A=s.label==="\\textcircled";A&&(p.classes.push("accent-full"),d=r.height);var _=l;A||(_-=b/2),p.style.left=G(_),s.label==="\\textcircled"&&(p.style.top=".2em"),p=D.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:-d},{type:"elem",elem:p}]},t)}var k=D.makeSpan(["mord","accent"],[p],t);return i?(i.children[0]=k,i.height=Math.max(k.height,i.height),i.classes[0]="mord",i):k},C4=(a,t)=>{var e=a.isStretchy?Dr.mathMLnode(a.label):new B.MathNode("mo",[Ks(a.label,a.mode)]),s=new B.MathNode("mover",[Bt(a.base,t),e]);return s.setAttribute("accent","true"),s},k6=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(a=>"\\"+a).join("|"));W({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(a,t)=>{var e=Fc(t[0]),s=!k6.test(a.funcName),i=!s||a.funcName==="\\widehat"||a.funcName==="\\widetilde"||a.funcName==="\\widecheck";return{type:"accent",mode:a.parser.mode,label:a.funcName,isStretchy:s,isShifty:i,base:e}},htmlBuilder:L1,mathmlBuilder:C4});W({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(a,t)=>{var e=t[0],s=a.parser.mode;return s==="math"&&(a.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+a.funcName+" works only in text mode"),s="text"),{type:"accent",mode:s,label:a.funcName,isStretchy:!1,isShifty:!0,base:e}},htmlBuilder:L1,mathmlBuilder:C4});W({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(a,t)=>{var{parser:e,funcName:s}=a,i=t[0];return{type:"accentUnder",mode:e.mode,label:s,base:i}},htmlBuilder:(a,t)=>{var e=kt(a.base,t),s=Dr.svgSpan(a,t),i=a.label==="\\utilde"?.12:0,r=D.makeVList({positionType:"top",positionData:e.height,children:[{type:"elem",elem:s,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:e}]},t);return D.makeSpan(["mord","accentunder"],[r],t)},mathmlBuilder:(a,t)=>{var e=Dr.mathMLnode(a.label),s=new B.MathNode("munder",[Bt(a.base,t),e]);return s.setAttribute("accentunder","true"),s}});var $h=a=>{var t=new B.MathNode("mpadded",a?[a]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};W({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(a,t,e){var{parser:s,funcName:i}=a;return{type:"xArrow",mode:s.mode,label:i,body:t[0],below:e[0]}},htmlBuilder(a,t){var e=t.style,s=t.havingStyle(e.sup()),i=D.wrapFragment(kt(a.body,s,t),t),r=a.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(r+"-arrow-pad");var n;a.below&&(s=t.havingStyle(e.sub()),n=D.wrapFragment(kt(a.below,s,t),t),n.classes.push(r+"-arrow-pad"));var l=Dr.svgSpan(a,t),h=-t.fontMetrics().axisHeight+.5*l.height,c=-t.fontMetrics().axisHeight-.5*l.height-.111;(i.depth>.25||a.label==="\\xleftequilibrium")&&(c-=i.depth);var u;if(n){var d=-t.fontMetrics().axisHeight+n.height+.5*l.height+.111;u=D.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:l,shift:h},{type:"elem",elem:n,shift:d}]},t)}else u=D.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:l,shift:h}]},t);return u.children[0].children[0].children[1].classes.push("svg-align"),D.makeSpan(["mrel","x-arrow"],[u],t)},mathmlBuilder(a,t){var e=Dr.mathMLnode(a.label);e.setAttribute("minsize",a.label.charAt(0)==="x"?"1.75em":"3.0em");var s;if(a.body){var i=$h(Bt(a.body,t));if(a.below){var r=$h(Bt(a.below,t));s=new B.MathNode("munderover",[e,r,i])}else s=new B.MathNode("mover",[e,i])}else if(a.below){var n=$h(Bt(a.below,t));s=new B.MathNode("munder",[e,n])}else s=$h(),s=new B.MathNode("mover",[e,s]);return s}});var _6=D.makeSpan;function M4(a,t){var e=Ae(a.body,t,!0);return _6([a.mclass],e,t)}function R4(a,t){var e,s=gs(a.body,t);return a.mclass==="minner"?e=new B.MathNode("mpadded",s):a.mclass==="mord"?a.isCharacterBox?(e=s[0],e.type="mi"):e=new B.MathNode("mi",s):(a.isCharacterBox?(e=s[0],e.type="mo"):e=new B.MathNode("mo",s),a.mclass==="mbin"?(e.attributes.lspace="0.22em",e.attributes.rspace="0.22em"):a.mclass==="mpunct"?(e.attributes.lspace="0em",e.attributes.rspace="0.17em"):a.mclass==="mopen"||a.mclass==="mclose"?(e.attributes.lspace="0em",e.attributes.rspace="0em"):a.mclass==="minner"&&(e.attributes.lspace="0.0556em",e.attributes.width="+0.1111em")),e}W({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(a,t){var{parser:e,funcName:s}=a,i=t[0];return{type:"mclass",mode:e.mode,mclass:"m"+s.slice(5),body:le(i),isCharacterBox:_t.isCharacterBox(i)}},htmlBuilder:M4,mathmlBuilder:R4});var fu=a=>{var t=a.type==="ordgroup"&&a.body.length?a.body[0]:a;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};W({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(a,t){var{parser:e}=a;return{type:"mclass",mode:e.mode,mclass:fu(t[0]),body:le(t[1]),isCharacterBox:_t.isCharacterBox(t[1])}}});W({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(a,t){var{parser:e,funcName:s}=a,i=t[1],r=t[0],n;s!=="\\stackrel"?n=fu(i):n="mrel";var l={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:s!=="\\stackrel",body:le(i)},h={type:"supsub",mode:r.mode,base:l,sup:s==="\\underset"?null:r,sub:s==="\\underset"?r:null};return{type:"mclass",mode:e.mode,mclass:n,body:[h],isCharacterBox:_t.isCharacterBox(h)}},htmlBuilder:M4,mathmlBuilder:R4});W({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(a,t){var{parser:e}=a;return{type:"pmb",mode:e.mode,mclass:fu(t[0]),body:le(t[0])}},htmlBuilder(a,t){var e=Ae(a.body,t,!0),s=D.makeSpan([a.mclass],e,t);return s.style.textShadow="0.02em 0.01em 0.04px",s},mathmlBuilder(a,t){var e=gs(a.body,t),s=new B.MathNode("mstyle",e);return s.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),s}});var T6={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},qf=()=>({type:"styling",body:[],mode:"math",style:"display"}),Gf=a=>a.type==="textord"&&a.text==="@",E6=(a,t)=>(a.type==="mathord"||a.type==="atom")&&a.text===t;function C6(a,t,e){var s=T6[a];switch(s){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return e.callFunction(s,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var i=e.callFunction("\\\\cdleft",[t[0]],[]),r={type:"atom",text:s,mode:"math",family:"rel"},n=e.callFunction("\\Big",[r],[]),l=e.callFunction("\\\\cdright",[t[1]],[]),h={type:"ordgroup",mode:"math",body:[i,n,l]};return e.callFunction("\\\\cdparent",[h],[])}case"\\\\cdlongequal":return e.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return e.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function M6(a){var t=[];for(a.gullet.beginGroup(),a.gullet.macros.set("\\cr","\\\\\\relax"),a.gullet.beginGroup();;){t.push(a.parseExpression(!1,"\\\\")),a.gullet.endGroup(),a.gullet.beginGroup();var e=a.fetch().text;if(e==="&"||e==="\\\\")a.consume();else if(e==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new H("Expected \\\\ or \\cr or \\end",a.nextToken)}for(var s=[],i=[s],r=0;r<t.length;r++){for(var n=t[r],l=qf(),h=0;h<n.length;h++)if(!Gf(n[h]))l.body.push(n[h]);else{s.push(l),h+=1;var c=I1(n[h]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var d=0;d<2;d++){for(var p=!0,g=h+1;g<n.length;g++){if(E6(n[g],c)){p=!1,h=g;break}if(Gf(n[g]))throw new H("Missing a "+c+" character to complete a CD arrow.",n[g]);u[d].body.push(n[g])}if(p)throw new H("Missing a "+c+" character to complete a CD arrow.",n[h])}else throw new H('Expected one of "<>AV=|." after @',n[h]);var b=C6(c,u,a),A={type:"styling",body:[b],mode:"math",style:"display"};s.push(A),l=qf()}r%2===0?s.push(l):s.shift(),s=[],i.push(s)}a.gullet.endGroup(),a.gullet.endGroup();var _=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:_,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}W({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(a,t){var{parser:e,funcName:s}=a;return{type:"cdlabel",mode:e.mode,side:s.slice(4),label:t[0]}},htmlBuilder(a,t){var e=t.havingStyle(t.style.sup()),s=D.wrapFragment(kt(a.label,e,t),t);return s.classes.push("cd-label-"+a.side),s.style.bottom=G(.8-s.depth),s.height=0,s.depth=0,s},mathmlBuilder(a,t){var e=new B.MathNode("mrow",[Bt(a.label,t)]);return e=new B.MathNode("mpadded",[e]),e.setAttribute("width","0"),a.side==="left"&&e.setAttribute("lspace","-1width"),e.setAttribute("voffset","0.7em"),e=new B.MathNode("mstyle",[e]),e.setAttribute("displaystyle","false"),e.setAttribute("scriptlevel","1"),e}});W({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(a,t){var{parser:e}=a;return{type:"cdlabelparent",mode:e.mode,fragment:t[0]}},htmlBuilder(a,t){var e=D.wrapFragment(kt(a.fragment,t),t);return e.classes.push("cd-vert-arrow"),e},mathmlBuilder(a,t){return new B.MathNode("mrow",[Bt(a.fragment,t)])}});W({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(a,t){for(var{parser:e}=a,s=mt(t[0],"ordgroup"),i=s.body,r="",n=0;n<i.length;n++){var l=mt(i[n],"textord");r+=l.text}var h=parseInt(r),c;if(isNaN(h))throw new H("\\@char has non-numeric argument "+r);if(h<0||h>=1114111)throw new H("\\@char with invalid code point "+r);return h<=65535?c=String.fromCharCode(h):(h-=65536,c=String.fromCharCode((h>>10)+55296,(h&1023)+56320)),{type:"textord",mode:e.mode,text:c}}});var P4=(a,t)=>{var e=Ae(a.body,t.withColor(a.color),!1);return D.makeFragment(e)},D4=(a,t)=>{var e=gs(a.body,t.withColor(a.color)),s=new B.MathNode("mstyle",e);return s.setAttribute("mathcolor",a.color),s};W({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(a,t){var{parser:e}=a,s=mt(t[0],"color-token").color,i=t[1];return{type:"color",mode:e.mode,color:s,body:le(i)}},htmlBuilder:P4,mathmlBuilder:D4});W({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(a,t){var{parser:e,breakOnTokenText:s}=a,i=mt(t[0],"color-token").color;e.gullet.macros.set("\\current@color",i);var r=e.parseExpression(!0,s);return{type:"color",mode:e.mode,color:i,body:r}},htmlBuilder:P4,mathmlBuilder:D4});W({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(a,t,e){var{parser:s}=a,i=s.gullet.future().text==="["?s.parseSizeGroup(!0):null,r=!s.settings.displayMode||!s.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:s.mode,newLine:r,size:i&&mt(i,"size").value}},htmlBuilder(a,t){var e=D.makeSpan(["mspace"],[],t);return a.newLine&&(e.classes.push("newline"),a.size&&(e.style.marginTop=G(te(a.size,t)))),e},mathmlBuilder(a,t){var e=new B.MathNode("mspace");return a.newLine&&(e.setAttribute("linebreak","newline"),a.size&&e.setAttribute("height",G(te(a.size,t)))),e}});var f1={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},I4=a=>{var t=a.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new H("Expected a control sequence",a);return t},R6=a=>{var t=a.gullet.popToken();return t.text==="="&&(t=a.gullet.popToken(),t.text===" "&&(t=a.gullet.popToken())),t},L4=(a,t,e,s)=>{var i=a.gullet.macros.get(e.text);i==null&&(e.noexpand=!0,i={tokens:[e],numArgs:0,unexpandable:!a.gullet.isExpandable(e.text)}),a.gullet.macros.set(t,i,s)};W({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(a){var{parser:t,funcName:e}=a;t.consumeSpaces();var s=t.fetch();if(f1[s.text])return(e==="\\global"||e==="\\\\globallong")&&(s.text=f1[s.text]),mt(t.parseFunction(),"internal");throw new H("Invalid token after macro prefix",s)}});W({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(a){var{parser:t,funcName:e}=a,s=t.gullet.popToken(),i=s.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new H("Expected a control sequence",s);for(var r=0,n,l=[[]];t.gullet.future().text!=="{";)if(s=t.gullet.popToken(),s.text==="#"){if(t.gullet.future().text==="{"){n=t.gullet.future(),l[r].push("{");break}if(s=t.gullet.popToken(),!/^[1-9]$/.test(s.text))throw new H('Invalid argument number "'+s.text+'"');if(parseInt(s.text)!==r+1)throw new H('Argument number "'+s.text+'" out of order');r++,l.push([])}else{if(s.text==="EOF")throw new H("Expected a macro definition");l[r].push(s.text)}var{tokens:h}=t.gullet.consumeArg();return n&&h.unshift(n),(e==="\\edef"||e==="\\xdef")&&(h=t.gullet.expandTokens(h),h.reverse()),t.gullet.macros.set(i,{tokens:h,numArgs:r,delimiters:l},e===f1[e]),{type:"internal",mode:t.mode}}});W({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(a){var{parser:t,funcName:e}=a,s=I4(t.gullet.popToken());t.gullet.consumeSpaces();var i=R6(t);return L4(t,s,i,e==="\\\\globallet"),{type:"internal",mode:t.mode}}});W({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(a){var{parser:t,funcName:e}=a,s=I4(t.gullet.popToken()),i=t.gullet.popToken(),r=t.gullet.popToken();return L4(t,s,r,e==="\\\\globalfuture"),t.gullet.pushToken(r),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var G0=function(t,e,s){var i=qt.math[t]&&qt.math[t].replace,r=C1(i||t,e,s);if(!r)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return r},N1=function(t,e,s,i){var r=s.havingBaseStyle(e),n=D.makeSpan(i.concat(r.sizingClasses(s)),[t],s),l=r.sizeMultiplier/s.sizeMultiplier;return n.height*=l,n.depth*=l,n.maxFontSize=r.sizeMultiplier,n},N4=function(t,e,s){var i=e.havingBaseStyle(s),r=(1-e.sizeMultiplier/i.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=G(r),t.height-=r,t.depth+=r},P6=function(t,e,s,i,r,n){var l=D.makeSymbol(t,"Main-Regular",r,i),h=N1(l,e,i,n);return s&&N4(h,i,e),h},D6=function(t,e,s,i){return D.makeSymbol(t,"Size"+e+"-Regular",s,i)},F4=function(t,e,s,i,r,n){var l=D6(t,e,r,i),h=N1(D.makeSpan(["delimsizing","size"+e],[l],i),rt.TEXT,i,n);return s&&N4(h,i,rt.TEXT),h},zu=function(t,e,s){var i;e==="Size1-Regular"?i="delim-size1":i="delim-size4";var r=D.makeSpan(["delimsizinginner",i],[D.makeSpan([],[D.makeSymbol(t,e,s)])]);return{type:"elem",elem:r}},Bu=function(t,e,s){var i=Bi["Size4-Regular"][t.charCodeAt(0)]?Bi["Size4-Regular"][t.charCodeAt(0)][4]:Bi["Size1-Regular"][t.charCodeAt(0)][4],r=new Sn("inner",O3(t,Math.round(1e3*e))),n=new Rr([r],{width:G(i),height:G(e),style:"width:"+G(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*e),preserveAspectRatio:"xMinYMin"}),l=D.makeSvgSpan([],[n],s);return l.height=e,l.style.height=G(e),l.style.width=G(i),{type:"elem",elem:l}},p1=.008,Vh={type:"kern",size:-1*p1},I6=["|","\\lvert","\\rvert","\\vert"],L6=["\\|","\\lVert","\\rVert","\\Vert"],O4=function(t,e,s,i,r,n){var l,h,c,u,d="",p=0;l=c=u=t,h=null;var g="Size1-Regular";t==="\\uparrow"?c=u="⏐":t==="\\Uparrow"?c=u="‖":t==="\\downarrow"?l=c="⏐":t==="\\Downarrow"?l=c="‖":t==="\\updownarrow"?(l="\\uparrow",c="⏐",u="\\downarrow"):t==="\\Updownarrow"?(l="\\Uparrow",c="‖",u="\\Downarrow"):I6.includes(t)?(c="∣",d="vert",p=333):L6.includes(t)?(c="∥",d="doublevert",p=556):t==="["||t==="\\lbrack"?(l="⎡",c="⎢",u="⎣",g="Size4-Regular",d="lbrack",p=667):t==="]"||t==="\\rbrack"?(l="⎤",c="⎥",u="⎦",g="Size4-Regular",d="rbrack",p=667):t==="\\lfloor"||t==="⌊"?(c=l="⎢",u="⎣",g="Size4-Regular",d="lfloor",p=667):t==="\\lceil"||t==="⌈"?(l="⎡",c=u="⎢",g="Size4-Regular",d="lceil",p=667):t==="\\rfloor"||t==="⌋"?(c=l="⎥",u="⎦",g="Size4-Regular",d="rfloor",p=667):t==="\\rceil"||t==="⌉"?(l="⎤",c=u="⎥",g="Size4-Regular",d="rceil",p=667):t==="("||t==="\\lparen"?(l="⎛",c="⎜",u="⎝",g="Size4-Regular",d="lparen",p=875):t===")"||t==="\\rparen"?(l="⎞",c="⎟",u="⎠",g="Size4-Regular",d="rparen",p=875):t==="\\{"||t==="\\lbrace"?(l="⎧",h="⎨",u="⎩",c="⎪",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(l="⎫",h="⎬",u="⎭",c="⎪",g="Size4-Regular"):t==="\\lgroup"||t==="⟮"?(l="⎧",u="⎩",c="⎪",g="Size4-Regular"):t==="\\rgroup"||t==="⟯"?(l="⎫",u="⎭",c="⎪",g="Size4-Regular"):t==="\\lmoustache"||t==="⎰"?(l="⎧",u="⎭",c="⎪",g="Size4-Regular"):(t==="\\rmoustache"||t==="⎱")&&(l="⎫",u="⎩",c="⎪",g="Size4-Regular");var b=G0(l,g,r),A=b.height+b.depth,_=G0(c,g,r),k=_.height+_.depth,C=G0(u,g,r),R=C.height+C.depth,P=0,I=1;if(h!==null){var N=G0(h,g,r);P=N.height+N.depth,I=2}var L=A+R+P,z=Math.max(0,Math.ceil((e-L)/(I*k))),q=L+z*I*k,st=i.fontMetrics().axisHeight;s&&(st*=i.sizeMultiplier);var X=q/2-st,ot=[];if(d.length>0){var Et=q-A-R,ct=Math.round(q*1e3),Rt=z3(d,Math.round(Et*1e3)),U=new Sn(d,Rt),J=(p/1e3).toFixed(3)+"em",Yt=(ct/1e3).toFixed(3)+"em",Me=new Rr([U],{width:J,height:Yt,viewBox:"0 0 "+p+" "+ct}),ce=D.makeSvgSpan([],[Me],i);ce.height=ct/1e3,ce.style.width=J,ce.style.height=Yt,ot.push({type:"elem",elem:ce})}else{if(ot.push(zu(u,g,r)),ot.push(Vh),h===null){var Kt=q-A-R+2*p1;ot.push(Bu(c,Kt,i))}else{var Ct=(q-A-R-P)/2+2*p1;ot.push(Bu(c,Ct,i)),ot.push(Vh),ot.push(zu(h,g,r)),ot.push(Vh),ot.push(Bu(c,Ct,i))}ot.push(Vh),ot.push(zu(l,g,r))}var Ft=i.havingBaseStyle(rt.TEXT),Fs=D.makeVList({positionType:"bottom",positionData:X,children:ot},Ft);return N1(D.makeSpan(["delimsizing","mult"],[Fs],Ft),rt.TEXT,i,n)},Hu=80,qu=.08,Gu=function(t,e,s,i,r){var n=F3(t,i,s),l=new Sn(t,n),h=new Rr([l],{width:"400em",height:G(e),viewBox:"0 0 400000 "+s,preserveAspectRatio:"xMinYMin slice"});return D.makeSvgSpan(["hide-tail"],[h],r)},N6=function(t,e){var s=e.havingBaseSizing(),i=q4("\\surd",t*s.sizeMultiplier,H4,s),r=s.sizeMultiplier,n=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),l,h=0,c=0,u=0,d;return i.type==="small"?(u=1e3+1e3*n+Hu,t<1?r=1:t<1.4&&(r=.7),h=(1+n+qu)/r,c=(1+n)/r,l=Gu("sqrtMain",h,u,n,e),l.style.minWidth="0.853em",d=.833/r):i.type==="large"?(u=(1e3+Hu)*V0[i.size],c=(V0[i.size]+n)/r,h=(V0[i.size]+n+qu)/r,l=Gu("sqrtSize"+i.size,h,u,n,e),l.style.minWidth="1.02em",d=1/r):(h=t+n+qu,c=t+n,u=Math.floor(1e3*t+n)+Hu,l=Gu("sqrtTall",h,u,n,e),l.style.minWidth="0.742em",d=1.056),l.height=c,l.style.height=G(h),{span:l,advanceWidth:d,ruleWidth:(e.fontMetrics().sqrtRuleThickness+n)*r}},z4=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],F6=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],B4=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],V0=[0,1.2,1.8,2.4,3],O6=function(t,e,s,i,r){if(t==="<"||t==="\\lt"||t==="⟨"?t="\\langle":(t===">"||t==="\\gt"||t==="⟩")&&(t="\\rangle"),z4.includes(t)||B4.includes(t))return F4(t,e,!1,s,i,r);if(F6.includes(t))return O4(t,V0[e],!1,s,i,r);throw new H("Illegal delimiter: '"+t+"'")},z6=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],B6=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"stack"}],H4=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],H6=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},q4=function(t,e,s,i){for(var r=Math.min(2,3-i.style.size),n=r;n<s.length&&s[n].type!=="stack";n++){var l=G0(t,H6(s[n]),"math"),h=l.height+l.depth;if(s[n].type==="small"){var c=i.havingBaseStyle(s[n].style);h*=c.sizeMultiplier}if(h>e)return s[n]}return s[s.length-1]},G4=function(t,e,s,i,r,n){t==="<"||t==="\\lt"||t==="⟨"?t="\\langle":(t===">"||t==="\\gt"||t==="⟩")&&(t="\\rangle");var l;B4.includes(t)?l=z6:z4.includes(t)?l=H4:l=B6;var h=q4(t,e,l,i);return h.type==="small"?P6(t,h.style,s,i,r,n):h.type==="large"?F4(t,h.size,s,i,r,n):O4(t,e,s,i,r,n)},q6=function(t,e,s,i,r,n){var l=i.fontMetrics().axisHeight*i.sizeMultiplier,h=901,c=5/i.fontMetrics().ptPerEm,u=Math.max(e-l,s+l),d=Math.max(u/500*h,2*u-c);return G4(t,d,!0,i,r,n)},Er={sqrtImage:N6,sizedDelim:O6,sizeToMaxHeight:V0,customSizedDelim:G4,leftRightDelim:q6},$f={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},G6=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function pu(a,t){var e=du(a);if(e&&G6.includes(e.text))return e;throw e?new H("Invalid delimiter '"+e.text+"' after '"+t.funcName+"'",a):new H("Invalid delimiter type '"+a.type+"'",a)}W({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(a,t)=>{var e=pu(t[0],a);return{type:"delimsizing",mode:a.parser.mode,size:$f[a.funcName].size,mclass:$f[a.funcName].mclass,delim:e.text}},htmlBuilder:(a,t)=>a.delim==="."?D.makeSpan([a.mclass]):Er.sizedDelim(a.delim,a.size,t,a.mode,[a.mclass]),mathmlBuilder:a=>{var t=[];a.delim!=="."&&t.push(Ks(a.delim,a.mode));var e=new B.MathNode("mo",t);a.mclass==="mopen"||a.mclass==="mclose"?e.setAttribute("fence","true"):e.setAttribute("fence","false"),e.setAttribute("stretchy","true");var s=G(Er.sizeToMaxHeight[a.size]);return e.setAttribute("minsize",s),e.setAttribute("maxsize",s),e}});function Vf(a){if(!a.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}W({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(a,t)=>{var e=a.parser.gullet.macros.get("\\current@color");if(e&&typeof e!="string")throw new H("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:a.parser.mode,delim:pu(t[0],a).text,color:e}}});W({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(a,t)=>{var e=pu(t[0],a),s=a.parser;++s.leftrightDepth;var i=s.parseExpression(!1);--s.leftrightDepth,s.expect("\\right",!1);var r=mt(s.parseFunction(),"leftright-right");return{type:"leftright",mode:s.mode,body:i,left:e.text,right:r.delim,rightColor:r.color}},htmlBuilder:(a,t)=>{Vf(a);for(var e=Ae(a.body,t,!0,["mopen","mclose"]),s=0,i=0,r=!1,n=0;n<e.length;n++)e[n].isMiddle?r=!0:(s=Math.max(e[n].height,s),i=Math.max(e[n].depth,i));s*=t.sizeMultiplier,i*=t.sizeMultiplier;var l;if(a.left==="."?l=K0(t,["mopen"]):l=Er.leftRightDelim(a.left,s,i,t,a.mode,["mopen"]),e.unshift(l),r)for(var h=1;h<e.length;h++){var c=e[h],u=c.isMiddle;u&&(e[h]=Er.leftRightDelim(u.delim,s,i,u.options,a.mode,[]))}var d;if(a.right===".")d=K0(t,["mclose"]);else{var p=a.rightColor?t.withColor(a.rightColor):t;d=Er.leftRightDelim(a.right,s,i,p,a.mode,["mclose"])}return e.push(d),D.makeSpan(["minner"],e,t)},mathmlBuilder:(a,t)=>{Vf(a);var e=gs(a.body,t);if(a.left!=="."){var s=new B.MathNode("mo",[Ks(a.left,a.mode)]);s.setAttribute("fence","true"),e.unshift(s)}if(a.right!=="."){var i=new B.MathNode("mo",[Ks(a.right,a.mode)]);i.setAttribute("fence","true"),a.rightColor&&i.setAttribute("mathcolor",a.rightColor),e.push(i)}return P1(e)}});W({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(a,t)=>{var e=pu(t[0],a);if(!a.parser.leftrightDepth)throw new H("\\middle without preceding \\left",e);return{type:"middle",mode:a.parser.mode,delim:e.text}},htmlBuilder:(a,t)=>{var e;if(a.delim===".")e=K0(t,[]);else{e=Er.sizedDelim(a.delim,1,t,a.mode,[]);var s={delim:a.delim,options:t};e.isMiddle=s}return e},mathmlBuilder:(a,t)=>{var e=a.delim==="\\vert"||a.delim==="|"?Ks("|","text"):Ks(a.delim,a.mode),s=new B.MathNode("mo",[e]);return s.setAttribute("fence","true"),s.setAttribute("lspace","0.05em"),s.setAttribute("rspace","0.05em"),s}});var F1=(a,t)=>{var e=D.wrapFragment(kt(a.body,t),t),s=a.label.slice(1),i=t.sizeMultiplier,r,n=0,l=_t.isCharacterBox(a.body);if(s==="sout")r=D.makeSpan(["stretchy","sout"]),r.height=t.fontMetrics().defaultRuleThickness/i,n=-.5*t.fontMetrics().xHeight;else if(s==="phase"){var h=te({number:.6,unit:"pt"},t),c=te({number:.35,unit:"ex"},t),u=t.havingBaseSizing();i=i/u.sizeMultiplier;var d=e.height+e.depth+h+c;e.style.paddingLeft=G(d/2+h);var p=Math.floor(1e3*d*i),g=L3(p),b=new Rr([new Sn("phase",g)],{width:"400em",height:G(p/1e3),viewBox:"0 0 400000 "+p,preserveAspectRatio:"xMinYMin slice"});r=D.makeSvgSpan(["hide-tail"],[b],t),r.style.height=G(d),n=e.depth+h+c}else{/cancel/.test(s)?l||e.classes.push("cancel-pad"):s==="angl"?e.classes.push("anglpad"):e.classes.push("boxpad");var A=0,_=0,k=0;/box/.test(s)?(k=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),A=t.fontMetrics().fboxsep+(s==="colorbox"?0:k),_=A):s==="angl"?(k=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),A=4*k,_=Math.max(0,.25-e.depth)):(A=l?.2:0,_=A),r=Dr.encloseSpan(e,s,A,_,t),/fbox|boxed|fcolorbox/.test(s)?(r.style.borderStyle="solid",r.style.borderWidth=G(k)):s==="angl"&&k!==.049&&(r.style.borderTopWidth=G(k),r.style.borderRightWidth=G(k)),n=e.depth+_,a.backgroundColor&&(r.style.backgroundColor=a.backgroundColor,a.borderColor&&(r.style.borderColor=a.borderColor))}var C;if(a.backgroundColor)C=D.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:n},{type:"elem",elem:e,shift:0}]},t);else{var R=/cancel|phase/.test(s)?["svg-align"]:[];C=D.makeVList({positionType:"individualShift",children:[{type:"elem",elem:e,shift:0},{type:"elem",elem:r,shift:n,wrapperClasses:R}]},t)}return/cancel/.test(s)&&(C.height=e.height,C.depth=e.depth),/cancel/.test(s)&&!l?D.makeSpan(["mord","cancel-lap"],[C],t):D.makeSpan(["mord"],[C],t)},O1=(a,t)=>{var e=0,s=new B.MathNode(a.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Bt(a.body,t)]);switch(a.label){case"\\cancel":s.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":s.setAttribute("notation","downdiagonalstrike");break;case"\\phase":s.setAttribute("notation","phasorangle");break;case"\\sout":s.setAttribute("notation","horizontalstrike");break;case"\\fbox":s.setAttribute("notation","box");break;case"\\angl":s.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(e=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,s.setAttribute("width","+"+2*e+"pt"),s.setAttribute("height","+"+2*e+"pt"),s.setAttribute("lspace",e+"pt"),s.setAttribute("voffset",e+"pt"),a.label==="\\fcolorbox"){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);s.setAttribute("style","border: "+i+"em solid "+String(a.borderColor))}break;case"\\xcancel":s.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return a.backgroundColor&&s.setAttribute("mathbackground",a.backgroundColor),s};W({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(a,t,e){var{parser:s,funcName:i}=a,r=mt(t[0],"color-token").color,n=t[1];return{type:"enclose",mode:s.mode,label:i,backgroundColor:r,body:n}},htmlBuilder:F1,mathmlBuilder:O1});W({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(a,t,e){var{parser:s,funcName:i}=a,r=mt(t[0],"color-token").color,n=mt(t[1],"color-token").color,l=t[2];return{type:"enclose",mode:s.mode,label:i,backgroundColor:n,borderColor:r,body:l}},htmlBuilder:F1,mathmlBuilder:O1});W({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(a,t){var{parser:e}=a;return{type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]}}});W({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(a,t){var{parser:e,funcName:s}=a,i=t[0];return{type:"enclose",mode:e.mode,label:s,body:i}},htmlBuilder:F1,mathmlBuilder:O1});W({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(a,t){var{parser:e}=a;return{type:"enclose",mode:e.mode,label:"\\angl",body:t[0]}}});var $4={};function Gi(a){for(var{type:t,names:e,props:s,handler:i,htmlBuilder:r,mathmlBuilder:n}=a,l={type:t,numArgs:s.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},h=0;h<e.length;++h)$4[e[h]]=l;r&&(Lc[t]=r),n&&(Nc[t]=n)}var V4={};function S(a,t){V4[a]=t}function Uf(a){var t=[];a.consumeSpaces();var e=a.fetch().text;for(e==="\\relax"&&(a.consume(),a.consumeSpaces(),e=a.fetch().text);e==="\\hline"||e==="\\hdashline";)a.consume(),t.push(e==="\\hdashline"),a.consumeSpaces(),e=a.fetch().text;return t}var mu=a=>{var t=a.parser.settings;if(!t.displayMode)throw new H("{"+a.envName+"} can be used only in display mode.")};function z1(a){if(a.indexOf("ed")===-1)return a.indexOf("*")===-1}function En(a,t,e){var{hskipBeforeAndAfter:s,addJot:i,cols:r,arraystretch:n,colSeparationType:l,autoTag:h,singleRow:c,emptySingleRow:u,maxNumCols:d,leqno:p}=t;if(a.gullet.beginGroup(),c||a.gullet.macros.set("\\cr","\\\\\\relax"),!n){var g=a.gullet.expandMacroAsText("\\arraystretch");if(g==null)n=1;else if(n=parseFloat(g),!n||n<0)throw new H("Invalid \\arraystretch: "+g)}a.gullet.beginGroup();var b=[],A=[b],_=[],k=[],C=h!=null?[]:void 0;function R(){h&&a.gullet.macros.set("\\@eqnsw","1",!0)}function P(){C&&(a.gullet.macros.get("\\df@tag")?(C.push(a.subparse([new Is("\\df@tag")])),a.gullet.macros.set("\\df@tag",void 0,!0)):C.push(!!h&&a.gullet.macros.get("\\@eqnsw")==="1"))}for(R(),k.push(Uf(a));;){var I=a.parseExpression(!1,c?"\\end":"\\\\");a.gullet.endGroup(),a.gullet.beginGroup(),I={type:"ordgroup",mode:a.mode,body:I},e&&(I={type:"styling",mode:a.mode,style:e,body:[I]}),b.push(I);var N=a.fetch().text;if(N==="&"){if(d&&b.length===d){if(c||l)throw new H("Too many tab characters: &",a.nextToken);a.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}a.consume()}else if(N==="\\end"){P(),b.length===1&&I.type==="styling"&&I.body[0].body.length===0&&(A.length>1||!u)&&A.pop(),k.length<A.length+1&&k.push([]);break}else if(N==="\\\\"){a.consume();var L=void 0;a.gullet.future().text!==" "&&(L=a.parseSizeGroup(!0)),_.push(L?L.value:null),P(),k.push(Uf(a)),b=[],A.push(b),R()}else throw new H("Expected & or \\\\ or \\cr or \\end",a.nextToken)}return a.gullet.endGroup(),a.gullet.endGroup(),{type:"array",mode:a.mode,addJot:i,arraystretch:n,body:A,cols:r,rowGaps:_,hskipBeforeAndAfter:s,hLinesBeforeRow:k,colSeparationType:l,tags:C,leqno:p}}function B1(a){return a.slice(0,1)==="d"?"display":"text"}var $i=function(t,e){var s,i,r=t.body.length,n=t.hLinesBeforeRow,l=0,h=new Array(r),c=[],u=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),d=1/e.fontMetrics().ptPerEm,p=5*d;if(t.colSeparationType&&t.colSeparationType==="small"){var g=e.havingStyle(rt.SCRIPT).sizeMultiplier;p=.2778*(g/e.sizeMultiplier)}var b=t.colSeparationType==="CD"?te({number:3,unit:"ex"},e):12*d,A=3*d,_=t.arraystretch*b,k=.7*_,C=.3*_,R=0;function P(Z){for(var F=0;F<Z.length;++F)F>0&&(R+=.25),c.push({pos:R,isDashed:Z[F]})}for(P(n[0]),s=0;s<t.body.length;++s){var I=t.body[s],N=k,L=C;l<I.length&&(l=I.length);var z=new Array(I.length);for(i=0;i<I.length;++i){var q=kt(I[i],e);L<q.depth&&(L=q.depth),N<q.height&&(N=q.height),z[i]=q}var st=t.rowGaps[s],X=0;st&&(X=te(st,e),X>0&&(X+=C,L<X&&(L=X),X=0)),t.addJot&&(L+=A),z.height=N,z.depth=L,R+=N,z.pos=R,R+=L+X,h[s]=z,P(n[s+1])}var ot=R/2+e.fontMetrics().axisHeight,Et=t.cols||[],ct=[],Rt,U,J=[];if(t.tags&&t.tags.some(Z=>Z))for(s=0;s<r;++s){var Yt=h[s],Me=Yt.pos-ot,ce=t.tags[s],Kt=void 0;ce===!0?Kt=D.makeSpan(["eqn-num"],[],e):ce===!1?Kt=D.makeSpan([],[],e):Kt=D.makeSpan([],Ae(ce,e,!0),e),Kt.depth=Yt.depth,Kt.height=Yt.height,J.push({type:"elem",elem:Kt,shift:Me})}for(i=0,U=0;i<l||U<Et.length;++i,++U){for(var Ct=Et[U]||{},Ft=!0;Ct.type==="separator";){if(Ft||(Rt=D.makeSpan(["arraycolsep"],[]),Rt.style.width=G(e.fontMetrics().doubleRuleSep),ct.push(Rt)),Ct.separator==="|"||Ct.separator===":"){var Fs=Ct.separator==="|"?"solid":"dashed",ns=D.makeSpan(["vertical-separator"],[],e);ns.style.height=G(R),ns.style.borderRightWidth=G(u),ns.style.borderRightStyle=Fs,ns.style.margin="0 "+G(-u/2);var me=R-ot;me&&(ns.style.verticalAlign=G(-me)),ct.push(ns)}else throw new H("Invalid separator type: "+Ct.separator);U++,Ct=Et[U]||{},Ft=!1}if(!(i>=l)){var At=void 0;(i>0||t.hskipBeforeAndAfter)&&(At=_t.deflt(Ct.pregap,p),At!==0&&(Rt=D.makeSpan(["arraycolsep"],[]),Rt.style.width=G(At),ct.push(Rt)));var re=[];for(s=0;s<r;++s){var Ui=h[s],Fr=Ui[i];if(Fr){var vu=Ui.pos-ot;Fr.depth=Ui.depth,Fr.height=Ui.height,re.push({type:"elem",elem:Fr,shift:vu})}}re=D.makeVList({positionType:"individualShift",children:re},e),re=D.makeSpan(["col-align-"+(Ct.align||"c")],[re]),ct.push(re),(i<l-1||t.hskipBeforeAndAfter)&&(At=_t.deflt(Ct.postgap,p),At!==0&&(Rt=D.makeSpan(["arraycolsep"],[]),Rt.style.width=G(At),ct.push(Rt)))}}if(h=D.makeSpan(["mtable"],ct),c.length>0){for(var bu=D.makeLineSpan("hline",e,u),yu=D.makeLineSpan("hdashline",e,u),Cn=[{type:"elem",elem:h,shift:0}];c.length>0;){var Xa=c.pop(),Ch=Xa.pos-ot;Xa.isDashed?Cn.push({type:"elem",elem:yu,shift:Ch}):Cn.push({type:"elem",elem:bu,shift:Ch})}h=D.makeVList({positionType:"individualShift",children:Cn},e)}if(J.length===0)return D.makeSpan(["mord"],[h],e);var Mn=D.makeVList({positionType:"individualShift",children:J},e);return Mn=D.makeSpan(["tag"],[Mn],e),D.makeFragment([h,Mn])},$6={c:"center ",l:"left ",r:"right "},Vi=function(t,e){for(var s=[],i=new B.MathNode("mtd",[],["mtr-glue"]),r=new B.MathNode("mtd",[],["mml-eqn-num"]),n=0;n<t.body.length;n++){for(var l=t.body[n],h=[],c=0;c<l.length;c++)h.push(new B.MathNode("mtd",[Bt(l[c],e)]));t.tags&&t.tags[n]&&(h.unshift(i),h.push(i),t.leqno?h.unshift(r):h.push(r)),s.push(new B.MathNode("mtr",h))}var u=new B.MathNode("mtable",s),d=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);u.setAttribute("rowspacing",G(d));var p="",g="";if(t.cols&&t.cols.length>0){var b=t.cols,A="",_=!1,k=0,C=b.length;b[0].type==="separator"&&(p+="top ",k=1),b[b.length-1].type==="separator"&&(p+="bottom ",C-=1);for(var R=k;R<C;R++)b[R].type==="align"?(g+=$6[b[R].align],_&&(A+="none "),_=!0):b[R].type==="separator"&&_&&(A+=b[R].separator==="|"?"solid ":"dashed ",_=!1);u.setAttribute("columnalign",g.trim()),/[sd]/.test(A)&&u.setAttribute("columnlines",A.trim())}if(t.colSeparationType==="align"){for(var P=t.cols||[],I="",N=1;N<P.length;N++)I+=N%2?"0em ":"1em ";u.setAttribute("columnspacing",I.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var L="",z=t.hLinesBeforeRow;p+=z[0].length>0?"left ":"",p+=z[z.length-1].length>0?"right ":"";for(var q=1;q<z.length-1;q++)L+=z[q].length===0?"none ":z[q][0]?"dashed ":"solid ";return/[sd]/.test(L)&&u.setAttribute("rowlines",L.trim()),p!==""&&(u=new B.MathNode("menclose",[u]),u.setAttribute("notation",p.trim())),t.arraystretch&&t.arraystretch<1&&(u=new B.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},U4=function(t,e){t.envName.indexOf("ed")===-1&&mu(t);var s=[],i=t.envName.indexOf("at")>-1?"alignat":"align",r=t.envName==="split",n=En(t.parser,{cols:s,addJot:!0,autoTag:r?void 0:z1(t.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:r?2:void 0,leqno:t.parser.settings.leqno},"display"),l,h=0,c={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&e[0].type==="ordgroup"){for(var u="",d=0;d<e[0].body.length;d++){var p=mt(e[0].body[d],"textord");u+=p.text}l=Number(u),h=l*2}var g=!h;n.body.forEach(function(k){for(var C=1;C<k.length;C+=2){var R=mt(k[C],"styling"),P=mt(R.body[0],"ordgroup");P.body.unshift(c)}if(g)h<k.length&&(h=k.length);else{var I=k.length/2;if(l<I)throw new H("Too many math in a row: "+("expected "+l+", but got "+I),k[0])}});for(var b=0;b<h;++b){var A="r",_=0;b%2===1?A="l":b>0&&g&&(_=1),s[b]={type:"align",align:A,pregap:_,postgap:0}}return n.colSeparationType=g?"align":"alignat",n};Gi({type:"array",names:["array","darray"],props:{numArgs:1},handler(a,t){var e=du(t[0]),s=e?[t[0]]:mt(t[0],"ordgroup").body,i=s.map(function(n){var l=I1(n),h=l.text;if("lcr".indexOf(h)!==-1)return{type:"align",align:h};if(h==="|")return{type:"separator",separator:"|"};if(h===":")return{type:"separator",separator:":"};throw new H("Unknown column alignment: "+h,n)}),r={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return En(a.parser,r,B1(a.envName))},htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(a){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[a.envName.replace("*","")],e="c",s={hskipBeforeAndAfter:!1,cols:[{type:"align",align:e}]};if(a.envName.charAt(a.envName.length-1)==="*"){var i=a.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),e=i.fetch().text,"lcr".indexOf(e)===-1)throw new H("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),s.cols=[{type:"align",align:e}]}}var r=En(a.parser,s,B1(a.envName)),n=Math.max(0,...r.body.map(l=>l.length));return r.cols=new Array(n).fill({type:"align",align:e}),t?{type:"leftright",mode:a.mode,body:[r],left:t[0],right:t[1],rightColor:void 0}:r},htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(a){var t={arraystretch:.5},e=En(a.parser,t,"script");return e.colSeparationType="small",e},htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["subarray"],props:{numArgs:1},handler(a,t){var e=du(t[0]),s=e?[t[0]]:mt(t[0],"ordgroup").body,i=s.map(function(n){var l=I1(n),h=l.text;if("lc".indexOf(h)!==-1)return{type:"align",align:h};throw new H("Unknown column alignment: "+h,n)});if(i.length>1)throw new H("{subarray} can contain only one column");var r={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(r=En(a.parser,r,"script"),r.body.length>0&&r.body[0].length>1)throw new H("{subarray} can contain only one column");return r},htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(a){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},e=En(a.parser,t,B1(a.envName));return{type:"leftright",mode:a.mode,body:[e],left:a.envName.indexOf("r")>-1?".":"\\{",right:a.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:U4,htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(a){["gather","gather*"].includes(a.envName)&&mu(a);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:z1(a.envName),emptySingleRow:!0,leqno:a.parser.settings.leqno};return En(a.parser,t,"display")},htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:U4,htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(a){mu(a);var t={autoTag:z1(a.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:a.parser.settings.leqno};return En(a.parser,t,"display")},htmlBuilder:$i,mathmlBuilder:Vi});Gi({type:"array",names:["CD"],props:{numArgs:0},handler(a){return mu(a),M6(a.parser)},htmlBuilder:$i,mathmlBuilder:Vi});S("\\nonumber","\\gdef\\@eqnsw{0}");S("\\notag","\\nonumber");W({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(a,t){throw new H(a.funcName+" valid only within array environment")}});var Wf=$4;W({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(a,t){var{parser:e,funcName:s}=a,i=t[0];if(i.type!=="ordgroup")throw new H("Invalid environment name",i);for(var r="",n=0;n<i.body.length;++n)r+=mt(i.body[n],"textord").text;if(s==="\\begin"){if(!Wf.hasOwnProperty(r))throw new H("No such environment: "+r,i);var l=Wf[r],{args:h,optArgs:c}=e.parseArguments("\\begin{"+r+"}",l),u={mode:e.mode,envName:r,parser:e},d=l.handler(u,h,c);e.expect("\\end",!1);var p=e.nextToken,g=mt(e.parseFunction(),"environment");if(g.name!==r)throw new H("Mismatch: \\begin{"+r+"} matched by \\end{"+g.name+"}",p);return d}return{type:"environment",mode:e.mode,name:r,nameGroup:i}}});var W4=(a,t)=>{var e=a.font,s=t.withFont(e);return kt(a.body,s)},j4=(a,t)=>{var e=a.font,s=t.withFont(e);return Bt(a.body,s)},jf={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};W({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(a,t)=>{var{parser:e,funcName:s}=a,i=Fc(t[0]),r=s;return r in jf&&(r=jf[r]),{type:"font",mode:e.mode,font:r.slice(1),body:i}},htmlBuilder:W4,mathmlBuilder:j4});W({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(a,t)=>{var{parser:e}=a,s=t[0],i=_t.isCharacterBox(s);return{type:"mclass",mode:e.mode,mclass:fu(s),body:[{type:"font",mode:e.mode,font:"boldsymbol",body:s}],isCharacterBox:i}}});W({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(a,t)=>{var{parser:e,funcName:s,breakOnTokenText:i}=a,{mode:r}=e,n=e.parseExpression(!0,i),l="math"+s.slice(1);return{type:"font",mode:r,font:l,body:{type:"ordgroup",mode:e.mode,body:n}}},htmlBuilder:W4,mathmlBuilder:j4});var X4=(a,t)=>{var e=t;return a==="display"?e=e.id>=rt.SCRIPT.id?e.text():rt.DISPLAY:a==="text"&&e.size===rt.DISPLAY.size?e=rt.TEXT:a==="script"?e=rt.SCRIPT:a==="scriptscript"&&(e=rt.SCRIPTSCRIPT),e},H1=(a,t)=>{var e=X4(a.size,t.style),s=e.fracNum(),i=e.fracDen(),r;r=t.havingStyle(s);var n=kt(a.numer,r,t);if(a.continued){var l=8.5/t.fontMetrics().ptPerEm,h=3.5/t.fontMetrics().ptPerEm;n.height=n.height<l?l:n.height,n.depth=n.depth<h?h:n.depth}r=t.havingStyle(i);var c=kt(a.denom,r,t),u,d,p;a.hasBarLine?(a.barSize?(d=te(a.barSize,t),u=D.makeLineSpan("frac-line",t,d)):u=D.makeLineSpan("frac-line",t),d=u.height,p=u.height):(u=null,d=0,p=t.fontMetrics().defaultRuleThickness);var g,b,A;e.size===rt.DISPLAY.size||a.size==="display"?(g=t.fontMetrics().num1,d>0?b=3*p:b=7*p,A=t.fontMetrics().denom1):(d>0?(g=t.fontMetrics().num2,b=p):(g=t.fontMetrics().num3,b=3*p),A=t.fontMetrics().denom2);var _;if(u){var C=t.fontMetrics().axisHeight;g-n.depth-(C+.5*d)<b&&(g+=b-(g-n.depth-(C+.5*d))),C-.5*d-(c.height-A)<b&&(A+=b-(C-.5*d-(c.height-A)));var R=-(C-.5*d);_=D.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:A},{type:"elem",elem:u,shift:R},{type:"elem",elem:n,shift:-g}]},t)}else{var k=g-n.depth-(c.height-A);k<b&&(g+=.5*(b-k),A+=.5*(b-k)),_=D.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:A},{type:"elem",elem:n,shift:-g}]},t)}r=t.havingStyle(e),_.height*=r.sizeMultiplier/t.sizeMultiplier,_.depth*=r.sizeMultiplier/t.sizeMultiplier;var P;e.size===rt.DISPLAY.size?P=t.fontMetrics().delim1:e.size===rt.SCRIPTSCRIPT.size?P=t.havingStyle(rt.SCRIPT).fontMetrics().delim2:P=t.fontMetrics().delim2;var I,N;return a.leftDelim==null?I=K0(t,["mopen"]):I=Er.customSizedDelim(a.leftDelim,P,!0,t.havingStyle(e),a.mode,["mopen"]),a.continued?N=D.makeSpan([]):a.rightDelim==null?N=K0(t,["mclose"]):N=Er.customSizedDelim(a.rightDelim,P,!0,t.havingStyle(e),a.mode,["mclose"]),D.makeSpan(["mord"].concat(r.sizingClasses(t)),[I,D.makeSpan(["mfrac"],[_]),N],t)},q1=(a,t)=>{var e=new B.MathNode("mfrac",[Bt(a.numer,t),Bt(a.denom,t)]);if(!a.hasBarLine)e.setAttribute("linethickness","0px");else if(a.barSize){var s=te(a.barSize,t);e.setAttribute("linethickness",G(s))}var i=X4(a.size,t.style);if(i.size!==t.style.size){e=new B.MathNode("mstyle",[e]);var r=i.size===rt.DISPLAY.size?"true":"false";e.setAttribute("displaystyle",r),e.setAttribute("scriptlevel","0")}if(a.leftDelim!=null||a.rightDelim!=null){var n=[];if(a.leftDelim!=null){var l=new B.MathNode("mo",[new B.TextNode(a.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),n.push(l)}if(n.push(e),a.rightDelim!=null){var h=new B.MathNode("mo",[new B.TextNode(a.rightDelim.replace("\\",""))]);h.setAttribute("fence","true"),n.push(h)}return P1(n)}return e};W({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(a,t)=>{var{parser:e,funcName:s}=a,i=t[0],r=t[1],n,l=null,h=null,c="auto";switch(s){case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,l="(",h=")";break;case"\\\\bracefrac":n=!1,l="\\{",h="\\}";break;case"\\\\brackfrac":n=!1,l="[",h="]";break;default:throw new Error("Unrecognized genfrac command")}switch(s){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:e.mode,continued:!1,numer:i,denom:r,hasBarLine:n,leftDelim:l,rightDelim:h,size:c,barSize:null}},htmlBuilder:H1,mathmlBuilder:q1});W({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(a,t)=>{var{parser:e,funcName:s}=a,i=t[0],r=t[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:i,denom:r,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});W({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(a){var{parser:t,funcName:e,token:s}=a,i;switch(e){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:i,token:s}}});var Xf=["display","text","script","scriptscript"],Yf=function(t){var e=null;return t.length>0&&(e=t,e=e==="."?null:e),e};W({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(a,t){var{parser:e}=a,s=t[4],i=t[5],r=Fc(t[0]),n=r.type==="atom"&&r.family==="open"?Yf(r.text):null,l=Fc(t[1]),h=l.type==="atom"&&l.family==="close"?Yf(l.text):null,c=mt(t[2],"size"),u,d=null;c.isBlank?u=!0:(d=c.value,u=d.number>0);var p="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var b=mt(g.body[0],"textord");p=Xf[Number(b.text)]}}else g=mt(g,"textord"),p=Xf[Number(g.text)];return{type:"genfrac",mode:e.mode,numer:s,denom:i,continued:!1,hasBarLine:u,barSize:d,leftDelim:n,rightDelim:h,size:p}},htmlBuilder:H1,mathmlBuilder:q1});W({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(a,t){var{parser:e,funcName:s,token:i}=a;return{type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",size:mt(t[0],"size").value,token:i}}});W({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(a,t)=>{var{parser:e,funcName:s}=a,i=t[0],r=y3(mt(t[1],"infix").size),n=t[2],l=r.number>0;return{type:"genfrac",mode:e.mode,numer:i,denom:n,continued:!1,hasBarLine:l,barSize:r,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:H1,mathmlBuilder:q1});var Y4=(a,t)=>{var e=t.style,s,i;a.type==="supsub"?(s=a.sup?kt(a.sup,t.havingStyle(e.sup()),t):kt(a.sub,t.havingStyle(e.sub()),t),i=mt(a.base,"horizBrace")):i=mt(a,"horizBrace");var r=kt(i.base,t.havingBaseStyle(rt.DISPLAY)),n=Dr.svgSpan(i,t),l;if(i.isOver?(l=D.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:.1},{type:"elem",elem:n}]},t),l.children[0].children[0].children[1].classes.push("svg-align")):(l=D.makeVList({positionType:"bottom",positionData:r.depth+.1+n.height,children:[{type:"elem",elem:n},{type:"kern",size:.1},{type:"elem",elem:r}]},t),l.children[0].children[0].children[0].classes.push("svg-align")),s){var h=D.makeSpan(["mord",i.isOver?"mover":"munder"],[l],t);i.isOver?l=D.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:s}]},t):l=D.makeVList({positionType:"bottom",positionData:h.depth+.2+s.height+s.depth,children:[{type:"elem",elem:s},{type:"kern",size:.2},{type:"elem",elem:h}]},t)}return D.makeSpan(["mord",i.isOver?"mover":"munder"],[l],t)},V6=(a,t)=>{var e=Dr.mathMLnode(a.label);return new B.MathNode(a.isOver?"mover":"munder",[Bt(a.base,t),e])};W({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(a,t){var{parser:e,funcName:s}=a;return{type:"horizBrace",mode:e.mode,label:s,isOver:/^\\over/.test(s),base:t[0]}},htmlBuilder:Y4,mathmlBuilder:V6});W({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(a,t)=>{var{parser:e}=a,s=t[1],i=mt(t[0],"url").url;return e.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:e.mode,href:i,body:le(s)}:e.formatUnsupportedCmd("\\href")},htmlBuilder:(a,t)=>{var e=Ae(a.body,t,!1);return D.makeAnchor(a.href,[],e,t)},mathmlBuilder:(a,t)=>{var e=kn(a.body,t);return e instanceof Ds||(e=new Ds("mrow",[e])),e.setAttribute("href",a.href),e}});W({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(a,t)=>{var{parser:e}=a,s=mt(t[0],"url").url;if(!e.settings.isTrusted({command:"\\url",url:s}))return e.formatUnsupportedCmd("\\url");for(var i=[],r=0;r<s.length;r++){var n=s[r];n==="~"&&(n="\\textasciitilde"),i.push({type:"textord",mode:"text",text:n})}var l={type:"text",mode:e.mode,font:"\\texttt",body:i};return{type:"href",mode:e.mode,href:s,body:le(l)}}});W({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(a,t){var{parser:e}=a;return{type:"hbox",mode:e.mode,body:le(t[0])}},htmlBuilder(a,t){var e=Ae(a.body,t,!1);return D.makeFragment(e)},mathmlBuilder(a,t){return new B.MathNode("mrow",gs(a.body,t))}});W({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(a,t)=>{var{parser:e,funcName:s,token:i}=a,r=mt(t[0],"raw").string,n=t[1];e.settings.strict&&e.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,h={};switch(s){case"\\htmlClass":h.class=r,l={command:"\\htmlClass",class:r};break;case"\\htmlId":h.id=r,l={command:"\\htmlId",id:r};break;case"\\htmlStyle":h.style=r,l={command:"\\htmlStyle",style:r};break;case"\\htmlData":{for(var c=r.split(","),u=0;u<c.length;u++){var d=c[u],p=d.indexOf("=");if(p<0)throw new H("\\htmlData key/value '"+d+"' missing equals sign");var g=d.slice(0,p),b=d.slice(p+1);h["data-"+g.trim()]=b}l={command:"\\htmlData",attributes:h};break}default:throw new Error("Unrecognized html command")}return e.settings.isTrusted(l)?{type:"html",mode:e.mode,attributes:h,body:le(n)}:e.formatUnsupportedCmd(s)},htmlBuilder:(a,t)=>{var e=Ae(a.body,t,!1),s=["enclosing"];a.attributes.class&&s.push(...a.attributes.class.trim().split(/\s+/));var i=D.makeSpan(s,e,t);for(var r in a.attributes)r!=="class"&&a.attributes.hasOwnProperty(r)&&i.setAttribute(r,a.attributes[r]);return i},mathmlBuilder:(a,t)=>kn(a.body,t)});W({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(a,t)=>{var{parser:e}=a;return{type:"htmlmathml",mode:e.mode,html:le(t[0]),mathml:le(t[1])}},htmlBuilder:(a,t)=>{var e=Ae(a.html,t,!1);return D.makeFragment(e)},mathmlBuilder:(a,t)=>kn(a.mathml,t)});var $u=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new H("Invalid size: '"+t+"' in \\includegraphics");var s={number:+(e[1]+e[2]),unit:e[3]};if(!p4(s))throw new H("Invalid unit: '"+s.unit+"' in \\includegraphics.");return s};W({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(a,t,e)=>{var{parser:s}=a,i={number:0,unit:"em"},r={number:.9,unit:"em"},n={number:0,unit:"em"},l="";if(e[0])for(var h=mt(e[0],"raw").string,c=h.split(","),u=0;u<c.length;u++){var d=c[u].split("=");if(d.length===2){var p=d[1].trim();switch(d[0].trim()){case"alt":l=p;break;case"width":i=$u(p);break;case"height":r=$u(p);break;case"totalheight":n=$u(p);break;default:throw new H("Invalid key: '"+d[0]+"' in \\includegraphics.")}}}var g=mt(t[0],"url").url;return l===""&&(l=g,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),s.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:s.mode,alt:l,width:i,height:r,totalheight:n,src:g}:s.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(a,t)=>{var e=te(a.height,t),s=0;a.totalheight.number>0&&(s=te(a.totalheight,t)-e);var i=0;a.width.number>0&&(i=te(a.width,t));var r={height:G(e+s)};i>0&&(r.width=G(i)),s>0&&(r.verticalAlign=G(-s));var n=new V3(a.src,a.alt,r);return n.height=e,n.depth=s,n},mathmlBuilder:(a,t)=>{var e=new B.MathNode("mglyph",[]);e.setAttribute("alt",a.alt);var s=te(a.height,t),i=0;if(a.totalheight.number>0&&(i=te(a.totalheight,t)-s,e.setAttribute("valign",G(-i))),e.setAttribute("height",G(s+i)),a.width.number>0){var r=te(a.width,t);e.setAttribute("width",G(r))}return e.setAttribute("src",a.src),e}});W({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(a,t){var{parser:e,funcName:s}=a,i=mt(t[0],"size");if(e.settings.strict){var r=s[1]==="m",n=i.value.unit==="mu";r?(n||e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" supports only mu units, "+("not "+i.value.unit+" units")),e.mode!=="math"&&e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" works only in math mode")):n&&e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" doesn't support mu units")}return{type:"kern",mode:e.mode,dimension:i.value}},htmlBuilder(a,t){return D.makeGlue(a.dimension,t)},mathmlBuilder(a,t){var e=te(a.dimension,t);return new B.SpaceNode(e)}});W({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(a,t)=>{var{parser:e,funcName:s}=a,i=t[0];return{type:"lap",mode:e.mode,alignment:s.slice(5),body:i}},htmlBuilder:(a,t)=>{var e;a.alignment==="clap"?(e=D.makeSpan([],[kt(a.body,t)]),e=D.makeSpan(["inner"],[e],t)):e=D.makeSpan(["inner"],[kt(a.body,t)]);var s=D.makeSpan(["fix"],[]),i=D.makeSpan([a.alignment],[e,s],t),r=D.makeSpan(["strut"]);return r.style.height=G(i.height+i.depth),i.depth&&(r.style.verticalAlign=G(-i.depth)),i.children.unshift(r),i=D.makeSpan(["thinbox"],[i],t),D.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(a,t)=>{var e=new B.MathNode("mpadded",[Bt(a.body,t)]);if(a.alignment!=="rlap"){var s=a.alignment==="llap"?"-1":"-0.5";e.setAttribute("lspace",s+"width")}return e.setAttribute("width","0px"),e}});W({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(a,t){var{funcName:e,parser:s}=a,i=s.mode;s.switchMode("math");var r=e==="\\("?"\\)":"$",n=s.parseExpression(!1,r);return s.expect(r),s.switchMode(i),{type:"styling",mode:s.mode,style:"text",body:n}}});W({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(a,t){throw new H("Mismatched "+a.funcName)}});var Kf=(a,t)=>{switch(t.style.size){case rt.DISPLAY.size:return a.display;case rt.TEXT.size:return a.text;case rt.SCRIPT.size:return a.script;case rt.SCRIPTSCRIPT.size:return a.scriptscript;default:return a.text}};W({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(a,t)=>{var{parser:e}=a;return{type:"mathchoice",mode:e.mode,display:le(t[0]),text:le(t[1]),script:le(t[2]),scriptscript:le(t[3])}},htmlBuilder:(a,t)=>{var e=Kf(a,t),s=Ae(e,t,!1);return D.makeFragment(s)},mathmlBuilder:(a,t)=>{var e=Kf(a,t);return kn(e,t)}});var K4=(a,t,e,s,i,r,n)=>{a=D.makeSpan([],[a]);var l=e&&_t.isCharacterBox(e),h,c;if(t){var u=kt(t,s.havingStyle(i.sup()),s);c={elem:u,kern:Math.max(s.fontMetrics().bigOpSpacing1,s.fontMetrics().bigOpSpacing3-u.depth)}}if(e){var d=kt(e,s.havingStyle(i.sub()),s);h={elem:d,kern:Math.max(s.fontMetrics().bigOpSpacing2,s.fontMetrics().bigOpSpacing4-d.height)}}var p;if(c&&h){var g=s.fontMetrics().bigOpSpacing5+h.elem.height+h.elem.depth+h.kern+a.depth+n;p=D.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:s.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:G(-r)},{type:"kern",size:h.kern},{type:"elem",elem:a},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:G(r)},{type:"kern",size:s.fontMetrics().bigOpSpacing5}]},s)}else if(h){var b=a.height-n;p=D.makeVList({positionType:"top",positionData:b,children:[{type:"kern",size:s.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:G(-r)},{type:"kern",size:h.kern},{type:"elem",elem:a}]},s)}else if(c){var A=a.depth+n;p=D.makeVList({positionType:"bottom",positionData:A,children:[{type:"elem",elem:a},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:G(r)},{type:"kern",size:s.fontMetrics().bigOpSpacing5}]},s)}else return a;var _=[p];if(h&&r!==0&&!l){var k=D.makeSpan(["mspace"],[],s);k.style.marginRight=G(r),_.unshift(k)}return D.makeSpan(["mop","op-limits"],_,s)},Z4=["\\smallint"],b0=(a,t)=>{var e,s,i=!1,r;a.type==="supsub"?(e=a.sup,s=a.sub,r=mt(a.base,"op"),i=!0):r=mt(a,"op");var n=t.style,l=!1;n.size===rt.DISPLAY.size&&r.symbol&&!Z4.includes(r.name)&&(l=!0);var h;if(r.symbol){var c=l?"Size2-Regular":"Size1-Regular",u="";if((r.name==="\\oiint"||r.name==="\\oiiint")&&(u=r.name.slice(1),r.name=u==="oiint"?"\\iint":"\\iiint"),h=D.makeSymbol(r.name,c,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),u.length>0){var d=h.italic,p=D.staticSvg(u+"Size"+(l?"2":"1"),t);h=D.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:0},{type:"elem",elem:p,shift:l?.08:0}]},t),r.name="\\"+u,h.classes.unshift("mop"),h.italic=d}}else if(r.body){var g=Ae(r.body,t,!0);g.length===1&&g[0]instanceof Ys?(h=g[0],h.classes[0]="mop"):h=D.makeSpan(["mop"],g,t)}else{for(var b=[],A=1;A<r.name.length;A++)b.push(D.mathsym(r.name[A],r.mode,t));h=D.makeSpan(["mop"],b,t)}var _=0,k=0;return(h instanceof Ys||r.name==="\\oiint"||r.name==="\\oiiint")&&!r.suppressBaseShift&&(_=(h.height-h.depth)/2-t.fontMetrics().axisHeight,k=h.italic),i?K4(h,e,s,t,n,k,_):(_&&(h.style.position="relative",h.style.top=G(_)),h)},Eh=(a,t)=>{var e;if(a.symbol)e=new Ds("mo",[Ks(a.name,a.mode)]),Z4.includes(a.name)&&e.setAttribute("largeop","false");else if(a.body)e=new Ds("mo",gs(a.body,t));else{e=new Ds("mi",[new Hi(a.name.slice(1))]);var s=new Ds("mo",[Ks("⁡","text")]);a.parentIsSupSub?e=new Ds("mrow",[e,s]):e=_4([e,s])}return e},U6={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};W({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(a,t)=>{var{parser:e,funcName:s}=a,i=s;return i.length===1&&(i=U6[i]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:b0,mathmlBuilder:Eh});W({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(a,t)=>{var{parser:e}=a,s=t[0];return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:le(s)}},htmlBuilder:b0,mathmlBuilder:Eh});var W6={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};W({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(a){var{parser:t,funcName:e}=a;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:e}},htmlBuilder:b0,mathmlBuilder:Eh});W({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(a){var{parser:t,funcName:e}=a;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:e}},htmlBuilder:b0,mathmlBuilder:Eh});W({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0,allowedInArgument:!0},handler(a){var{parser:t,funcName:e}=a,s=e;return s.length===1&&(s=W6[s]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:b0,mathmlBuilder:Eh});var Q4=(a,t)=>{var e,s,i=!1,r;a.type==="supsub"?(e=a.sup,s=a.sub,r=mt(a.base,"operatorname"),i=!0):r=mt(a,"operatorname");var n;if(r.body.length>0){for(var l=r.body.map(d=>{var p=d.text;return typeof p=="string"?{type:"textord",mode:d.mode,text:p}:d}),h=Ae(l,t.withFont("mathrm"),!0),c=0;c<h.length;c++){var u=h[c];u instanceof Ys&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}n=D.makeSpan(["mop"],h,t)}else n=D.makeSpan(["mop"],[],t);return i?K4(n,e,s,t,t.style,0,0):n},j6=(a,t)=>{for(var e=gs(a.body,t.withFont("mathrm")),s=!0,i=0;i<e.length;i++){var r=e[i];if(!(r instanceof B.SpaceNode))if(r instanceof B.MathNode)switch(r.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var n=r.children[0];r.children.length===1&&n instanceof B.TextNode?n.text=n.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):s=!1;break}default:s=!1}else s=!1}if(s){var l=e.map(u=>u.toText()).join("");e=[new B.TextNode(l)]}var h=new B.MathNode("mi",e);h.setAttribute("mathvariant","normal");var c=new B.MathNode("mo",[Ks("⁡","text")]);return a.parentIsSupSub?new B.MathNode("mrow",[h,c]):B.newDocumentFragment([h,c])};W({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(a,t)=>{var{parser:e,funcName:s}=a,i=t[0];return{type:"operatorname",mode:e.mode,body:le(i),alwaysHandleSupSub:s==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Q4,mathmlBuilder:j6});S("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");ja({type:"ordgroup",htmlBuilder(a,t){return a.semisimple?D.makeFragment(Ae(a.body,t,!1)):D.makeSpan(["mord"],Ae(a.body,t,!0),t)},mathmlBuilder(a,t){return kn(a.body,t,!0)}});W({type:"overline",names:["\\overline"],props:{numArgs:1},handler(a,t){var{parser:e}=a,s=t[0];return{type:"overline",mode:e.mode,body:s}},htmlBuilder(a,t){var e=kt(a.body,t.havingCrampedStyle()),s=D.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,r=D.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e},{type:"kern",size:3*i},{type:"elem",elem:s},{type:"kern",size:i}]},t);return D.makeSpan(["mord","overline"],[r],t)},mathmlBuilder(a,t){var e=new B.MathNode("mo",[new B.TextNode("‾")]);e.setAttribute("stretchy","true");var s=new B.MathNode("mover",[Bt(a.body,t),e]);return s.setAttribute("accent","true"),s}});W({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(a,t)=>{var{parser:e}=a,s=t[0];return{type:"phantom",mode:e.mode,body:le(s)}},htmlBuilder:(a,t)=>{var e=Ae(a.body,t.withPhantom(),!1);return D.makeFragment(e)},mathmlBuilder:(a,t)=>{var e=gs(a.body,t);return new B.MathNode("mphantom",e)}});W({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(a,t)=>{var{parser:e}=a,s=t[0];return{type:"hphantom",mode:e.mode,body:s}},htmlBuilder:(a,t)=>{var e=D.makeSpan([],[kt(a.body,t.withPhantom())]);if(e.height=0,e.depth=0,e.children)for(var s=0;s<e.children.length;s++)e.children[s].height=0,e.children[s].depth=0;return e=D.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e}]},t),D.makeSpan(["mord"],[e],t)},mathmlBuilder:(a,t)=>{var e=gs(le(a.body),t),s=new B.MathNode("mphantom",e),i=new B.MathNode("mpadded",[s]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});W({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(a,t)=>{var{parser:e}=a,s=t[0];return{type:"vphantom",mode:e.mode,body:s}},htmlBuilder:(a,t)=>{var e=D.makeSpan(["inner"],[kt(a.body,t.withPhantom())]),s=D.makeSpan(["fix"],[]);return D.makeSpan(["mord","rlap"],[e,s],t)},mathmlBuilder:(a,t)=>{var e=gs(le(a.body),t),s=new B.MathNode("mphantom",e),i=new B.MathNode("mpadded",[s]);return i.setAttribute("width","0px"),i}});W({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(a,t){var{parser:e}=a,s=mt(t[0],"size").value,i=t[1];return{type:"raisebox",mode:e.mode,dy:s,body:i}},htmlBuilder(a,t){var e=kt(a.body,t),s=te(a.dy,t);return D.makeVList({positionType:"shift",positionData:-s,children:[{type:"elem",elem:e}]},t)},mathmlBuilder(a,t){var e=new B.MathNode("mpadded",[Bt(a.body,t)]),s=a.dy.number+a.dy.unit;return e.setAttribute("voffset",s),e}});W({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(a){var{parser:t}=a;return{type:"internal",mode:t.mode}}});W({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(a,t,e){var{parser:s}=a,i=e[0],r=mt(t[0],"size"),n=mt(t[1],"size");return{type:"rule",mode:s.mode,shift:i&&mt(i,"size").value,width:r.value,height:n.value}},htmlBuilder(a,t){var e=D.makeSpan(["mord","rule"],[],t),s=te(a.width,t),i=te(a.height,t),r=a.shift?te(a.shift,t):0;return e.style.borderRightWidth=G(s),e.style.borderTopWidth=G(i),e.style.bottom=G(r),e.width=s,e.height=i+r,e.depth=-r,e.maxFontSize=i*1.125*t.sizeMultiplier,e},mathmlBuilder(a,t){var e=te(a.width,t),s=te(a.height,t),i=a.shift?te(a.shift,t):0,r=t.color&&t.getColor()||"black",n=new B.MathNode("mspace");n.setAttribute("mathbackground",r),n.setAttribute("width",G(e)),n.setAttribute("height",G(s));var l=new B.MathNode("mpadded",[n]);return i>=0?l.setAttribute("height",G(i)):(l.setAttribute("height",G(i)),l.setAttribute("depth",G(-i))),l.setAttribute("voffset",G(i)),l}});function J4(a,t,e){for(var s=Ae(a,t,!1),i=t.sizeMultiplier/e.sizeMultiplier,r=0;r<s.length;r++){var n=s[r].classes.indexOf("sizing");n<0?Array.prototype.push.apply(s[r].classes,t.sizingClasses(e)):s[r].classes[n+1]==="reset-size"+t.size&&(s[r].classes[n+1]="reset-size"+e.size),s[r].height*=i,s[r].depth*=i}return D.makeFragment(s)}var Zf=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],X6=(a,t)=>{var e=t.havingSize(a.size);return J4(a.body,e,t)};W({type:"sizing",names:Zf,props:{numArgs:0,allowedInText:!0},handler:(a,t)=>{var{breakOnTokenText:e,funcName:s,parser:i}=a,r=i.parseExpression(!1,e);return{type:"sizing",mode:i.mode,size:Zf.indexOf(s)+1,body:r}},htmlBuilder:X6,mathmlBuilder:(a,t)=>{var e=t.havingSize(a.size),s=gs(a.body,e),i=new B.MathNode("mstyle",s);return i.setAttribute("mathsize",G(e.sizeMultiplier)),i}});W({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(a,t,e)=>{var{parser:s}=a,i=!1,r=!1,n=e[0]&&mt(e[0],"ordgroup");if(n)for(var l="",h=0;h<n.body.length;++h){var c=n.body[h];if(l=c.text,l==="t")i=!0;else if(l==="b")r=!0;else{i=!1,r=!1;break}}else i=!0,r=!0;var u=t[0];return{type:"smash",mode:s.mode,body:u,smashHeight:i,smashDepth:r}},htmlBuilder:(a,t)=>{var e=D.makeSpan([],[kt(a.body,t)]);if(!a.smashHeight&&!a.smashDepth)return e;if(a.smashHeight&&(e.height=0,e.children))for(var s=0;s<e.children.length;s++)e.children[s].height=0;if(a.smashDepth&&(e.depth=0,e.children))for(var i=0;i<e.children.length;i++)e.children[i].depth=0;var r=D.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e}]},t);return D.makeSpan(["mord"],[r],t)},mathmlBuilder:(a,t)=>{var e=new B.MathNode("mpadded",[Bt(a.body,t)]);return a.smashHeight&&e.setAttribute("height","0px"),a.smashDepth&&e.setAttribute("depth","0px"),e}});W({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(a,t,e){var{parser:s}=a,i=e[0],r=t[0];return{type:"sqrt",mode:s.mode,body:r,index:i}},htmlBuilder(a,t){var e=kt(a.body,t.havingCrampedStyle());e.height===0&&(e.height=t.fontMetrics().xHeight),e=D.wrapFragment(e,t);var s=t.fontMetrics(),i=s.defaultRuleThickness,r=i;t.style.id<rt.TEXT.id&&(r=t.fontMetrics().xHeight);var n=i+r/4,l=e.height+e.depth+n+i,{span:h,ruleWidth:c,advanceWidth:u}=Er.sqrtImage(l,t),d=h.height-c;d>e.height+e.depth+n&&(n=(n+d-e.height-e.depth)/2);var p=h.height-e.height-n-c;e.style.paddingLeft=G(u);var g=D.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e,wrapperClasses:["svg-align"]},{type:"kern",size:-(e.height+p)},{type:"elem",elem:h},{type:"kern",size:c}]},t);if(a.index){var b=t.havingStyle(rt.SCRIPTSCRIPT),A=kt(a.index,b,t),_=.6*(g.height-g.depth),k=D.makeVList({positionType:"shift",positionData:-_,children:[{type:"elem",elem:A}]},t),C=D.makeSpan(["root"],[k]);return D.makeSpan(["mord","sqrt"],[C,g],t)}else return D.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(a,t){var{body:e,index:s}=a;return s?new B.MathNode("mroot",[Bt(e,t),Bt(s,t)]):new B.MathNode("msqrt",[Bt(e,t)])}});var Qf={display:rt.DISPLAY,text:rt.TEXT,script:rt.SCRIPT,scriptscript:rt.SCRIPTSCRIPT};W({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(a,t){var{breakOnTokenText:e,funcName:s,parser:i}=a,r=i.parseExpression(!0,e),n=s.slice(1,s.length-5);return{type:"styling",mode:i.mode,style:n,body:r}},htmlBuilder(a,t){var e=Qf[a.style],s=t.havingStyle(e).withFont("");return J4(a.body,s,t)},mathmlBuilder(a,t){var e=Qf[a.style],s=t.havingStyle(e),i=gs(a.body,s),r=new B.MathNode("mstyle",i),n={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=n[a.style];return r.setAttribute("scriptlevel",l[0]),r.setAttribute("displaystyle",l[1]),r}});var Y6=function(t,e){var s=t.base;if(s)if(s.type==="op"){var i=s.limits&&(e.style.size===rt.DISPLAY.size||s.alwaysHandleSupSub);return i?b0:null}else if(s.type==="operatorname"){var r=s.alwaysHandleSupSub&&(e.style.size===rt.DISPLAY.size||s.limits);return r?Q4:null}else{if(s.type==="accent")return _t.isCharacterBox(s.base)?L1:null;if(s.type==="horizBrace"){var n=!t.sub;return n===s.isOver?Y4:null}else return null}else return null};ja({type:"supsub",htmlBuilder(a,t){var e=Y6(a,t);if(e)return e(a,t);var{base:s,sup:i,sub:r}=a,n=kt(s,t),l,h,c=t.fontMetrics(),u=0,d=0,p=s&&_t.isCharacterBox(s);if(i){var g=t.havingStyle(t.style.sup());l=kt(i,g,t),p||(u=n.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(r){var b=t.havingStyle(t.style.sub());h=kt(r,b,t),p||(d=n.depth+b.fontMetrics().subDrop*b.sizeMultiplier/t.sizeMultiplier)}var A;t.style===rt.DISPLAY?A=c.sup1:t.style.cramped?A=c.sup3:A=c.sup2;var _=t.sizeMultiplier,k=G(.5/c.ptPerEm/_),C=null;if(h){var R=a.base&&a.base.type==="op"&&a.base.name&&(a.base.name==="\\oiint"||a.base.name==="\\oiiint");(n instanceof Ys||R)&&(C=G(-n.italic))}var P;if(l&&h){u=Math.max(u,A,l.depth+.25*c.xHeight),d=Math.max(d,c.sub2);var I=c.defaultRuleThickness,N=4*I;if(u-l.depth-(h.height-d)<N){d=N-(u-l.depth)+h.height;var L=.8*c.xHeight-(u-l.depth);L>0&&(u+=L,d-=L)}var z=[{type:"elem",elem:h,shift:d,marginRight:k,marginLeft:C},{type:"elem",elem:l,shift:-u,marginRight:k}];P=D.makeVList({positionType:"individualShift",children:z},t)}else if(h){d=Math.max(d,c.sub1,h.height-.8*c.xHeight);var q=[{type:"elem",elem:h,marginLeft:C,marginRight:k}];P=D.makeVList({positionType:"shift",positionData:d,children:q},t)}else if(l)u=Math.max(u,A,l.depth+.25*c.xHeight),P=D.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:l,marginRight:k}]},t);else throw new Error("supsub must have either sup or sub.");var st=u1(n,"right")||"mord";return D.makeSpan([st],[n,D.makeSpan(["msupsub"],[P])],t)},mathmlBuilder(a,t){var e=!1,s,i;a.base&&a.base.type==="horizBrace"&&(i=!!a.sup,i===a.base.isOver&&(e=!0,s=a.base.isOver)),a.base&&(a.base.type==="op"||a.base.type==="operatorname")&&(a.base.parentIsSupSub=!0);var r=[Bt(a.base,t)];a.sub&&r.push(Bt(a.sub,t)),a.sup&&r.push(Bt(a.sup,t));var n;if(e)n=s?"mover":"munder";else if(a.sub)if(a.sup){var c=a.base;c&&c.type==="op"&&c.limits&&t.style===rt.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(t.style===rt.DISPLAY||c.limits)?n="munderover":n="msubsup"}else{var h=a.base;h&&h.type==="op"&&h.limits&&(t.style===rt.DISPLAY||h.alwaysHandleSupSub)||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(h.limits||t.style===rt.DISPLAY)?n="munder":n="msub"}else{var l=a.base;l&&l.type==="op"&&l.limits&&(t.style===rt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===rt.DISPLAY)?n="mover":n="msup"}return new B.MathNode(n,r)}});ja({type:"atom",htmlBuilder(a,t){return D.mathsym(a.text,a.mode,t,["m"+a.family])},mathmlBuilder(a,t){var e=new B.MathNode("mo",[Ks(a.text,a.mode)]);if(a.family==="bin"){var s=D1(a,t);s==="bold-italic"&&e.setAttribute("mathvariant",s)}else a.family==="punct"?e.setAttribute("separator","true"):(a.family==="open"||a.family==="close")&&e.setAttribute("stretchy","false");return e}});var tg={mi:"italic",mn:"normal",mtext:"normal"};ja({type:"mathord",htmlBuilder(a,t){return D.makeOrd(a,t,"mathord")},mathmlBuilder(a,t){var e=new B.MathNode("mi",[Ks(a.text,a.mode,t)]),s=D1(a,t)||"italic";return s!==tg[e.type]&&e.setAttribute("mathvariant",s),e}});ja({type:"textord",htmlBuilder(a,t){return D.makeOrd(a,t,"textord")},mathmlBuilder(a,t){var e=Ks(a.text,a.mode,t),s=D1(a,t)||"normal",i;return a.mode==="text"?i=new B.MathNode("mtext",[e]):/[0-9]/.test(a.text)?i=new B.MathNode("mn",[e]):a.text==="\\prime"?i=new B.MathNode("mo",[e]):i=new B.MathNode("mi",[e]),s!==tg[i.type]&&i.setAttribute("mathvariant",s),i}});var Vu={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Uu={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ja({type:"spacing",htmlBuilder(a,t){if(Uu.hasOwnProperty(a.text)){var e=Uu[a.text].className||"";if(a.mode==="text"){var s=D.makeOrd(a,t,"textord");return s.classes.push(e),s}else return D.makeSpan(["mspace",e],[D.mathsym(a.text,a.mode,t)],t)}else{if(Vu.hasOwnProperty(a.text))return D.makeSpan(["mspace",Vu[a.text]],[],t);throw new H('Unknown type of space "'+a.text+'"')}},mathmlBuilder(a,t){var e;if(Uu.hasOwnProperty(a.text))e=new B.MathNode("mtext",[new B.TextNode(" ")]);else{if(Vu.hasOwnProperty(a.text))return new B.MathNode("mspace");throw new H('Unknown type of space "'+a.text+'"')}return e}});var Jf=()=>{var a=new B.MathNode("mtd",[]);return a.setAttribute("width","50%"),a};ja({type:"tag",mathmlBuilder(a,t){var e=new B.MathNode("mtable",[new B.MathNode("mtr",[Jf(),new B.MathNode("mtd",[kn(a.body,t)]),Jf(),new B.MathNode("mtd",[kn(a.tag,t)])])]);return e.setAttribute("width","100%"),e}});var tp={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},ep={"\\textbf":"textbf","\\textmd":"textmd"},K6={"\\textit":"textit","\\textup":"textup"},sp=(a,t)=>{var e=a.font;if(e){if(tp[e])return t.withTextFontFamily(tp[e]);if(ep[e])return t.withTextFontWeight(ep[e]);if(e==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(K6[e])};W({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(a,t){var{parser:e,funcName:s}=a,i=t[0];return{type:"text",mode:e.mode,body:le(i),font:s}},htmlBuilder(a,t){var e=sp(a,t),s=Ae(a.body,e,!0);return D.makeSpan(["mord","text"],s,e)},mathmlBuilder(a,t){var e=sp(a,t);return kn(a.body,e)}});W({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(a,t){var{parser:e}=a;return{type:"underline",mode:e.mode,body:t[0]}},htmlBuilder(a,t){var e=kt(a.body,t),s=D.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,r=D.makeVList({positionType:"top",positionData:e.height,children:[{type:"kern",size:i},{type:"elem",elem:s},{type:"kern",size:3*i},{type:"elem",elem:e}]},t);return D.makeSpan(["mord","underline"],[r],t)},mathmlBuilder(a,t){var e=new B.MathNode("mo",[new B.TextNode("‾")]);e.setAttribute("stretchy","true");var s=new B.MathNode("munder",[Bt(a.body,t),e]);return s.setAttribute("accentunder","true"),s}});W({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(a,t){var{parser:e}=a;return{type:"vcenter",mode:e.mode,body:t[0]}},htmlBuilder(a,t){var e=kt(a.body,t),s=t.fontMetrics().axisHeight,i=.5*(e.height-s-(e.depth+s));return D.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:e}]},t)},mathmlBuilder(a,t){return new B.MathNode("mpadded",[Bt(a.body,t)],["vcenter"])}});W({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(a,t,e){throw new H("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(a,t){for(var e=ip(a),s=[],i=t.havingStyle(t.style.text()),r=0;r<e.length;r++){var n=e[r];n==="~"&&(n="\\textasciitilde"),s.push(D.makeSymbol(n,"Typewriter-Regular",a.mode,i,["mord","texttt"]))}return D.makeSpan(["mord","text"].concat(i.sizingClasses(t)),D.tryCombineChars(s),i)},mathmlBuilder(a,t){var e=new B.TextNode(ip(a)),s=new B.MathNode("mtext",[e]);return s.setAttribute("mathvariant","monospace"),s}});var ip=a=>a.body.replace(/ /g,a.star?"␣":" "),bn=S4,eg=`[ \r
	]`,Z6="\\\\[a-zA-Z@]+",Q6="\\\\[^\uD800-\uDFFF]",J6="("+Z6+")"+eg+"*",t7=`\\\\(
|[ \r	]+
?)[ \r	]*`,m1="[̀-ͯ]",e7=new RegExp(m1+"+$"),s7="("+eg+"+)|"+(t7+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(m1+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(m1+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+J6)+("|"+Q6+")");class rp{constructor(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp(s7,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,e){this.catcodes[t]=e}lex(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new Is("EOF",new ms(this,e,e));var s=this.tokenRegex.exec(t);if(s===null||s.index!==e)throw new H("Unexpected character: '"+t[e]+"'",new Is(t[e],new ms(this,e,e+1)));var i=s[6]||s[3]||(s[2]?"\\ ":" ");if(this.catcodes[i]===14){var r=t.indexOf(`
`,this.tokenRegex.lastIndex);return r===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=r+1,this.lex()}return new Is(i,new ms(this,e,this.tokenRegex.lastIndex))}}class i7{constructor(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new H("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(t[e]==null?delete this.current[e]:this.current[e]=t[e])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,e,s){if(s===void 0&&(s=!1),s){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var r=this.undefStack[this.undefStack.length-1];r&&!r.hasOwnProperty(t)&&(r[t]=this.current[t])}e==null?delete this.current[t]:this.current[t]=e}}var r7=V4;S("\\noexpand",function(a){var t=a.popToken();return a.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});S("\\expandafter",function(a){var t=a.popToken();return a.expandOnce(!0),{tokens:[t],numArgs:0}});S("\\@firstoftwo",function(a){var t=a.consumeArgs(2);return{tokens:t[0],numArgs:0}});S("\\@secondoftwo",function(a){var t=a.consumeArgs(2);return{tokens:t[1],numArgs:0}});S("\\@ifnextchar",function(a){var t=a.consumeArgs(3);a.consumeSpaces();var e=a.future();return t[0].length===1&&t[0][0].text===e.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});S("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");S("\\TextOrMath",function(a){var t=a.consumeArgs(2);return a.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var np={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};S("\\char",function(a){var t=a.popToken(),e,s="";if(t.text==="'")e=8,t=a.popToken();else if(t.text==='"')e=16,t=a.popToken();else if(t.text==="`")if(t=a.popToken(),t.text[0]==="\\")s=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new H("\\char` missing argument");s=t.text.charCodeAt(0)}else e=10;if(e){if(s=np[t.text],s==null||s>=e)throw new H("Invalid base-"+e+" digit "+t.text);for(var i;(i=np[a.future().text])!=null&&i<e;)s*=e,s+=i,a.popToken()}return"\\@char{"+s+"}"});var G1=(a,t,e,s)=>{var i=a.consumeArg().tokens;if(i.length!==1)throw new H("\\newcommand's first argument must be a macro name");var r=i[0].text,n=a.isDefined(r);if(n&&!t)throw new H("\\newcommand{"+r+"} attempting to redefine "+(r+"; use \\renewcommand"));if(!n&&!e)throw new H("\\renewcommand{"+r+"} when command "+r+" does not yet exist; use \\newcommand");var l=0;if(i=a.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var h="",c=a.expandNextToken();c.text!=="]"&&c.text!=="EOF";)h+=c.text,c=a.expandNextToken();if(!h.match(/^\s*[0-9]+\s*$/))throw new H("Invalid number of arguments: "+h);l=parseInt(h),i=a.consumeArg().tokens}return n&&s||a.macros.set(r,{tokens:i,numArgs:l}),""};S("\\newcommand",a=>G1(a,!1,!0,!1));S("\\renewcommand",a=>G1(a,!0,!1,!1));S("\\providecommand",a=>G1(a,!0,!0,!0));S("\\message",a=>{var t=a.consumeArgs(1)[0];return console.log(t.reverse().map(e=>e.text).join("")),""});S("\\errmessage",a=>{var t=a.consumeArgs(1)[0];return console.error(t.reverse().map(e=>e.text).join("")),""});S("\\show",a=>{var t=a.popToken(),e=t.text;return console.log(t,a.macros.get(e),bn[e],qt.math[e],qt.text[e]),""});S("\\bgroup","{");S("\\egroup","}");S("~","\\nobreakspace");S("\\lq","`");S("\\rq","'");S("\\aa","\\r a");S("\\AA","\\r A");S("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");S("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");S("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");S("ℬ","\\mathscr{B}");S("ℰ","\\mathscr{E}");S("ℱ","\\mathscr{F}");S("ℋ","\\mathscr{H}");S("ℐ","\\mathscr{I}");S("ℒ","\\mathscr{L}");S("ℳ","\\mathscr{M}");S("ℛ","\\mathscr{R}");S("ℭ","\\mathfrak{C}");S("ℌ","\\mathfrak{H}");S("ℨ","\\mathfrak{Z}");S("\\Bbbk","\\Bbb{k}");S("·","\\cdotp");S("\\llap","\\mathllap{\\textrm{#1}}");S("\\rlap","\\mathrlap{\\textrm{#1}}");S("\\clap","\\mathclap{\\textrm{#1}}");S("\\mathstrut","\\vphantom{(}");S("\\underbar","\\underline{\\text{#1}}");S("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');S("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");S("\\ne","\\neq");S("≠","\\neq");S("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");S("∉","\\notin");S("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");S("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");S("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");S("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");S("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");S("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");S("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");S("⟂","\\perp");S("‼","\\mathclose{!\\mkern-0.8mu!}");S("∌","\\notni");S("⌜","\\ulcorner");S("⌝","\\urcorner");S("⌞","\\llcorner");S("⌟","\\lrcorner");S("©","\\copyright");S("®","\\textregistered");S("️","\\textregistered");S("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');S("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');S("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');S("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');S("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");S("⋮","\\vdots");S("\\varGamma","\\mathit{\\Gamma}");S("\\varDelta","\\mathit{\\Delta}");S("\\varTheta","\\mathit{\\Theta}");S("\\varLambda","\\mathit{\\Lambda}");S("\\varXi","\\mathit{\\Xi}");S("\\varPi","\\mathit{\\Pi}");S("\\varSigma","\\mathit{\\Sigma}");S("\\varUpsilon","\\mathit{\\Upsilon}");S("\\varPhi","\\mathit{\\Phi}");S("\\varPsi","\\mathit{\\Psi}");S("\\varOmega","\\mathit{\\Omega}");S("\\substack","\\begin{subarray}{c}#1\\end{subarray}");S("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");S("\\boxed","\\fbox{$\\displaystyle{#1}$}");S("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");S("\\implies","\\DOTSB\\;\\Longrightarrow\\;");S("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");S("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");S("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var ap={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};S("\\dots",function(a){var t="\\dotso",e=a.expandAfterFuture().text;return e in ap?t=ap[e]:(e.slice(0,4)==="\\not"||e in qt.math&&["bin","rel"].includes(qt.math[e].group))&&(t="\\dotsb"),t});var $1={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};S("\\dotso",function(a){var t=a.future().text;return t in $1?"\\ldots\\,":"\\ldots"});S("\\dotsc",function(a){var t=a.future().text;return t in $1&&t!==","?"\\ldots\\,":"\\ldots"});S("\\cdots",function(a){var t=a.future().text;return t in $1?"\\@cdots\\,":"\\@cdots"});S("\\dotsb","\\cdots");S("\\dotsm","\\cdots");S("\\dotsi","\\!\\cdots");S("\\dotsx","\\ldots\\,");S("\\DOTSI","\\relax");S("\\DOTSB","\\relax");S("\\DOTSX","\\relax");S("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");S("\\,","\\tmspace+{3mu}{.1667em}");S("\\thinspace","\\,");S("\\>","\\mskip{4mu}");S("\\:","\\tmspace+{4mu}{.2222em}");S("\\medspace","\\:");S("\\;","\\tmspace+{5mu}{.2777em}");S("\\thickspace","\\;");S("\\!","\\tmspace-{3mu}{.1667em}");S("\\negthinspace","\\!");S("\\negmedspace","\\tmspace-{4mu}{.2222em}");S("\\negthickspace","\\tmspace-{5mu}{.277em}");S("\\enspace","\\kern.5em ");S("\\enskip","\\hskip.5em\\relax");S("\\quad","\\hskip1em\\relax");S("\\qquad","\\hskip2em\\relax");S("\\tag","\\@ifstar\\tag@literal\\tag@paren");S("\\tag@paren","\\tag@literal{({#1})}");S("\\tag@literal",a=>{if(a.macros.get("\\df@tag"))throw new H("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});S("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");S("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");S("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");S("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");S("\\newline","\\\\\\relax");S("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var sg=G(Bi["Main-Regular"][84][1]-.7*Bi["Main-Regular"][65][1]);S("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+sg+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");S("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+sg+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");S("\\hspace","\\@ifstar\\@hspacer\\@hspace");S("\\@hspace","\\hskip #1\\relax");S("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");S("\\ordinarycolon",":");S("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");S("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');S("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');S("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');S("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');S("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');S("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');S("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');S("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');S("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');S("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');S("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');S("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');S("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');S("∷","\\dblcolon");S("∹","\\eqcolon");S("≔","\\coloneqq");S("≕","\\eqqcolon");S("⩴","\\Coloneqq");S("\\ratio","\\vcentcolon");S("\\coloncolon","\\dblcolon");S("\\colonequals","\\coloneqq");S("\\coloncolonequals","\\Coloneqq");S("\\equalscolon","\\eqqcolon");S("\\equalscoloncolon","\\Eqqcolon");S("\\colonminus","\\coloneq");S("\\coloncolonminus","\\Coloneq");S("\\minuscolon","\\eqcolon");S("\\minuscoloncolon","\\Eqcolon");S("\\coloncolonapprox","\\Colonapprox");S("\\coloncolonsim","\\Colonsim");S("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");S("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");S("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");S("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");S("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");S("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");S("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");S("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");S("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");S("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");S("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");S("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");S("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");S("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");S("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");S("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");S("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");S("\\nleqq","\\html@mathml{\\@nleqq}{≰}");S("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");S("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");S("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");S("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");S("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");S("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");S("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");S("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");S("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");S("\\imath","\\html@mathml{\\@imath}{ı}");S("\\jmath","\\html@mathml{\\@jmath}{ȷ}");S("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");S("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");S("⟦","\\llbracket");S("⟧","\\rrbracket");S("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");S("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");S("⦃","\\lBrace");S("⦄","\\rBrace");S("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");S("⦵","\\minuso");S("\\darr","\\downarrow");S("\\dArr","\\Downarrow");S("\\Darr","\\Downarrow");S("\\lang","\\langle");S("\\rang","\\rangle");S("\\uarr","\\uparrow");S("\\uArr","\\Uparrow");S("\\Uarr","\\Uparrow");S("\\N","\\mathbb{N}");S("\\R","\\mathbb{R}");S("\\Z","\\mathbb{Z}");S("\\alef","\\aleph");S("\\alefsym","\\aleph");S("\\Alpha","\\mathrm{A}");S("\\Beta","\\mathrm{B}");S("\\bull","\\bullet");S("\\Chi","\\mathrm{X}");S("\\clubs","\\clubsuit");S("\\cnums","\\mathbb{C}");S("\\Complex","\\mathbb{C}");S("\\Dagger","\\ddagger");S("\\diamonds","\\diamondsuit");S("\\empty","\\emptyset");S("\\Epsilon","\\mathrm{E}");S("\\Eta","\\mathrm{H}");S("\\exist","\\exists");S("\\harr","\\leftrightarrow");S("\\hArr","\\Leftrightarrow");S("\\Harr","\\Leftrightarrow");S("\\hearts","\\heartsuit");S("\\image","\\Im");S("\\infin","\\infty");S("\\Iota","\\mathrm{I}");S("\\isin","\\in");S("\\Kappa","\\mathrm{K}");S("\\larr","\\leftarrow");S("\\lArr","\\Leftarrow");S("\\Larr","\\Leftarrow");S("\\lrarr","\\leftrightarrow");S("\\lrArr","\\Leftrightarrow");S("\\Lrarr","\\Leftrightarrow");S("\\Mu","\\mathrm{M}");S("\\natnums","\\mathbb{N}");S("\\Nu","\\mathrm{N}");S("\\Omicron","\\mathrm{O}");S("\\plusmn","\\pm");S("\\rarr","\\rightarrow");S("\\rArr","\\Rightarrow");S("\\Rarr","\\Rightarrow");S("\\real","\\Re");S("\\reals","\\mathbb{R}");S("\\Reals","\\mathbb{R}");S("\\Rho","\\mathrm{P}");S("\\sdot","\\cdot");S("\\sect","\\S");S("\\spades","\\spadesuit");S("\\sub","\\subset");S("\\sube","\\subseteq");S("\\supe","\\supseteq");S("\\Tau","\\mathrm{T}");S("\\thetasym","\\vartheta");S("\\weierp","\\wp");S("\\Zeta","\\mathrm{Z}");S("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");S("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");S("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");S("\\bra","\\mathinner{\\langle{#1}|}");S("\\ket","\\mathinner{|{#1}\\rangle}");S("\\braket","\\mathinner{\\langle{#1}\\rangle}");S("\\Bra","\\left\\langle#1\\right|");S("\\Ket","\\left|#1\\right\\rangle");var ig=a=>t=>{var e=t.consumeArg().tokens,s=t.consumeArg().tokens,i=t.consumeArg().tokens,r=t.consumeArg().tokens,n=t.macros.get("|"),l=t.macros.get("\\|");t.macros.beginGroup();var h=d=>p=>{a&&(p.macros.set("|",n),i.length&&p.macros.set("\\|",l));var g=d;if(!d&&i.length){var b=p.future();b.text==="|"&&(p.popToken(),g=!0)}return{tokens:g?i:s,numArgs:0}};t.macros.set("|",h(!1)),i.length&&t.macros.set("\\|",h(!0));var c=t.consumeArg().tokens,u=t.expandTokens([...r,...c,...e]);return t.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};S("\\bra@ket",ig(!1));S("\\bra@set",ig(!0));S("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");S("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");S("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");S("\\angln","{\\angl n}");S("\\blue","\\textcolor{##6495ed}{#1}");S("\\orange","\\textcolor{##ffa500}{#1}");S("\\pink","\\textcolor{##ff00af}{#1}");S("\\red","\\textcolor{##df0030}{#1}");S("\\green","\\textcolor{##28ae7b}{#1}");S("\\gray","\\textcolor{gray}{#1}");S("\\purple","\\textcolor{##9d38bd}{#1}");S("\\blueA","\\textcolor{##ccfaff}{#1}");S("\\blueB","\\textcolor{##80f6ff}{#1}");S("\\blueC","\\textcolor{##63d9ea}{#1}");S("\\blueD","\\textcolor{##11accd}{#1}");S("\\blueE","\\textcolor{##0c7f99}{#1}");S("\\tealA","\\textcolor{##94fff5}{#1}");S("\\tealB","\\textcolor{##26edd5}{#1}");S("\\tealC","\\textcolor{##01d1c1}{#1}");S("\\tealD","\\textcolor{##01a995}{#1}");S("\\tealE","\\textcolor{##208170}{#1}");S("\\greenA","\\textcolor{##b6ffb0}{#1}");S("\\greenB","\\textcolor{##8af281}{#1}");S("\\greenC","\\textcolor{##74cf70}{#1}");S("\\greenD","\\textcolor{##1fab54}{#1}");S("\\greenE","\\textcolor{##0d923f}{#1}");S("\\goldA","\\textcolor{##ffd0a9}{#1}");S("\\goldB","\\textcolor{##ffbb71}{#1}");S("\\goldC","\\textcolor{##ff9c39}{#1}");S("\\goldD","\\textcolor{##e07d10}{#1}");S("\\goldE","\\textcolor{##a75a05}{#1}");S("\\redA","\\textcolor{##fca9a9}{#1}");S("\\redB","\\textcolor{##ff8482}{#1}");S("\\redC","\\textcolor{##f9685d}{#1}");S("\\redD","\\textcolor{##e84d39}{#1}");S("\\redE","\\textcolor{##bc2612}{#1}");S("\\maroonA","\\textcolor{##ffbde0}{#1}");S("\\maroonB","\\textcolor{##ff92c6}{#1}");S("\\maroonC","\\textcolor{##ed5fa6}{#1}");S("\\maroonD","\\textcolor{##ca337c}{#1}");S("\\maroonE","\\textcolor{##9e034e}{#1}");S("\\purpleA","\\textcolor{##ddd7ff}{#1}");S("\\purpleB","\\textcolor{##c6b9fc}{#1}");S("\\purpleC","\\textcolor{##aa87ff}{#1}");S("\\purpleD","\\textcolor{##7854ab}{#1}");S("\\purpleE","\\textcolor{##543b78}{#1}");S("\\mintA","\\textcolor{##f5f9e8}{#1}");S("\\mintB","\\textcolor{##edf2df}{#1}");S("\\mintC","\\textcolor{##e0e5cc}{#1}");S("\\grayA","\\textcolor{##f6f7f7}{#1}");S("\\grayB","\\textcolor{##f0f1f2}{#1}");S("\\grayC","\\textcolor{##e3e5e6}{#1}");S("\\grayD","\\textcolor{##d6d8da}{#1}");S("\\grayE","\\textcolor{##babec2}{#1}");S("\\grayF","\\textcolor{##888d93}{#1}");S("\\grayG","\\textcolor{##626569}{#1}");S("\\grayH","\\textcolor{##3b3e40}{#1}");S("\\grayI","\\textcolor{##21242c}{#1}");S("\\kaBlue","\\textcolor{##314453}{#1}");S("\\kaGreen","\\textcolor{##71B307}{#1}");var rg={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class n7{constructor(t,e,s){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new i7(r7,e.macros),this.mode=s,this.stack=[]}feed(t){this.lexer=new rp(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var e,s,i;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;e=this.popToken(),{tokens:i,end:s}=this.consumeArg(["]"])}else({tokens:i,start:e,end:s}=this.consumeArg());return this.pushToken(new Is("EOF",s.loc)),this.pushTokens(i),new Is("",ms.range(e,s))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var e=[],s=t&&t.length>0;s||this.consumeSpaces();var i=this.future(),r,n=0,l=0;do{if(r=this.popToken(),e.push(r),r.text==="{")++n;else if(r.text==="}"){if(--n,n===-1)throw new H("Extra }",r)}else if(r.text==="EOF")throw new H("Unexpected end of input in a macro argument, expected '"+(t&&s?t[l]:"}")+"'",r);if(t&&s)if((n===0||n===1&&t[l]==="{")&&r.text===t[l]){if(++l,l===t.length){e.splice(-l,l);break}}else l=0}while(n!==0||s);return i.text==="{"&&e[e.length-1].text==="}"&&(e.pop(),e.shift()),e.reverse(),{tokens:e,start:i,end:r}}consumeArgs(t,e){if(e){if(e.length!==t+1)throw new H("The length of delimiters doesn't match the number of args!");for(var s=e[0],i=0;i<s.length;i++){var r=this.popToken();if(s[i]!==r.text)throw new H("Use of the macro doesn't match its definition",r)}}for(var n=[],l=0;l<t;l++)n.push(this.consumeArg(e&&e[l+1]).tokens);return n}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new H("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var e=this.popToken(),s=e.text,i=e.noexpand?null:this._getExpansion(s);if(i==null||t&&i.unexpandable){if(t&&i==null&&s[0]==="\\"&&!this.isDefined(s))throw new H("Undefined control sequence: "+s);return this.pushToken(e),!1}this.countExpansion(1);var r=i.tokens,n=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){r=r.slice();for(var l=r.length-1;l>=0;--l){var h=r[l];if(h.text==="#"){if(l===0)throw new H("Incomplete placeholder at end of macro body",h);if(h=r[--l],h.text==="#")r.splice(l+1,1);else if(/^[1-9]$/.test(h.text))r.splice(l,2,...n[+h.text-1]);else throw new H("Not a valid argument number",h)}}}return this.pushTokens(r),r.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Is(t)]):void 0}expandTokens(t){var e=[],s=this.stack.length;for(this.pushTokens(t);this.stack.length>s;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),e.push(i)}return this.countExpansion(e.length),e}expandMacroAsText(t){var e=this.expandMacro(t);return e&&e.map(s=>s.text).join("")}_getExpansion(t){var e=this.macros.get(t);if(e==null)return e;if(t.length===1){var s=this.lexer.catcodes[t];if(s!=null&&s!==13)return}var i=typeof e=="function"?e(this):e;if(typeof i=="string"){var r=0;if(i.indexOf("#")!==-1)for(var n=i.replace(/##/g,"");n.indexOf("#"+(r+1))!==-1;)++r;for(var l=new rp(i,this.settings),h=[],c=l.lex();c.text!=="EOF";)h.push(c),c=l.lex();h.reverse();var u={tokens:h,numArgs:r};return u}return i}isDefined(t){return this.macros.has(t)||bn.hasOwnProperty(t)||qt.math.hasOwnProperty(t)||qt.text.hasOwnProperty(t)||rg.hasOwnProperty(t)}isExpandable(t){var e=this.macros.get(t);return e!=null?typeof e=="string"||typeof e=="function"||!e.unexpandable:bn.hasOwnProperty(t)&&!bn[t].primitive}}var op=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,Uh=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),Wu={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},lp={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class gu{constructor(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new n7(t,e,this.mode),this.settings=e,this.leftrightDepth=0}expect(t,e){if(e===void 0&&(e=!0),this.fetch().text!==t)throw new H("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var e=this.nextToken;this.consume(),this.gullet.pushToken(new Is("}")),this.gullet.pushTokens(t);var s=this.parseExpression(!1);return this.expect("}"),this.nextToken=e,s}parseExpression(t,e){for(var s=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(gu.endOfExpression.indexOf(i.text)!==-1||e&&i.text===e||t&&bn[i.text]&&bn[i.text].infix)break;var r=this.parseAtom(e);if(r){if(r.type==="internal")continue}else break;s.push(r)}return this.mode==="text"&&this.formLigatures(s),this.handleInfixNodes(s)}handleInfixNodes(t){for(var e=-1,s,i=0;i<t.length;i++)if(t[i].type==="infix"){if(e!==-1)throw new H("only one infix operator per group",t[i].token);e=i,s=t[i].replaceWith}if(e!==-1&&s){var r,n,l=t.slice(0,e),h=t.slice(e+1);l.length===1&&l[0].type==="ordgroup"?r=l[0]:r={type:"ordgroup",mode:this.mode,body:l},h.length===1&&h[0].type==="ordgroup"?n=h[0]:n={type:"ordgroup",mode:this.mode,body:h};var c;return s==="\\\\abovefrac"?c=this.callFunction(s,[r,t[e],n],[]):c=this.callFunction(s,[r,n],[]),[c]}else return t}handleSupSubscript(t){var e=this.fetch(),s=e.text;this.consume(),this.consumeSpaces();var i;do{var r;i=this.parseGroup(t)}while(((r=i)==null?void 0:r.type)==="internal");if(!i)throw new H("Expected group after '"+s+"'",e);return i}formatUnsupportedCmd(t){for(var e=[],s=0;s<t.length;s++)e.push({type:"textord",mode:"text",text:t[s]});var i={type:"text",mode:this.mode,body:e},r={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return r}parseAtom(t){var e=this.parseGroup("atom",t);if((e==null?void 0:e.type)==="internal"||this.mode==="text")return e;for(var s,i;;){this.consumeSpaces();var r=this.fetch();if(r.text==="\\limits"||r.text==="\\nolimits"){if(e&&e.type==="op"){var n=r.text==="\\limits";e.limits=n,e.alwaysHandleSupSub=!0}else if(e&&e.type==="operatorname")e.alwaysHandleSupSub&&(e.limits=r.text==="\\limits");else throw new H("Limit controls must follow a math operator",r);this.consume()}else if(r.text==="^"){if(s)throw new H("Double superscript",r);s=this.handleSupSubscript("superscript")}else if(r.text==="_"){if(i)throw new H("Double subscript",r);i=this.handleSupSubscript("subscript")}else if(r.text==="'"){if(s)throw new H("Double superscript",r);var l={type:"textord",mode:this.mode,text:"\\prime"},h=[l];for(this.consume();this.fetch().text==="'";)h.push(l),this.consume();this.fetch().text==="^"&&h.push(this.handleSupSubscript("superscript")),s={type:"ordgroup",mode:this.mode,body:h}}else if(Uh[r.text]){var c=op.test(r.text),u=[];for(u.push(new Is(Uh[r.text])),this.consume();;){var d=this.fetch().text;if(!Uh[d]||op.test(d)!==c)break;u.unshift(new Is(Uh[d])),this.consume()}var p=this.subparse(u);c?i={type:"ordgroup",mode:"math",body:p}:s={type:"ordgroup",mode:"math",body:p}}else break}return s||i?{type:"supsub",mode:this.mode,base:e,sup:s,sub:i}:e}parseFunction(t,e){var s=this.fetch(),i=s.text,r=bn[i];if(!r)return null;if(this.consume(),e&&e!=="atom"&&!r.allowedInArgument)throw new H("Got function '"+i+"' with no arguments"+(e?" as "+e:""),s);if(this.mode==="text"&&!r.allowedInText)throw new H("Can't use function '"+i+"' in text mode",s);if(this.mode==="math"&&r.allowedInMath===!1)throw new H("Can't use function '"+i+"' in math mode",s);var{args:n,optArgs:l}=this.parseArguments(i,r);return this.callFunction(i,n,l,s,t)}callFunction(t,e,s,i,r){var n={funcName:t,parser:this,token:i,breakOnTokenText:r},l=bn[t];if(l&&l.handler)return l.handler(n,e,s);throw new H("No function handler for "+t)}parseArguments(t,e){var s=e.numArgs+e.numOptionalArgs;if(s===0)return{args:[],optArgs:[]};for(var i=[],r=[],n=0;n<s;n++){var l=e.argTypes&&e.argTypes[n],h=n<e.numOptionalArgs;(e.primitive&&l==null||e.type==="sqrt"&&n===1&&r[0]==null)&&(l="primitive");var c=this.parseGroupOfType("argument to '"+t+"'",l,h);if(h)r.push(c);else if(c!=null)i.push(c);else throw new H("Null argument, please report this as a bug")}return{args:i,optArgs:r}}parseGroupOfType(t,e,s){switch(e){case"color":return this.parseColorGroup(s);case"size":return this.parseSizeGroup(s);case"url":return this.parseUrlGroup(s);case"math":case"text":return this.parseArgumentGroup(s,e);case"hbox":{var i=this.parseArgumentGroup(s,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var r=this.parseStringGroup("raw",s);return r!=null?{type:"raw",mode:"text",string:r.text}:null}case"primitive":{if(s)throw new H("A primitive argument cannot be optional");var n=this.parseGroup(t);if(n==null)throw new H("Expected group as "+t,this.fetch());return n}case"original":case null:case void 0:return this.parseArgumentGroup(s);default:throw new H("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,e){var s=this.gullet.scanArgument(e);if(s==null)return null;for(var i="",r;(r=this.fetch()).text!=="EOF";)i+=r.text,this.consume();return this.consume(),s.text=i,s}parseRegexGroup(t,e){for(var s=this.fetch(),i=s,r="",n;(n=this.fetch()).text!=="EOF"&&t.test(r+n.text);)i=n,r+=i.text,this.consume();if(r==="")throw new H("Invalid "+e+": '"+s.text+"'",s);return s.range(i,r)}parseColorGroup(t){var e=this.parseStringGroup("color",t);if(e==null)return null;var s=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!s)throw new H("Invalid color: '"+e.text+"'",e);var i=s[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(t){var e,s=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?e=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):e=this.parseStringGroup("size",t),!e)return null;!t&&e.text.length===0&&(e.text="0pt",s=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!i)throw new H("Invalid size: '"+e.text+"'",e);var r={number:+(i[1]+i[2]),unit:i[3]};if(!p4(r))throw new H("Invalid unit: '"+r.unit+"'",e);return{type:"size",mode:this.mode,value:r,isBlank:s}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var e=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),e==null)return null;var s=e.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:s}}parseArgumentGroup(t,e){var s=this.gullet.scanArgument(t);if(s==null)return null;var i=this.mode;e&&this.switchMode(e),this.gullet.beginGroup();var r=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var n={type:"ordgroup",mode:this.mode,loc:s.loc,body:r};return e&&this.switchMode(i),n}parseGroup(t,e){var s=this.fetch(),i=s.text,r;if(i==="{"||i==="\\begingroup"){this.consume();var n=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,n),h=this.fetch();this.expect(n),this.gullet.endGroup(),r={type:"ordgroup",mode:this.mode,loc:ms.range(s,h),body:l,semisimple:i==="\\begingroup"||void 0}}else if(r=this.parseFunction(e,t)||this.parseSymbol(),r==null&&i[0]==="\\"&&!rg.hasOwnProperty(i)){if(this.settings.throwOnError)throw new H("Undefined control sequence: "+i,s);r=this.formatUnsupportedCmd(i),this.consume()}return r}formLigatures(t){for(var e=t.length-1,s=0;s<e;++s){var i=t[s],r=i.text;r==="-"&&t[s+1].text==="-"&&(s+1<e&&t[s+2].text==="-"?(t.splice(s,3,{type:"textord",mode:"text",loc:ms.range(i,t[s+2]),text:"---"}),e-=2):(t.splice(s,2,{type:"textord",mode:"text",loc:ms.range(i,t[s+1]),text:"--"}),e-=1)),(r==="'"||r==="`")&&t[s+1].text===r&&(t.splice(s,2,{type:"textord",mode:"text",loc:ms.range(i,t[s+1]),text:r+r}),e-=1)}}parseSymbol(){var t=this.fetch(),e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var s=e.slice(5),i=s.charAt(0)==="*";if(i&&(s=s.slice(1)),s.length<2||s.charAt(0)!==s.slice(-1))throw new H(`\\verb assertion failed --
                    please report what input caused this bug`);return s=s.slice(1,-1),{type:"verb",mode:"text",body:s,star:i}}lp.hasOwnProperty(e[0])&&!qt[this.mode][e[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=lp[e[0]]+e.slice(1));var r=e7.exec(e);r&&(e=e.substring(0,r.index),e==="i"?e="ı":e==="j"&&(e="ȷ"));var n;if(qt[this.mode][e]){this.settings.strict&&this.mode==="math"&&c1.indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var l=qt[this.mode][e].group,h=ms.range(t),c;if(j3.hasOwnProperty(l)){var u=l;c={type:"atom",mode:this.mode,family:u,loc:h,text:e}}else c={type:l,mode:this.mode,loc:h,text:e};n=c}else if(e.charCodeAt(0)>=128)this.settings.strict&&(f4(e.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'"'+(" ("+e.charCodeAt(0)+")"),t)),n={type:"textord",mode:"text",loc:ms.range(t),text:e};else return null;if(this.consume(),r)for(var d=0;d<r[0].length;d++){var p=r[0][d];if(!Wu[p])throw new H("Unknown accent ' "+p+"'",t);var g=Wu[p][this.mode]||Wu[p].text;if(!g)throw new H("Accent "+p+" unsupported in "+this.mode+" mode",t);n={type:"accent",mode:this.mode,loc:ms.range(t),label:g,isStretchy:!1,isShifty:!0,base:n}}return n}}gu.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var V1=function(t,e){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var s=new gu(t,e);delete s.gullet.macros.current["\\df@tag"];var i=s.parse();if(delete s.gullet.macros.current["\\current@color"],delete s.gullet.macros.current["\\color"],s.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new H("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:s.subparse([new Is("\\df@tag")])}]}return i},ng=function(t,e,s){e.textContent="";var i=U1(t,s).toNode();e.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ng=function(){throw new H("KaTeX doesn't work in quirks mode.")});var a7=function(t,e){var s=U1(t,e).toMarkup();return s},o7=function(t,e){var s=new T1(e);return V1(t,s)},ag=function(t,e,s){if(s.throwOnError||!(t instanceof H))throw t;var i=D.makeSpan(["katex-error"],[new Ys(e)]);return i.setAttribute("title",t.toString()),i.setAttribute("style","color:"+s.errorColor),i},U1=function(t,e){var s=new T1(e);try{var i=V1(t,s);return g6(i,t,s)}catch(r){return ag(r,t,s)}},l7=function(t,e){var s=new T1(e);try{var i=V1(t,s);return v6(i,t,s)}catch(r){return ag(r,t,s)}},h7="0.16.28",c7={Span:Th,Anchor:M1,SymbolNode:Ys,SvgNode:Rr,PathNode:Sn,LineNode:h1},hp={version:h7,render:ng,renderToString:a7,ParseError:H,SETTINGS_SCHEMA:xc,__parse:o7,__renderToDomTree:U1,__renderToHTMLTree:l7,__setFontMetrics:B3,__defineSymbol:f,__defineFunction:W,__defineMacro:S,__domTree:c7};const u7="/assets/pdf.worker.min-yatZIOMy.mjs",d7={chatStream(a,t){return fetch("/api/v1/chat/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a,context:t})})}},f7={class:"paper-detail-page"},p7={key:0,class:"sidebar"},m7={class:"sidebar-actions"},g7={class:"main-content"},v7={class:"tab-navigation"},b7={key:0,class:"content-area"},y7={class:"tab-content"},w7={class:"paper-header-section"},A7={class:"paper-title"},x7={class:"paper-authors-section"},S7={class:"authors-text"},k7={class:"paper-category"},_7={class:"category-tag"},T7={class:"abstract-section"},E7=["innerHTML"],C7={key:0,class:"links-section"},M7=["href"],R7=["href"],P7={class:"stats-section"},D7={class:"stat-item"},I7={class:"stat-value"},L7={class:"stat-value"},N7={class:"stat-value"},F7={class:"stat-item"},O7={class:"stat-value"},z7={class:"comments-section"},B7={key:0,class:"comment-input"},H7={class:"comment-list"},q7={class:"comment-header"},G7={class:"comment-username"},$7={class:"comment-time"},V7={class:"comment-content"},U7={key:0,class:"no-comments"},W7={class:"tab-content ai-tab-content"},j7={class:"ai-layout"},X7={class:"ai-pdf-section"},Y7={class:"pdf-controls compact"},K7={class:"left-controls"},Z7={class:"right-controls"},Q7={class:"ai-chat-section"},J7={class:"chat-header"},tv={key:0,class:"chat-welcome"},ev={class:"message-avatar"},sv={class:"message-content"},iv=["innerHTML"],rv={key:1},nv={key:1,class:"message-item ai"},av={class:"message-avatar"},ov={class:"chat-input-area"},lv={class:"input-actions"},hv={class:"tab-content"},cv={class:"resources-empty"},uv={key:1,class:"right-sidebar"},dv={class:"related-papers"},fv={class:"related-list"},pv=["onClick"],mv={class:"related-title"},gv={class:"related-meta"},vv=fg({__name:"PaperDetailPage",setup(a){typeof window<"u"&&"Worker"in window&&(h4.workerSrc=u7);const t=wg(),e=Ag(),s=pg(),i=Vt(!1),r=Vt(null),n=Vt([]),l=Vt(""),h=Vt("overview"),c=Vt([]),u=Vt(),d=Vt(),p=Vt(),g=xg(null),b=Vt(1),A=Vt(0),_=Vt(1),k=Vt(0),C=Vt(!1),R=Vt(0),P=Vt(0),I=Vt(!1),N=Vt({top:0,left:0}),L=Vt(""),z=Vt([]),q=Vt(""),st=Vt(!1),X=Vt(),ot=Vt(!0),Et=async()=>{ot.value=!ot.value,await Dh(),await At(),await re()},ct=Z=>Z?Z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\n/g,"<br>"):"",Rt=async()=>{i.value=!0;try{const Z=await hf.getPaperById(t.params.id);Z.data.code===200&&(r.value=Z.data.data,U(),J())}finally{i.value=!1}},U=async()=>{try{const Z=await Ka.getComments(t.params.id);Z.data.code===200&&(n.value=Z.data.data.content||Z.data.data.records||[])}catch{}},J=async()=>{var Z;try{if((Z=r.value)!=null&&Z.primaryCategory){const F=await hf.getPapersByCategory(r.value.primaryCategory,1,5);if(F.data.code===200){const gt=F.data.data.content||F.data.data.records||[];c.value=gt.filter(wt=>wt.arxivId!==r.value.arxivId)}}}catch{}},Yt=async()=>{if(!s.isLoggedIn){A0.warning("请先登录"),e.push("/login");return}try{r.value.isLiked?(await Ka.unlikePaper(r.value.arxivId),r.value.isLiked=!1,r.value.likeCount&&r.value.likeCount--):(await Ka.likePaper(r.value.arxivId),r.value.isLiked=!0,r.value.likeCount&&r.value.likeCount++)}catch{}},Me=async()=>{if(!s.isLoggedIn){A0.warning("请先登录"),e.push("/login");return}try{r.value.isCollected?(await Ka.uncollectPaper(r.value.arxivId),r.value.isCollected=!1,r.value.collectCount&&r.value.collectCount--):(await Ka.collectPaper(r.value.arxivId),r.value.isCollected=!0,r.value.collectCount&&r.value.collectCount++)}catch{}},ce=()=>{const Z=window.location.href;if(navigator.clipboard)navigator.clipboard.writeText(Z).then(()=>{A0.success("链接已复制到剪贴板")});else{const F=document.createElement("input");F.value=Z,document.body.appendChild(F),F.select(),document.execCommand("copy"),document.body.removeChild(F),A0.success("链接已复制到剪贴板")}},Kt=async()=>{l.value.trim()&&(await Ka.addComment(t.params.id,l.value),l.value="",U())},Ct=Z=>{e.push(`/paper/${Z}`)},Ft=Z=>Z?new Date(Z).toLocaleDateString("zh-CN"):"",Fs=Z=>{if(!Z)return"";if(Array.isArray(Z))return Z.join(", ");if(typeof Z=="string"){let F=Z.replace(/^\[|\]$/g,"");return F=F.replace(/"([^"]+)"/g,"$1"),F}return Z},ns=Z=>{if(!Z)return"";let F=Z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return F=F.replace(/\$([^\$\n]+?)\$/g,(gt,wt)=>{try{return hp.renderToString(wt,{throwOnError:!1,displayMode:!1})}catch(Re){return console.warn("LaTeX render error:",Re),gt}}),F=F.replace(/\$\$([^\$]+?)\$\$/g,(gt,wt)=>{try{return hp.renderToString(wt,{throwOnError:!1,displayMode:!0})}catch(Re){return console.warn("LaTeX render error:",Re),gt}}),F=F.replace(/\\n/g,"<br>"),F=F.replace(/\\t/g,"    "),F=F.replace(/\\textcolor\{([^}]+)\}\{([^}]+)\}/g,'<span style="color: $1">$2</span>'),F},me=async()=>{var Z;if((Z=r.value)!=null&&Z.arxivId){C.value=!0;try{const F=sessionStorage.getItem(`pdf_${r.value.arxivId}`);let gt=0;if(F){const vi=JSON.parse(F);b.value=vi.page||1,gt=vi.scale||0,k.value=vi.rotation||0}const wt=`/api/v1/arxiv/pdf/${encodeURIComponent(r.value.arxivId)}`,Re=c4({url:wt,cMapUrl:`https://unpkg.com/pdfjs-dist@${u4}/cmaps/`,cMapPacked:!0});g.value=await Re.promise,A.value=g.value.numPages,!gt||gt===0?await At():_.value=gt,await re()}catch(F){console.error("加载PDF失败:",F),A0.error("加载PDF失败，请稍后重试")}finally{C.value=!1}}},At=async()=>{if(g.value)try{const F=(await g.value.getPage(b.value)).getViewport({scale:1,rotation:k.value});let gt=0;const wt=document.querySelector(".pdf-wrapper");if(wt&&(gt=wt.clientWidth),gt>0){const Re=gt-52;_.value=Re/F.width}else _.value=1}catch(Z){console.warn("Fit to width failed:",Z),_.value=1}},re=async()=>{if(!g.value)return;const Z=u.value;if(Z)try{const F=await g.value.getPage(b.value),gt=F.getViewport({scale:_.value,rotation:k.value});R.value=gt.width,P.value=gt.height;const wt=Z.getContext("2d");if(!wt)return;const Re=window.devicePixelRatio||1;Z.width=Math.floor(gt.width*Re),Z.height=Math.floor(gt.height*Re),Z.style.width=Math.floor(gt.width)+"px",Z.style.height=Math.floor(gt.height)+"px";const vi=Re!==1?[Re,0,0,Re,0,0]:null;if(await F.render({canvasContext:wt,transform:vi,viewport:gt}).promise,d.value){const y0=await F.getTextContent(),Rn=d.value;Rn.innerHTML="";const w0=u3;await new w0.TextLayer({textContentSource:y0,container:Rn,viewport:gt}).render()}sessionStorage.setItem(`pdf_${r.value.arxivId}`,JSON.stringify({page:b.value,scale:_.value,rotation:k.value}))}catch(F){console.error("渲染PDF失败:",F)}},Ui=()=>b.value>1&&(b.value--,re()),Fr=()=>b.value<A.value&&(b.value++,re()),vu=()=>_.value<3&&(_.value+=.25,re()),bu=()=>_.value>.5&&(_.value-=.25,re()),yu=()=>{const Z=window.getSelection();if(Z&&Z.toString().trim().length>0){const gt=Z.getRangeAt(0).getBoundingClientRect();L.value=Z.toString(),I.value=!0,N.value={top:gt.top-50,left:gt.left+gt.width/2-100}}else setTimeout(()=>{I.value=!1},200)},Cn=Z=>{const F=L.value;if(!F)return;I.value=!1;let gt="";if(Z==="explain")gt=`请解释以下内容的含义：
"${F}"`;else if(Z==="translate")gt=`请将以下内容翻译成中文：
"${F}"`;else if(Z==="chat"){gt=`关于这段内容：
"${F}"
我想问：`,q.value=gt,Dh(()=>{const wt=document.querySelector(".chat-input-area textarea");wt&&wt.focus()});return}Xa(gt)},Xa=async Z=>{var wt;const F=typeof Z=="string"?Z:q.value;if(!F.trim()||st.value)return;z.value.push({role:"user",content:F}),q.value="",Mn(),st.value=!0;const gt=z.value.push({role:"ai",content:""})-1;try{const vi=(wt=(await d7.chatStream(F,L.value)).body)==null?void 0:wt.getReader(),y0=new TextDecoder;if(vi)for(;;){const{done:Rn,value:w0}=await vi.read();if(Rn)break;const Mh=y0.decode(w0);z.value[gt].content+=Mh,Mn()}}catch{z.value[gt].content+=`
(抱歉，AI响应出错，请稍后重试)`}finally{st.value=!1,Mn()}},Ch=()=>{z.value=[]},Mn=()=>{Dh(()=>{X.value&&(X.value.scrollTop=X.value.scrollHeight)})};return of(h,async Z=>{var F;Z==="original"&&((F=r.value)!=null&&F.arxivId)&&(await Dh(),g.value?(await At(),await re()):await me())}),of(()=>t.params.id,()=>{t.params.id&&(r.value=null,c.value=[],n.value=[],h.value="overview",g.value=null,z.value=[],Rt())}),mg(()=>{Rt()}),(Z,F)=>{var sf,rf;const gt=xe("ArrowLeft"),wt=xe("el-icon"),Re=xe("Share"),vi=xe("Star"),y0=xe("CircleCheck"),Rn=xe("User"),w0=xe("Link"),Mh=xe("Promotion"),Q1=xe("el-input"),Zs=xe("el-button"),wu=xe("el-empty"),Au=xe("el-button-group"),J1=xe("el-divider"),og=xe("ArrowRight"),lg=xe("Reading"),hg=xe("Switch"),cg=xe("ChatDotRound"),tf=xe("Monitor"),ef=yg("loading");return Ya((Gt(),ne("div",f7,[$("div",{class:Wi(["detail-container",{"full-width":h.value==="original"}])},[h.value!=="original"?(Gt(),ne("div",p7,[$("div",{class:"back-btn",onClick:F[0]||(F[0]=Ot=>Z.$router.back())},[lt(wt,null,{default:Pt(()=>[lt(gt)]),_:1}),F[10]||(F[10]=$("span",null,"返回",-1))]),$("div",m7,[$("div",{class:"sidebar-action",onClick:ce,title:"分享"},[lt(wt,null,{default:Pt(()=>[lt(Re)]),_:1})]),$("div",{class:Wi(["sidebar-action",{active:(sf=r.value)==null?void 0:sf.isCollected}]),onClick:Me,title:"收藏"},[lt(wt,null,{default:Pt(()=>[lt(vi)]),_:1})],2),$("div",{class:Wi(["sidebar-action",{active:(rf=r.value)==null?void 0:rf.isLiked}]),onClick:Yt,title:"点赞"},[lt(wt,null,{default:Pt(()=>[lt(y0)]),_:1})],2)])])):Qs("",!0),$("div",g7,[$("div",v7,[$("div",{class:Wi(["tab-item",{active:h.value==="overview"}]),onClick:F[1]||(F[1]=Ot=>h.value="overview")}," 论文概览 ",2),$("div",{class:Wi(["tab-item",{active:h.value==="original"}]),onClick:F[2]||(F[2]=Ot=>h.value="original")}," 论文原文 ",2),$("div",{class:Wi(["tab-item",{active:h.value==="resources"}]),onClick:F[3]||(F[3]=Ot=>h.value="resources")}," 相关资料/解读 ",2)]),r.value?(Gt(),ne("div",b7,[Ya($("div",y7,[$("div",w7,[$("h1",A7,Pe(r.value.title),1),$("div",x7,[lt(wt,null,{default:Pt(()=>[lt(Rn)]),_:1}),$("span",S7,Pe(Fs(r.value.authors)),1)]),$("div",k7,[$("span",_7,Pe(r.value.primaryCategory),1)])]),$("div",T7,[F[11]||(F[11]=$("h3",{class:"section-title"},"摘要",-1)),$("div",{ref_key:"abstractRef",ref:p,class:"abstract-text",innerHTML:ns(r.value.summary)},null,8,E7)]),r.value.arxivUrl||r.value.githubUrl?(Gt(),ne("div",C7,[r.value.arxivUrl?(Gt(),ne("a",{key:0,href:r.value.arxivUrl,target:"_blank",class:"link-item"},[lt(wt,null,{default:Pt(()=>[lt(w0)]),_:1}),F[12]||(F[12]=as(" 查看arXiv原文 ",-1))],8,M7)):Qs("",!0),r.value.githubUrl?(Gt(),ne("a",{key:1,href:r.value.githubUrl,target:"_blank",class:"link-item"},[lt(wt,null,{default:Pt(()=>[lt(Mh)]),_:1}),F[13]||(F[13]=as(" 代码仓库 ",-1))],8,R7)):Qs("",!0)])):Qs("",!0),$("div",P7,[$("div",D7,[F[14]||(F[14]=$("span",{class:"stat-icon"},"👥",-1)),$("span",I7,Pe(r.value.viewCount||0),1),F[15]||(F[15]=$("span",{class:"stat-label"},"阅读",-1))]),$("div",{class:Wi(["stat-item",{active:r.value.isCollected}]),onClick:Me},[F[16]||(F[16]=$("span",{class:"stat-icon"},"⭐",-1)),$("span",L7,Pe(r.value.collectCount||0),1),F[17]||(F[17]=$("span",{class:"stat-label"},"收藏",-1))],2),$("div",{class:Wi(["stat-item",{active:r.value.isLiked}]),onClick:Yt},[F[18]||(F[18]=$("span",{class:"stat-icon"},"❤️",-1)),$("span",N7,Pe(r.value.likeCount||0),1),F[19]||(F[19]=$("span",{class:"stat-label"},"点赞",-1))],2),$("div",F7,[F[20]||(F[20]=$("span",{class:"stat-icon"},"💬",-1)),$("span",O7,Pe(n.value.length),1),F[21]||(F[21]=$("span",{class:"stat-label"},"评论",-1))])]),$("div",z7,[F[23]||(F[23]=$("h3",{class:"section-title"},"评论",-1)),gg(s).isLoggedIn?(Gt(),ne("div",B7,[lt(Q1,{modelValue:l.value,"onUpdate:modelValue":F[4]||(F[4]=Ot=>l.value=Ot),type:"textarea",rows:3,placeholder:"发表您的见解..."},null,8,["modelValue"]),lt(Zs,{type:"primary",onClick:Kt,class:"submit-btn"},{default:Pt(()=>[...F[22]||(F[22]=[as(" 发表 ",-1)])]),_:1})])):(Gt(),Rh(wu,{key:1,description:"登录后发表评论"})),$("div",H7,[(Gt(!0),ne(Su,null,ku(n.value,Ot=>(Gt(),ne("div",{key:Ot.id,class:"comment-item"},[$("div",q7,[$("span",G7,Pe(Ot.username),1),$("span",$7,Pe(Ft(Ot.createdTime)),1)]),$("div",V7,Pe(Ot.content),1)]))),128)),n.value.length===0?(Gt(),ne("div",U7," 暂无评论，快来发表第一条评论吧~ ")):Qs("",!0)])])],512),[[Ph,h.value==="overview"]]),Ya($("div",W7,[$("div",j7,[$("div",X7,[$("div",Y7,[$("div",K7,[lt(Au,{size:"small"},{default:Pt(()=>[lt(Zs,{onClick:F[5]||(F[5]=Ot=>Z.$router.back())},{default:Pt(()=>[lt(wt,null,{default:Pt(()=>[lt(gt)]),_:1}),F[24]||(F[24]=as(" 返回",-1))]),_:1})]),_:1}),lt(J1,{direction:"vertical"}),lt(Au,{size:"small"},{default:Pt(()=>[lt(Zs,{onClick:Ui,disabled:b.value<=1},{default:Pt(()=>[lt(wt,null,{default:Pt(()=>[lt(gt)]),_:1})]),_:1},8,["disabled"]),lt(Zs,{disabled:""},{default:Pt(()=>[as(Pe(b.value)+" / "+Pe(A.value),1)]),_:1}),lt(Zs,{onClick:Fr,disabled:b.value>=A.value},{default:Pt(()=>[lt(wt,null,{default:Pt(()=>[lt(og)]),_:1})]),_:1},8,["disabled"])]),_:1}),lt(J1,{direction:"vertical"}),lt(Au,{size:"small"},{default:Pt(()=>[lt(Zs,{onClick:bu,disabled:_.value<=.5},{default:Pt(()=>[...F[25]||(F[25]=[as("-",-1)])]),_:1},8,["disabled"]),lt(Zs,{disabled:""},{default:Pt(()=>[as(Pe(Math.round(_.value*100))+"%",1)]),_:1}),lt(Zs,{onClick:vu,disabled:_.value>=3},{default:Pt(()=>[...F[26]||(F[26]=[as("+",-1)])]),_:1},8,["disabled"])]),_:1})]),$("div",Z7,[lt(Zs,{type:"primary",size:"small",icon:ot.value?"ArrowRight":"ChatDotRound",onClick:Et},{default:Pt(()=>[as(Pe(ot.value?"收起对话":"展开对话"),1)]),_:1},8,["icon"])])]),Ya((Gt(),ne("div",{class:"pdf-wrapper",onMouseup:yu},[$("div",{class:"pdf-render-container",style:lf({width:R.value+"px",height:P.value+"px"})},[$("canvas",{ref_key:"pdfCanvasRef",ref:u},null,512),$("div",{ref_key:"pdfTextLayerRef",ref:d,class:"textLayer"},null,512)],4)],32)),[[ef,C.value]]),I.value?(Gt(),ne("div",{key:0,class:"floating-menu",style:lf({top:N.value.top+"px",left:N.value.left+"px"})},[$("div",{class:"menu-item",onClick:F[6]||(F[6]=Ot=>Cn("explain"))},[lt(wt,null,{default:Pt(()=>[lt(lg)]),_:1}),F[27]||(F[27]=as(" 解释 ",-1))]),$("div",{class:"menu-item",onClick:F[7]||(F[7]=Ot=>Cn("translate"))},[lt(wt,null,{default:Pt(()=>[lt(hg)]),_:1}),F[28]||(F[28]=as(" 翻译 ",-1))]),$("div",{class:"menu-item",onClick:F[8]||(F[8]=Ot=>Cn("chat"))},[lt(wt,null,{default:Pt(()=>[lt(cg)]),_:1}),F[29]||(F[29]=as(" 对话 ",-1))])],4)):Qs("",!0)]),Ya($("div",Q7,[$("div",J7,[F[31]||(F[31]=$("h3",null,"AI 助手",-1)),lt(Zs,{type:"text",onClick:Ch},{default:Pt(()=>[...F[30]||(F[30]=[as("清空",-1)])]),_:1})]),$("div",{class:"chat-messages",ref_key:"chatMessagesRef",ref:X},[z.value.length===0?(Gt(),ne("div",tv,[...F[32]||(F[32]=[$("p",null,"👋 您好！我是您的论文阅读助手。",-1),$("p",null,"您可以划选论文内容，让我为您解释、翻译，或者直接在这里提问。",-1)])])):Qs("",!0),(Gt(!0),ne(Su,null,ku(z.value,(Ot,nf)=>(Gt(),ne("div",{key:nf,class:Wi(["message-item",Ot.role])},[$("div",ev,[Ot.role==="ai"?(Gt(),Rh(wt,{key:0},{default:Pt(()=>[lt(tf)]),_:1})):(Gt(),Rh(wt,{key:1},{default:Pt(()=>[lt(Rn)]),_:1}))]),$("div",sv,[Ot.role==="ai"?(Gt(),ne("div",{key:0,innerHTML:ct(Ot.content)},null,8,iv)):(Gt(),ne("div",rv,Pe(Ot.content),1))])],2))),128)),st.value?(Gt(),ne("div",nv,[$("div",av,[lt(wt,null,{default:Pt(()=>[lt(tf)]),_:1})]),F[33]||(F[33]=$("div",{class:"message-content loading"},[$("span"),$("span"),$("span")],-1))])):Qs("",!0)],512),$("div",ov,[lt(Q1,{modelValue:q.value,"onUpdate:modelValue":F[9]||(F[9]=Ot=>q.value=Ot),type:"textarea",rows:3,placeholder:"向AI询问任何您感兴趣的问题...",onKeydown:vg(bg(Xa,["ctrl"]),["enter"])},null,8,["modelValue","onKeydown"]),$("div",lv,[lt(Zs,{type:"primary",size:"small",onClick:Xa,loading:st.value},{default:Pt(()=>[...F[34]||(F[34]=[as(" 发送 ",-1)])]),_:1},8,["loading"])])])],512),[[Ph,ot.value]])])],512),[[Ph,h.value==="original"]]),Ya($("div",hv,[$("div",cv,[lt(wu,{description:"暂无相关资料/解读"})])],512),[[Ph,h.value==="resources"]])])):Qs("",!0)]),h.value!=="original"?(Gt(),ne("div",uv,[$("div",dv,[F[35]||(F[35]=$("h3",{class:"sidebar-title"},"相关论文推荐",-1)),$("div",fv,[(Gt(!0),ne(Su,null,ku(c.value,Ot=>(Gt(),ne("div",{key:Ot.arxivId,class:"related-item",onClick:nf=>Ct(Ot.arxivId)},[$("div",mv,Pe(Ot.title),1),$("div",gv,Pe(Ot.primaryCategory),1)],8,pv))),128)),c.value.length===0?(Gt(),Rh(wu,{key:0,description:"暂无相关论文","image-size":60})):Qs("",!0)])])])):Qs("",!0)],2)])),[[ef,i.value]])}}}),Av=Sg(vv,[["__scopeId","data-v-4391e102"]]);export{Av as default};
